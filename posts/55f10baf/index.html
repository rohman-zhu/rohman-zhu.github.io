<!DOCTYPE html>
<html lang="zh_cn">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha256-5eIC48iZUHmSlSUz9XtjRyK2mzQkHScZY1WdMaoz74E=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"github.com","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.21.1","exturl":false,"sidebar":{"position":"right","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="前言因为ConstraintLayout这个布局是安卓的新特性,所以在此就学习一下.这里转自网上的一篇文章,把基本的东西都讲到了,感觉还是不错的. 正文　　本篇文章的主题是ConstraintLayout。其实ConstraintLayout是Android Studio 2.2中主要的新增功能之一，也是Google在去年的I&#x2F;O大会上重点宣传的一个功能。我们都知道，在传统的Androi">
<meta property="og:type" content="article">
<meta property="og:title" content="Android ConstraintLayout解析">
<meta property="og:url" content="http://github.com/rohman-zhu/posts/55f10baf/index.html">
<meta property="og:site_name" content="诺曼实验室">
<meta property="og:description" content="前言因为ConstraintLayout这个布局是安卓的新特性,所以在此就学习一下.这里转自网上的一篇文章,把基本的东西都讲到了,感觉还是不错的. 正文　　本篇文章的主题是ConstraintLayout。其实ConstraintLayout是Android Studio 2.2中主要的新增功能之一，也是Google在去年的I&#x2F;O大会上重点宣传的一个功能。我们都知道，在传统的Androi">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175356264.gif">
<meta property="og:image" content="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175357269.gif">
<meta property="og:image" content="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175357273.png">
<meta property="og:image" content="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175357217.gif">
<meta property="og:image" content="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175357404.gif">
<meta property="og:image" content="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175358652.gif">
<meta property="og:image" content="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175358976.gif">
<meta property="og:image" content="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175358962.gif">
<meta property="og:image" content="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175358912.png">
<meta property="og:image" content="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175359745.png">
<meta property="og:image" content="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175359431.png">
<meta property="og:image" content="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175359810.gif">
<meta property="og:image" content="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175359805.gif">
<meta property="og:image" content="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175400110.png">
<meta property="og:image" content="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175400860.png">
<meta property="og:image" content="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175400253.png">
<meta property="og:image" content="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175400124.gif">
<meta property="og:image" content="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175401772.gif">
<meta property="og:image" content="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175401539.png">
<meta property="og:image" content="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175401448.gif">
<meta property="og:image" content="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175402417.gif">
<meta property="og:image" content="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175402878.png">
<meta property="og:image" content="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175402399.gif">
<meta property="og:image" content="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175402126.gif">
<meta property="og:image" content="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175403533.png">
<meta property="og:image" content="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175403858.gif">
<meta property="og:image" content="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175403263.png">
<meta property="article:published_time" content="2017-07-06T11:43:48.000Z">
<meta property="article:modified_time" content="2024-12-22T05:27:47.637Z">
<meta property="article:author" content="Rohman.Zhu">
<meta property="article:tag" content="Android">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175356264.gif">


<link rel="canonical" href="http://github.com/rohman-zhu/posts/55f10baf/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh_cn","comments":true,"permalink":"http://github.com/rohman-zhu/posts/55f10baf/","path":"posts/55f10baf/","title":"Android ConstraintLayout解析"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Android ConstraintLayout解析 | 诺曼实验室</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="stylesheet" href="/css/prism.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">诺曼实验室</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-number">1.</span> <span class="nav-text">前言</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%AD%A3%E6%96%87"><span class="nav-number">2.</span> <span class="nav-text">正文</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BC%80%E5%A7%8B"><span class="nav-number">2.1.</span> <span class="nav-text">开始</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C"><span class="nav-number">2.2.</span> <span class="nav-text">基本操作</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Inspector"><span class="nav-number">2.3.</span> <span class="nav-text">Inspector</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Rohman.Zhu</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">439</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">44</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">145</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh_cn">
    <link itemprop="mainEntityOfPage" href="http://github.com/rohman-zhu/posts/55f10baf/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rohman.Zhu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="诺曼实验室">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Android ConstraintLayout解析 | 诺曼实验室">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Android ConstraintLayout解析
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2017-07-06 11:43:48" itemprop="dateCreated datePublished" datetime="2017-07-06T11:43:48+00:00">2017-07-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-12-22 05:27:47" itemprop="dateModified" datetime="2024-12-22T05:27:47+00:00">2024-12-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Android/" itemprop="url" rel="index"><span itemprop="name">Android</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>因为ConstraintLayout这个布局是安卓的新特性,所以在此就学习一下.这里转自网上的一篇文章,把基本的东西都讲到了,感觉还是不错的.</p>
<h1 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h1><p>　　本篇文章的主题是ConstraintLayout。其实ConstraintLayout是Android Studio 2.2中主要的新增功能之一，也是Google在去年的I&#x2F;O大会上重点宣传的一个功能。我们都知道，在传统的Android开发当中，界面基本都是靠编写XML代码完成的，虽然Android Studio也支持可视化的方式来编写界面，但是操作起来并不方便，我也一直都不推荐使用可视化的方式来编写Android应用程序的界面。</p>
<p>　　而ConstraintLayout就是为了解决这一现状而出现的。它和传统编写界面的方式恰恰相反，ConstraintLayout非常适合使用可视化的方式来编写界面，但并不太适合使用XML的方式来进行编写。当然，可视化操作的背后仍然还是使用的XML代码来实现的，只不过这些代码是由Android Studio根据我们的操作自动生成的。</p>
<p>　　另外，ConstraintLayout还有一个优点，它可以有效地解决布局嵌套过多的问题。我们平时编写界面，复杂的布局总会伴随着多层的嵌套，而嵌套越多，程序的性能也就越差。ConstraintLayout则是使用约束的方式来指定各个控件的位置和关系的，它有点类似于RelativeLayout，但远比RelativeLayout要更强大。</p>
<p>　　其实ConstraintLayout属于Android Studio 2.2的新特性，我在去年写《第二行代码》的时候就非常想要将这部分内容加入到新书里面，但是在尝试之后还是放弃了。因为ConstraintLayout的用法很多都是对控件进行拖拽，只用文字或者是一些静态图片实在太难将它的用法表达清楚了，因此不太适合写到书上。我当时的想法就是在博客上面写一篇ConstraintLayout的用法讲解，来弥补一下《第二行代码》中缺失的这部分新特性，那么今天这篇文章来了。</p>
<h2 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h2><p>　　下面我们开始用边学边练的方式来进行学习，首先打开你的Android Studio，并新建一个ConstraintLayoutTest项目。另外，确保你的Android Studio是2.2或以上版本。<br>　　为了要使用ConstraintLayout，我们需要在app&#x2F;build.gradle文件中添加ConstraintLayout的依赖，如下所示。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">　　dependencies &#123;</span><br><span class="line">　  compile &#x27;com.android.support.constraint:constraint-layout:1.0.2&#x27;</span><br><span class="line">　　&#125;</span><br></pre></td></tr></table></figure>

<p>　　目前ConstraintLayout库最新的版本是1.0.2.</p>
<p>　　在目前的Android Studio 2.3中默认布局就是ConstraintLayout的</p>
<p>　　我们可以看到，现在主操作区域内有两个类似于手机屏幕的界面，左边的是预览界面，右边的是蓝图界面。这两部分都可以用于进行布局编辑工作，区别是左边部分主要用于预览最终的界面效果，右边部分主要用于观察界面内各个控件的约束情况。</p>
<p><img src="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175356264.gif" alt="ConstraintLayout转化"></p>
<h2 id="基本操作"><a href="#基本操作" class="headerlink" title="基本操作"></a>基本操作</h2><p>　　下面我们来学习一些具体的操作吧，ConstraintLayout的基本用法很简单，比如我们想要向布局中添加一个按钮，那么只需要从左侧的Palette区域拖一个Button进去就可以了，如下图所示。<br>　　<br><img src="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175357269.gif" alt="添加按钮"></p>
<p>　　虽说现在Button已经添加到界面上了，但是由于我们还没有给Button添加任何的约束，因此Button并不知道自己应该出现在什么位置。现在我们在预览界面上看到的Button位置并不是它最终运行后的实际位置，如果一个控件没有添加任何约束的话，它在运行之后会自动位于界面的左上角。</p>
<p>　　那么下面我们就来给Button添加约束，每个控件的约束都分为垂直和水平两类，一共可以在四个方向上给控件添加约束，如下图所示。<br><img src="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175357273.png" alt="按钮约束">　　</p>
<p>　　上图中Button的上下左右各有一个圆圈，这圆圈就是用来添加约束的，我们可以将约束添加到ConstraintLayout，也可以将约束添加到另一个控件。比如说，想让Button位于布局的右下角，就可以这样添加约束，如下图所示。<br>　　<br><img src="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175357217.gif" alt="添加约束"></p>
<p>　　我们给Button的右边和下边添加了约束，因此Button就会将自己定位到布局的右下角了。类似地，如果我们想要让Button居中显示，那么就需要给它的上下左右都添加约束，如下图所示。<br><img src="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175357404.gif" alt="添加约束">
　　</p>
<p>　　这就是添加约束最基本的用法了。</p>
<p>　　除此之外，我们还可以使用约束让一个控件相对于另一个控件进行定位。比如说，我们希望再添加一个Button，让它位于第一个Button的正下方，并且间距64dp，那么操作如下所示。<br>　　<br><img src="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175358652.gif" alt="给控件进行定位"></p>
<p>　　现在添加约束的方式我们已经学完了，那么该怎样删除约束呢?其实也很简单，删除约束的方式一共有三种，第一种用于删除一个单独的约束，将鼠标悬浮在某个约束的圆圈上，然后该圆圈会变成红色，这个时候单击一下就能删除了，如下图所示。<br>　　<br><img src="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175358976.gif" alt="删除约束一"></p>
<p>　　第二种用于删除某一个控件的所有约束，选中一个控件，然后它的左下角会出现一个删除约束的图标，点击该图标就能删除当前控件的所有约束了，如下所示。</p>
<p><img src="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175358962.gif" alt="删除约束二">　　</p>
<p>　　第三种用于删除当前界面中的所有约束，点击工具栏中的删除约束图标即可，如下图所示。<br>　　<br><img src="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175358912.png" alt="删除约束三"></p>
<h2 id="Inspector"><a href="#Inspector" class="headerlink" title="Inspector"></a>Inspector</h2><p>　　这样我们就把ConstraintLayout的基本用法学完了，接下来我们开始学习一些进阶的内容。</p>
<p>　　当你选中任意一个控件的时候，在右侧的Properties区域就会出现很多的属性选项，如下图所示。<br>　　<br><img src="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175359745.png" alt="检查员"></p>
<p>　　在这里我们就可以设置当前控件的所有属性，如文本内容、颜色、点击事件等等。这些功能都非常简单，我就不再进行详细介绍，大家自己点一点就会操作了。</p>
<p>　　需要我们重点掌握的是Properties区域的上半部分，这部分也被称为Inspector。<br><img src="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175359431.png" alt="属性">
　　</p>
<p>　　首先可以看到，在Inspector中有一个纵向的轴和一个横向的轴，这两个轴也是用于确定控件的位置的。我们刚才给Button的上下左右各添加了一个约束，然后Button就能居中显示了，其实就是因为这里纵横轴的值都是50。如果调整了纵横轴的比例，那么Button的位置也会随之改变，如下图所示。<br>　　<br><img src="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175359810.gif" alt="Button位置"></p>
<p>　　不过，虽然我们将横轴的值拖动到了100，但是Button并没有紧贴到布局的最右侧，这是为什么呢?实际上，Android Studio给控件的每个方向上的约束都默认添加了一个16dp的间距，从Inspector上面也可以明显地看出来这些间距的值。如果这些默认值并不是你想要的，可以直接在Inspector上进行修改，如下图所示：<br><img src="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175359805.gif" alt="贴紧边缘">　　</p>
<p>　　可以看到，修改成0之后Button右侧的间距就没了。<br>　　接下来我们再来学习一下位于Inspector最中间的那个正方形区域，它是用来控制控件大小的。一共有三种模式可选，每种模式都使用了一种不同的符号表示，点击符号即可进行切换。<br><img src="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175400110.png" alt="wrap_content"></p>
<p>　　表示wrap content，这个我们很熟悉了，不需要进行什么解释。<br><img src="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175400860.png" alt="固定值">　　</p>
<p>　　表示固定值，也就是给控件指定了一个固定的长度或者宽度值。<br>　　<br><img src="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175400253.png" alt="any_size"></p>
<p>　　表示any size，它有点类似于match parent，但和match parent并不一样，是属于ConstraintLayout中特有的一种大小控制方式，下面我们来重点讲解一下。</p>
<p>　　首先需要说明，在ConstraintLayout中是有match parent的，只不过用的比较少，因为ConstraintLayout的一大特点就是为了解决布局嵌套，既然没有了布局嵌套，那么match parent也就没有多大意义了。</p>
<p>　　而any size就是用于在ConstraintLayout中顶替match parent的，先看一下我们怎样使用any size实现和match parent同样的效果吧。比如说我想让Button的宽度充满整个布局，操作如下图所示。<br><img src="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175400124.gif" alt="any_size">　　</p>
<p>　　可以看到，我们将Button的宽度指定成any size，它就会自动充满整个布局了。当然还要记得将Button左侧的间距设置成0才行。</p>
<p>　　那有的朋友可能会问了，这和match parent有什么区别呢?其实最大的区别在于，match parent是用于填充满当前控件的父布局，而any size是用于填充满当前控件的约束规则。举个例子更好理解，如果我们有一个新的Button，它的其中一个约束是添加到当前这个Button上的，那么any size的效果也会发生改变，如下图所示。<br><img src="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175401772.gif" alt="any_size">　　</p>
<p>　　通过上图的演示，相信你已经很好地理解any size的作用了。<br>##　　Guidelines ##</p>
<p>　　现在你已经对ConstraintLayout比较熟悉，并且能使用ConstraintLayout来编写一些简单的界面了。不过目前有一个问题可能还比较头疼，刚才我们已经实现了让一个按钮居中对齐的功能，如果我们想让两个按钮共同居中对齐该怎么实现呢?</p>
<p>　　其实这个需求很常见，比如说在应用的登录界面，都会有一个登录按钮和一个注册按钮，不管它们是水平居中也好还是垂直居中也好，但肯定都是两个按钮共同居中的。</p>
<p>　　想要实现这个功能，仅仅用我们刚刚学的那些知识是不够的，这需要用到ConstraintLayout中的一个新的功能，Guidelines。</p>
<p>　　下面我们还是通过实际操作来学习一下Guidelines的用法吧。比如现在已经向界面中添加了登录和注册这两个按钮，如下图所示。<br>　　<br><img src="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175401539.png" alt="两个按钮"></p>
<p>　　然后我们希望让这两个按钮在水平方向上居中显示，在垂直方向上都距离底部64dp，那么就需要先添加一个垂直方向上的Guideline，如下图所示。<br>　　<br><img src="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175401448.gif" alt="垂直方向"></p>
<p>　　我来对上图中的操作进行一下解释。首先点击通知栏中的Guidelines图标可以添加一个垂直或水平方向上的Guideline，这里我们需要的是垂直方向上的。而Guideline默认是使用的dp尺，我们需要选中Guideline，并点击一下最上面的箭头图标将它改成百比分尺，然后将垂直方向上的Guideline调整到50%的位置，这样就将准备工作做好了。</p>
<p>　　接下来我们开始实现让两个按钮在水平方向上居中显示，并距离底部64dp的功能，如下图所示。<br>　　<br><img src="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175402417.gif" alt="增加64dp"></p>
<p>　　可以看到，我们给登录按钮的右边向Guideline添加约束，登录按钮的下面向底部添加约束，并拖动按钮让它距离底部64dp。然后给注册按钮的左边向Guideline添加约束，注册按钮的下面向登录按钮的下面添加约束。这样就实现了让两个按钮在水平方向上居中显示，在垂直方向上都距离底部64dp的功能了。<br>##　　自动添加约束 ##<br>　　不过如果界面中的内容变得复杂起来，给每个控件一个个地添加约束也是一件很繁琐的事情。为此，ConstraintLayout中支持自动添加约束的功能，可以极大程度上简化那些繁琐的操作。</p>
<p>　　自动添加约束的方式主要有两种，一种叫Autoconnect，一种叫Inference，我们先来看第一种。</p>
<p>　　想要使用Autoconnect，首先需要在工具栏中将这个功能启用，默认情况下Autoconnect是不启用的，如下图所示。<br><img src="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175402878.png" alt="Autoconnect"></p>
<p>　　Autoconnect可以根据我们拖放控件的状态自动判断应该如何添加约束，比如我们将Button放到界面的正中央，那么它的上下左右都会自动地添加上约束，如下图所示。<br><img src="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175402399.gif" alt="自动约束">
　　</p>
<p>　　然后我们在这个Button的下方再放置一个Button，效果如下。<br><img src="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175402126.gif" alt="Autoconnect"></p>
<p>　　可以看到，只需要将Button拖放到界面上，Autoconnect会判断我们的意图，并自动给控件添加约束。不过Autoconnect是无法保证百分百准确判断出我们的意图的，如果自动添加的约束并不是你想要的话，还可以在任何时候进行手动修改。总之，可以把它当成一个辅助工具，但不能完全靠它去添加控件的约束。<br>　　以上是Autoconnect的用法，接下来我们看一下Inference的用法。Inference也是用于自动添加约束的，但它比Autoconnect的功能要更为强大，因为AutoConnect只能给当前操作的控件自动添加约束，而Inference会给当前界面中的所有元素自动添加约束。因而Inference比较适合用来实现复杂度比较高的界面，它可以一键自动生成所有的约束。<br>　　下面我们就通过一个例子来演示一下Inference的用法，比如界面上现在有两个TextView，两个EditText，和两个Button，如下图所示。<br>　　<br><img src="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175403533.png" alt="Autoconnect"></p>
<p>　　接下来我们先将各个控件按照界面设计的位置进行摆放，摆放完成之后点击一下工具栏上的Infer Constraints按钮，就能为所有控件自动添加约束了，如下图所示。<br>　　<br><img src="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175403858.gif" alt="Autoconnect"><br>　　现在运行一下程序，最终效果如下图所示：<br>　　<br><img src="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175403263.png" alt="运行效果"></p>
<p>　　</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Android/" rel="tag"># Android</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/posts/b348c678/" rel="prev" title="NE555-呼吸灯">
                  <i class="fa fa-angle-left"></i> NE555-呼吸灯
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/posts/b6b408f/" rel="next" title="宿舍书桌照明系统改造">
                  宿舍书桌照明系统改造 <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Rohman.Zhu</span>
  </div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  






  





</body>
</html>
