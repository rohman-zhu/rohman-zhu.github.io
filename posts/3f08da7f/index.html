<!DOCTYPE html>
<html lang="zh_cn">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha256-5eIC48iZUHmSlSUz9XtjRyK2mzQkHScZY1WdMaoz74E=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"github.com","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.21.1","exturl":false,"sidebar":{"position":"right","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="前言写笔记前先扯一下蛋,明天(2017-06-29 14:00 信息楼103)要参加A+认证考试.而到现在为止,本人还没有看多少题.本人最近都是在根据题库做一个背题的APP,就当作练练手.从上星期六(2017-06-26)立项到现在,历时4天,终于弄出了以下玩意:  用到了一下几个控件: ViewPager(主要)viewpager用的适配器: FragmentAdapter DrawerLayo">
<meta property="og:type" content="article">
<meta property="og:title" content="有关Fragment的相关问题">
<meta property="og:url" content="http://github.com/rohman-zhu/posts/3f08da7f/index.html">
<meta property="og:site_name" content="诺曼实验室">
<meta property="og:description" content="前言写笔记前先扯一下蛋,明天(2017-06-29 14:00 信息楼103)要参加A+认证考试.而到现在为止,本人还没有看多少题.本人最近都是在根据题库做一个背题的APP,就当作练练手.从上星期六(2017-06-26)立项到现在,历时4天,终于弄出了以下玩意:  用到了一下几个控件: ViewPager(主要)viewpager用的适配器: FragmentAdapter DrawerLayo">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://github.com/sourc/images/20170628_mainpager.png">
<meta property="og:image" content="http://github.com/sourc/images/20170628_testPager.png">
<meta property="og:image" content="http://github.com/images/20170628_rememberPager.jpeg">
<meta property="og:image" content="http://github.com/images/20170628_recordPager.jpeg">
<meta property="og:image" content="http://img.my.csdn.net/uploads/201211/29/1354170699_6619.png">
<meta property="article:published_time" content="2017-06-28T12:26:18.000Z">
<meta property="article:modified_time" content="2024-12-22T05:27:49.304Z">
<meta property="article:author" content="Rohman.Zhu">
<meta property="article:tag" content="Android">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://github.com/sourc/images/20170628_mainpager.png">


<link rel="canonical" href="http://github.com/rohman-zhu/posts/3f08da7f/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh_cn","comments":true,"permalink":"http://github.com/rohman-zhu/posts/3f08da7f/","path":"posts/3f08da7f/","title":"有关Fragment的相关问题"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>有关Fragment的相关问题 | 诺曼实验室</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="stylesheet" href="/css/prism.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">诺曼实验室</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-number">1.</span> <span class="nav-text">前言</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%94%A8%E5%88%B0%E4%BA%86%E4%B8%80%E4%B8%8B%E5%87%A0%E4%B8%AA%E6%8E%A7%E4%BB%B6"><span class="nav-number">1.0.1.</span> <span class="nav-text">用到了一下几个控件:</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#viewpager%E7%94%A8%E7%9A%84%E9%80%82%E9%85%8D%E5%99%A8-FragmentAdapter"><span class="nav-number">1.0.1.1.</span> <span class="nav-text">viewpager用的适配器: FragmentAdapter</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#APP%E6%9E%84%E6%80%9D"><span class="nav-number">1.0.2.</span> <span class="nav-text">APP构思</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%87%BA%E7%8E%B0%E5%A4%A7%E7%9A%84%E9%97%AE%E9%A2%98"><span class="nav-number">1.0.3.</span> <span class="nav-text">出现大的问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95"><span class="nav-number">1.0.4.</span> <span class="nav-text">解决方法</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%AD%A3%E6%96%87"><span class="nav-number">2.</span> <span class="nav-text">正文</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Fragment"><span class="nav-number">2.1.</span> <span class="nav-text">Fragment</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%80-%E4%BB%80%E4%B9%88%E6%98%AFFragment"><span class="nav-number">2.1.1.</span> <span class="nav-text">一.什么是Fragment</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BA%8C-%E4%BD%BF%E7%94%A8Fragment-%E5%8A%A0%E8%BD%BDFragment"><span class="nav-number">2.1.2.</span> <span class="nav-text">二.使用Fragment(加载Fragment)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%96%B9%E6%B3%95%E4%B8%80-%E9%9D%99%E6%80%81%E6%B7%BB%E5%8A%A0"><span class="nav-number">2.1.2.1.</span> <span class="nav-text">方法一: 静态添加</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%96%B9%E6%B3%95%E4%BA%8C-%E5%8A%A8%E6%80%81%E6%B7%BB%E5%8A%A0"><span class="nav-number">2.1.2.2.</span> <span class="nav-text">方法二 : 动态添加</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B0%8F%E7%BB%93"><span class="nav-number">2.1.3.</span> <span class="nav-text">小结</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%B3%E4%BA%8E%E5%9B%9E%E9%80%80%E6%A0%88"><span class="nav-number">2.1.4.</span> <span class="nav-text">关于回退栈</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ViewPager"><span class="nav-number">2.2.</span> <span class="nav-text">ViewPager</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#FragmentAdapter"><span class="nav-number">2.2.1.</span> <span class="nav-text">FragmentAdapter</span></a></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Rohman.Zhu</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">462</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">42</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">152</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh_cn">
    <link itemprop="mainEntityOfPage" href="http://github.com/rohman-zhu/posts/3f08da7f/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rohman.Zhu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="诺曼实验室">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="有关Fragment的相关问题 | 诺曼实验室">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          有关Fragment的相关问题
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2017-06-28 12:26:18" itemprop="dateCreated datePublished" datetime="2017-06-28T12:26:18+00:00">2017-06-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-12-22 05:27:49" itemprop="dateModified" datetime="2024-12-22T05:27:49+00:00">2024-12-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Android/" itemprop="url" rel="index"><span itemprop="name">Android</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>写笔记前先扯一下蛋,明天(2017-06-29 14:00 信息楼103)要参加A+认证考试.而到现在为止,本人还没有看多少题.本人最近都是在根据题库做一个背题的APP,就当作练练手.从上星期六(2017-06-26)立项到现在,历时4天,终于弄出了以下玩意:</p>
<p><img src="/sourc/images/20170628_mainpager.png" alt="img"><br><img src="/sourc/images/20170628_testPager.png" alt="img"><br><img src="/images/20170628_rememberPager.jpeg" alt="img"><br><img src="/images/20170628_recordPager.jpeg" alt="img"></p>
<h3 id="用到了一下几个控件"><a href="#用到了一下几个控件" class="headerlink" title="用到了一下几个控件:"></a>用到了一下几个控件:</h3><ul>
<li>ViewPager(主要)<h4 id="viewpager用的适配器-FragmentAdapter"><a href="#viewpager用的适配器-FragmentAdapter" class="headerlink" title="viewpager用的适配器: FragmentAdapter"></a>viewpager用的适配器: FragmentAdapter</h4></li>
<li>DrawerLayout</li>
<li>CheckBox</li>
<li>Button</li>
<li>ListView</li>
</ul>
<h3 id="APP构思"><a href="#APP构思" class="headerlink" title="APP构思"></a>APP构思</h3><ol>
<li>编码题库TXT文件 txt -&gt; xml</li>
<li>解析题库XML文件 xml -&gt; 题目类</li>
<li>编辑题目类,有 题号&#x2F;题目内容&#x2F;选项A内容&#x2F;选项B内容&#x2F;选项C内容&#x2F;选项D内容&#x2F;正确答案,一个类共7个项内容,并且设置相应的操作函数.</li>
<li>加载题库数据到Viewpager…</li>
</ol>
<p>最终实现流程:<br>编码XML -&gt; 解析XML -&gt; 封装类到集合 -&gt; 根据集合封装Fragment -&gt; 给Viewpager设置适配器</p>
<h3 id="出现大的问题"><a href="#出现大的问题" class="headerlink" title="出现大的问题"></a>出现大的问题</h3><ol>
<li>因为本APP有三种模式,其中错题模式的页面内容是跟另外两个模式不一样的,适配器的数据(Fragment集需要更变)更变后,页面没变化.</li>
<li>在 <em>测试模式</em> 和 <em>背题模式</em> 中,不同的是Fragment中的题目答案是否有显示,而在页面中要让一个TextView显示,Fragment必须是要加载到Activity中,未加载的Fragment是不能设置TextView显示.</li>
</ol>
<h3 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h3><ol>
<li>留到下文再写.</li>
<li>在每一个题目的Fragment中设置一个用于表示 <em>是否显示参数</em> (boolean isVisible),如果要显示则,通过fragment集合获取指定的fragment的这个参数(isVisible),设置为 <em>true</em> ;然后在onCreateView()中加入这段逻辑:<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TestViewAnswer.setVisibility(isVisible);</span><br></pre></td></tr></table></figure></li>
</ol>
<h1 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h1><p>话说回来,因为我用到的Viewpager控件采用的是FragmentAdapter这个适配器,因此用的是有关Fragment的相关内容.</p>
<h2 id="Fragment"><a href="#Fragment" class="headerlink" title="Fragment"></a>Fragment</h2><h3 id="一-什么是Fragment"><a href="#一-什么是Fragment" class="headerlink" title="一.什么是Fragment"></a>一.什么是Fragment</h3><p>Fragment是一个类似Activity组件,跟Activity一样的也有生命周期.<br><img src="http://img.my.csdn.net/uploads/201211/29/1354170699_6619.png" alt="Fragment生命周期"></p>
<p>由图中可以看到,Fragment被加载的时候,会多一个onCreateView方法.而且每一次再加载的时候都是调用onCreateView方法.</p>
<h3 id="二-使用Fragment-加载Fragment"><a href="#二-使用Fragment-加载Fragment" class="headerlink" title="二.使用Fragment(加载Fragment)"></a>二.使用Fragment(加载Fragment)</h3><h4 id="方法一-静态添加"><a href="#方法一-静态添加" class="headerlink" title="方法一: 静态添加"></a>方法一: 静态添加</h4><p>这个方法其实跟自定义控件一样,需要java文件与xml布局文件.</p>
<ol>
<li><p>正常设置布局</p>
</li>
<li><p>编写java文件 ,类继承自Fragment,并重写以对应的方法.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@Override  </span><br><span class="line">   public View onCreateView(LayoutInflater inflater, ViewGroup container,  </span><br><span class="line">           Bundle savedInstanceState)  </span><br><span class="line">   &#123;  </span><br><span class="line">       return inflater.inflate(R.layout.fragment_content, container, false);  </span><br><span class="line">       //这里相当于加载了fragment的布局文件</span><br><span class="line">   &#125;  </span><br></pre></td></tr></table></figure></li>
<li><p>在MainActivity中也需要编写两个文件,只需编写布局文件就好了</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//这里是MainActivity的布局文件</span><br><span class="line">&lt;fragment</span><br><span class="line">    android:id=&quot;@+id/id_fragment_content&quot;  </span><br><span class="line">    android:name=&quot;fragment放置的包名&quot;  </span><br><span class="line">    android:layout_width=&quot;fill_parent&quot;  </span><br><span class="line">    android:layout_height=&quot;fill_parent&quot; /&gt;  </span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="方法二-动态添加"><a href="#方法二-动态添加" class="headerlink" title="方法二 : 动态添加"></a>方法二 : 动态添加</h4><p>这个方法是通过 FragmentManager的一个事务对象来实现的 ( <em>FragmentTransaction</em> ),常用方法有add,remove,replace, 最后都要用commit方法提交.</p>
<ol>
<li><p>replace()</p>
<ul>
<li>这里需要设置两个参数(被替换的布局文件id,将要替换的fragment);</li>
<li>设置完后提交,FragmentTransaction.commit();</li>
</ul>
</li>
</ol>
<h3 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h3><p>Fragment常用的三个类：</p>
<ul>
<li>android.app.Fragment 主要用于定义Fragment</li>
<li>android.app.FragmentManager 主要用于在Activity中操作Fragment</li>
<li>android.app.FragmentTransaction 保证一些列Fragment操作的原子性，熟悉事务这个词，一定能明白~</li>
</ul>
<hr>
<ul>
<li><p>获取FragmentManager的方法是getFragmentManager(),而在v4中是用getSupportFragmentManager();</p>
</li>
<li><p>操作事务的对象是 FragmentManager.beginTransaction();</p>
</li>
<li><p>transaction.add() ;往Activity中添加一个Fragment</p>
</li>
<li><p>transaction.remove() ; 从Activity中移除一个Fragment，如果被移除的Fragment没有添加到回退栈（回退栈后面会详细说），这个Fragment实例将会被销毁。</p>
</li>
<li><p>transaction.replace()<br>使用另一个Fragment替换当前的，实际上就是remove()然后add()的合体</p>
</li>
<li><p>transaction.hide()<br>隐藏当前的Fragment，仅仅是设为不可见，并不会销毁</p>
</li>
<li><p>transaction.show()<br>显示之前隐藏的Fragment</p>
</li>
<li><p>detach()<br>会将view从UI中移除,和remove()不同,此时fragment的状态依然由FragmentManager维护。</p>
</li>
<li><p>attach()<br>重建view视图，附加到UI上并显示。</p>
</li>
<li><p>transatcion.commit()&#x2F;&#x2F;提交一个事务</p>
</li>
<li><p>注意：常用Fragment的哥们，可能会经常遇到这样Activity状态不一致：State loss这样的错误。主要是因为：commit方法一定要在Activity.onSaveInstance()之前调用。</p>
</li>
<li><p>a、比如：我在FragmentA中的EditText填了一些数据，当切换到FragmentB时，如果希望会到A还能看到数据，则适合你的就是hide和show；也就是说，希望保留用户操作的面板，你可以使用hide和show，当然了不要使劲在那new实例，进行下非null判断。</p>
</li>
<li><p>b、再比如：我不希望保留用户操作，你可以使用remove()，然后add()；或者使用replace()这个和remove,add是相同的效果。</p>
</li>
<li><p>c、remove和detach有一点细微的区别，在不考虑回退栈的情况下，remove会销毁整个Fragment实例，而detach则只是销毁其视图结构，实例并不会被销毁。那么二者怎么取舍使用呢？如果你的当前Activity一直存在，那么在不希望保留用户操作的时候，你可以优先使用detach。</p>
</li>
</ul>
<h3 id="关于回退栈"><a href="#关于回退栈" class="headerlink" title="关于回退栈"></a>关于回退栈</h3><ul>
<li>如果不添加事务到回退栈，前一个Fragment实例会被销毁。这里很明显，我们调用tx.addToBackStack(null);将当前的事务添加到了回退栈，所以FragmentOne实例不会被销毁，但是视图层次依然会被销毁，即会调用onDestoryView和onCreateView.</li>
</ul>
<h2 id="ViewPager"><a href="#ViewPager" class="headerlink" title="ViewPager"></a>ViewPager</h2><p>我用的是FragmentAdapter,也就是说,这个Viewpager里面放的是Fragment,这个控件会在当前页中,预先加载position - 1 页 和 position + 1页.</p>
<h3 id="FragmentAdapter"><a href="#FragmentAdapter" class="headerlink" title="FragmentAdapter"></a>FragmentAdapter</h3><ul>
<li>构造函数中必须需要传入一个FragmentManager参数.</li>
<li>将显示的页面,需要传入一个Fragment集合</li>
</ul>
<hr>
<p>方法说明:</p>
<ul>
<li>public Fragment getItem()</li>
</ul>
<ol>
<li>该类中新增的一个虚函数。函数的目的为生成新的 Fragment 对象。重载该函数时需要注意这一点。在需要时，该函数将被 instantiateItem() 所调用。</li>
<li>如果需要向 Fragment 对象传递相对静态的数据时，我们一般通过 Fragment.setArguments() 来进行，这部分代码应当放到 getItem()。它们只会在新生成 Fragment 对象时执行一遍。</li>
<li>如果需要在生成 Fragment 对象后，将数据集里面一些动态的数据传递给该 Fragment，那么，这部分代码不适合放到 getItem() 中。因为当数据集发生变化时，往往对应的 Fragment 已经生成，如果传递数据部分代码放到了 getItem() 中，这部分代码将不会被调用。这也是为什么很多人发现调用 PagerAdapter.notifyDataSetChanged() 后，getItem() 没有被调用的一个原因。</li>
</ol>
<ul>
<li><p>public Object instantiateItem()</p>
<p>  在每次 ViewPager 需要一个用以显示的 Object 的时候，该函数都会被 ViewPager.addNewItem() 调用。</p>
</li>
</ul>
<ol>
<li>函数中判断一下要生成的 Fragment 是否已经生成过了，如果生成过了，就使用旧的，旧的将被 Fragment.attach()；如果没有，就调用 getItem() 生成一个新的，新的对象将被 FragmentTransation.add()。</li>
<li>FragmentPagerAdapter 会将所有生成的 Fragment 对象通过 FragmentManager 保存起来备用，以后需要该 Fragment 时，都会从 FragmentManager 读取，而不会再次调用 getItem() 方法。</li>
<li>如果需要在生成 Fragment 对象后，将数据集中的一些数据传递给该 Fragment，这部分代码应该放到这个函数的重载里。在我们继承的子类中，重载该函数，并调用 FragmentPagerAdapter.instantiateItem() 取得该函数返回 Fragment 对象，然后，我们该 Fragment 对象中对应的方法，将数据传递过去，然后返回该对象。</li>
<li>否则，如果将这部分传递数据的代码放到 getItem()中，在 PagerAdapter.notifyDataSetChanged() 后，这部分数据设置代码将不会被调用。</li>
</ol>
<ul>
<li><p>public void notifyDataSetChanged()</p>
<p>  在数据集发生变化的时候，一般 Activity 会调用 PagerAdapter.notifyDataSetChanged()，以通知 PagerAdapter，而 PagerAdapter 则会通知在自己这里注册过的所有 DataSetObserver。其中之一就是在 ViewPager.setAdapter() 中注册过的 PageObserver。PageObserver 则进而调用 ViewPager.dataSetChanged()，从而导致 ViewPager 开始触发更新其内含 View 的操作。</p>
</li>
</ul>
<p>参考资料:<a href=http://m.blog.csdn.net/shaoyezhangliwei/article/details/52488179>CSDN</a></p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Android/" rel="tag"># Android</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/posts/8ec7caa0/" rel="prev" title="安卓自定义控件学习笔记">
                  <i class="fa fa-angle-left"></i> 安卓自定义控件学习笔记
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/posts/ce024141/" rel="next" title="在MAC的VirtualBox中编写单片机程序">
                  在MAC的VirtualBox中编写单片机程序 <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Rohman.Zhu</span>
  </div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  

  <script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":"light","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mermaid/11.4.0/mermaid.min.js","integrity":"sha256-G8ouPAnw4zzMbnAenHnVz6h9XpKbNdOkrqTh7AadyHs="}}</script>
  <script src="/js/third-party/tags/mermaid.js"></script>





  





</body>
</html>
