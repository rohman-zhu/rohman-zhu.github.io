<!DOCTYPE html>
<html lang="zh_cn">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha256-5eIC48iZUHmSlSUz9XtjRyK2mzQkHScZY1WdMaoz74E=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"github.com","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.21.1","exturl":false,"sidebar":{"position":"right","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

    <meta property="og:type" content="website">
<meta property="og:title" content="诺曼实验室">
<meta property="og:url" content="http://github.com/rohman-zhu/page/35/index.html">
<meta property="og:site_name" content="诺曼实验室">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Rohman.Zhu">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://github.com/rohman-zhu/page/35/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh_cn","comments":"","permalink":"","path":"page/35/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>诺曼实验室</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="stylesheet" href="/css/prism.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">诺曼实验室</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Rohman.Zhu</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">455</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">40</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">150</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://github.com/rohman-zhu/posts/ae144054/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rohman.Zhu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="诺曼实验室">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 诺曼实验室">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/ae144054/" class="post-title-link" itemprop="url">httpd.conf.error</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2018-11-23 00:12:04" itemprop="dateCreated datePublished" datetime="2018-11-23T00:12:04+00:00">2018-11-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-12-22 05:27:49" itemprop="dateModified" datetime="2024-12-22T05:27:49+00:00">2024-12-22</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br></pre></td><td class="code"><pre><span class="line">#</span><br><span class="line"># This is the main Apache HTTP server configuration file.  It contains the</span><br><span class="line"># configuration directives that give the server its instructions.</span><br><span class="line"># See &lt;URL:http://httpd.apache.org/docs/2.2&gt; for detailed information.</span><br><span class="line"># In particular, see </span><br><span class="line"># &lt;URL:http://httpd.apache.org/docs/2.2/mod/directives.html&gt;</span><br><span class="line"># for a discussion of each configuration directive.</span><br><span class="line">#</span><br><span class="line"># Do NOT simply read the instructions in here without understanding</span><br><span class="line"># what they do.  They&#x27;re here only as hints or reminders.  If you are unsure</span><br><span class="line"># consult the online docs. You have been warned.  </span><br><span class="line">#</span><br><span class="line"># Configuration and logfile names: If the filenames you specify for many</span><br><span class="line"># of the server&#x27;s control files begin with &quot;/&quot; (or &quot;drive:/&quot; for Win32), the</span><br><span class="line"># server will use that explicit path.  If the filenames do *not* begin</span><br><span class="line"># with &quot;/&quot;, the value of ServerRoot is prepended -- so &#x27;log/access_log&#x27;</span><br><span class="line"># with ServerRoot set to &#x27;/www&#x27; will be interpreted by the</span><br><span class="line"># server as &#x27;/www/log/access_log&#x27;, where as &#x27;/log/access_log&#x27; will be</span><br><span class="line"># interpreted as &#x27;/log/access_log&#x27;.</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># ServerRoot: The top of the directory tree under which the server&#x27;s</span><br><span class="line"># configuration, error, and log files are kept.</span><br><span class="line">#</span><br><span class="line"># Do not add a slash at the end of the directory path.  If you point</span><br><span class="line"># ServerRoot at a non-local disk, be sure to point the LockFile directive</span><br><span class="line"># at a local disk.  If you wish to share the same ServerRoot for multiple</span><br><span class="line"># httpd daemons, you will need to change at least LockFile and PidFile.</span><br><span class="line">#</span><br><span class="line">ServerRoot &quot;/usr/local/httpd-2.2.24&quot;</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># Listen: Allows you to bind Apache to specific IP addresses and/or</span><br><span class="line"># ports, instead of the default. See also the &lt;VirtualHost&gt;</span><br><span class="line"># directive.</span><br><span class="line">#</span><br><span class="line"># Change this to Listen on specific IP addresses as shown below to </span><br><span class="line"># prevent Apache from glomming onto all bound IP addresses.</span><br><span class="line">#</span><br><span class="line">#Listen 12.34.56.78:80</span><br><span class="line">Listen 80</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># Dynamic Shared Object (DSO) Support</span><br><span class="line">#</span><br><span class="line"># To be able to use the functionality of a module which was built as a DSO you</span><br><span class="line"># have to place corresponding `LoadModule&#x27; lines at this location so the</span><br><span class="line"># directives contained in it are actually available _before_ they are used.</span><br><span class="line"># Statically compiled modules (those listed by `httpd -l&#x27;) do not need</span><br><span class="line"># to be loaded here.</span><br><span class="line">#</span><br><span class="line"># Example:</span><br><span class="line"># LoadModule foo_module modules/mod_foo.so</span><br><span class="line">#</span><br><span class="line"></span><br><span class="line">LoadModule authz_host_module modules/mod_authz_host.so</span><br><span class="line">ServerName localhost:80</span><br><span class="line">&lt;IfModule !mpm_netware_module&gt;</span><br><span class="line">&lt;IfModule !mpm_winnt_module&gt;</span><br><span class="line">#</span><br><span class="line"># If you wish httpd to run as a different user or group, you must run</span><br><span class="line"># httpd as root initially and it will switch.  </span><br><span class="line">#</span><br><span class="line"># User/Group: The name (or #number) of the user/group to run httpd as.</span><br><span class="line"># It is usually good practice to create a dedicated user and group for</span><br><span class="line"># running httpd, as with most system services.</span><br><span class="line">#</span><br><span class="line">User daemon</span><br><span class="line">Group daemon</span><br><span class="line"></span><br><span class="line">&lt;/IfModule&gt;</span><br><span class="line">&lt;/IfModule&gt;</span><br><span class="line"></span><br><span class="line"># &#x27;Main&#x27; server configuration</span><br><span class="line">#</span><br><span class="line"># The directives in this section set up the values used by the &#x27;main&#x27;</span><br><span class="line"># server, which responds to any requests that aren&#x27;t handled by a</span><br><span class="line"># &lt;VirtualHost&gt; definition.  These values also provide defaults for</span><br><span class="line"># any &lt;VirtualHost&gt; containers you may define later in the file.</span><br><span class="line">#</span><br><span class="line"># All of these directives may appear inside &lt;VirtualHost&gt; containers,</span><br><span class="line"># in which case these default settings will be overridden for the</span><br><span class="line"># virtual host being defined.</span><br><span class="line">#</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># ServerAdmin: Your address, where problems with the server should be</span><br><span class="line"># e-mailed.  This address appears on some server-generated pages, such</span><br><span class="line"># as error documents.  e.g. admin@your-domain.com</span><br><span class="line">#</span><br><span class="line">ServerAdmin you@example.com</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># ServerName gives the name and port that the server uses to identify itself.</span><br><span class="line"># This can often be determined automatically, but we recommend you specify</span><br><span class="line"># it explicitly to prevent problems during startup.</span><br><span class="line">#</span><br><span class="line"># If your host doesn&#x27;t have a registered DNS name, enter its IP address here.</span><br><span class="line">#</span><br><span class="line">#ServerName www.example.com:80</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># DocumentRoot: The directory out of which you will serve your</span><br><span class="line"># documents. By default, all requests are taken from this directory, but</span><br><span class="line"># symbolic links and aliases may be used to point to other locations.</span><br><span class="line">#</span><br><span class="line">DocumentRoot &quot;/usr/local/httpd-2.2.24/htdocs&quot;</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># Each directory to which Apache has access can be configured with respect</span><br><span class="line"># to which services and features are allowed and/or disabled in that</span><br><span class="line"># directory (and its subdirectories). </span><br><span class="line">#</span><br><span class="line"># First, we configure the &quot;default&quot; to be a very restrictive set of </span><br><span class="line"># features.  </span><br><span class="line">#</span><br><span class="line">&lt;Directory &quot;/var/www/html/&quot;&gt;</span><br><span class="line">    Options Indexes FollowSymLinks</span><br><span class="line">    AllowOverride None</span><br><span class="line"># 2.2 configuration</span><br><span class="line">    Order deny,allow</span><br><span class="line">    Deny from all</span><br><span class="line">#</span><br><span class="line"># 2.4 configuration</span><br><span class="line">#    Require all denied</span><br><span class="line">&lt;/Directory&gt;</span><br><span class="line"></span><br><span class="line">&lt;Directory &quot;/var/www/html/&quot;&gt;</span><br><span class="line">    Options Indexes FollowSymLinks</span><br><span class="line">    AllowOverride None</span><br><span class="line"># 2.2 configuration</span><br><span class="line">    Order deny,allow</span><br><span class="line">    Deny from all</span><br><span class="line">&lt;/Directory&gt;</span><br><span class="line"># Note that from this point forward you must specifically allow</span><br><span class="line"># particular features to be enabled - so if something&#x27;s not working as</span><br><span class="line"># you might expect, make sure that you have specifically enabled it</span><br><span class="line"># below.</span><br><span class="line">#</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># This should be changed to whatever you set DocumentRoot to.</span><br><span class="line">#</span><br><span class="line">&lt;Directory &quot;/usr/local/httpd-2.2.24/htdocs&quot;&gt;</span><br><span class="line">    #</span><br><span class="line">    # Possible values for the Options directive are &quot;None&quot;, &quot;All&quot;,</span><br><span class="line">    # or any combination of:</span><br><span class="line">    #   Indexes Includes FollowSymLinks SymLinksifOwnerMatch ExecCGI MultiViews</span><br><span class="line">    #</span><br><span class="line">    # Note that &quot;MultiViews&quot; must be named *explicitly* --- &quot;Options All&quot;</span><br><span class="line">    # doesn&#x27;t give it to you.</span><br><span class="line">    #</span><br><span class="line">    # The Options directive is both complicated and important.  Please see</span><br><span class="line">    # http://httpd.apache.org/docs/2.2/mod/core.html#options</span><br><span class="line">    # for more information.</span><br><span class="line">    #</span><br><span class="line">    Options Indexes FollowSymLinks</span><br><span class="line"></span><br><span class="line">    #</span><br><span class="line">    # AllowOverride controls what directives may be placed in .htaccess files.</span><br><span class="line">    # It can be &quot;All&quot;, &quot;None&quot;, or any combination of the keywords:</span><br><span class="line">    #   Options FileInfo AuthConfig Limit</span><br><span class="line">    #</span><br><span class="line">    AllowOverride None</span><br><span class="line"></span><br><span class="line">    #</span><br><span class="line">    # Controls who can get stuff from this server.</span><br><span class="line">    #</span><br><span class="line">    Order allow,deny</span><br><span class="line">    Allow from all</span><br><span class="line"></span><br><span class="line">&lt;/Directory&gt;</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># DirectoryIndex: sets the file that Apache will serve if a directory</span><br><span class="line"># is requested.</span><br><span class="line">#</span><br><span class="line">&lt;IfModule dir_module&gt;</span><br><span class="line">    DirectoryIndex index.html</span><br><span class="line">&lt;/IfModule&gt;</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># The following lines prevent .htaccess and .htpasswd files from being </span><br><span class="line"># viewed by Web clients. </span><br><span class="line">#</span><br><span class="line">&lt;FilesMatch &quot;^\.ht&quot;&gt;</span><br><span class="line">    Order allow,deny</span><br><span class="line">    Deny from all</span><br><span class="line">    Satisfy All</span><br><span class="line">&lt;/FilesMatch&gt;</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># ErrorLog: The location of the error log file.</span><br><span class="line"># If you do not specify an ErrorLog directive within a &lt;VirtualHost&gt;</span><br><span class="line"># container, error messages relating to that virtual host will be</span><br><span class="line"># logged here.  If you *do* define an error logfile for a &lt;VirtualHost&gt;</span><br><span class="line"># container, that host&#x27;s errors will be logged there and not here.</span><br><span class="line">#</span><br><span class="line">ErrorLog &quot;logs/error_log&quot;</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># LogLevel: Control the number of messages logged to the error_log.</span><br><span class="line"># Possible values include: debug, info, notice, warn, error, crit,</span><br><span class="line"># alert, emerg.</span><br><span class="line">#</span><br><span class="line">LogLevel warn</span><br><span class="line"></span><br><span class="line">&lt;IfModule log_config_module&gt;</span><br><span class="line">    #</span><br><span class="line">    # The following directives define some format nicknames for use with</span><br><span class="line">    # a CustomLog directive (see below).</span><br><span class="line">    #</span><br><span class="line">    LogFormat &quot;%h %l %u %t \&quot;%r\&quot; %&gt;s %b \&quot;%&#123;Referer&#125;i\&quot; \&quot;%&#123;User-Agent&#125;i\&quot;&quot; combined</span><br><span class="line">    LogFormat &quot;%h %l %u %t \&quot;%r\&quot; %&gt;s %b&quot; common</span><br><span class="line"></span><br><span class="line">    &lt;IfModule logio_module&gt;</span><br><span class="line">      # You need to enable mod_logio.c to use %I and %O</span><br><span class="line">      LogFormat &quot;%h %l %u %t \&quot;%r\&quot; %&gt;s %b \&quot;%&#123;Referer&#125;i\&quot; \&quot;%&#123;User-Agent&#125;i\&quot; %I %O&quot; combinedio</span><br><span class="line">    &lt;/IfModule&gt;</span><br><span class="line"></span><br><span class="line">    #</span><br><span class="line">    # The location and format of the access logfile (Common Logfile Format).</span><br><span class="line">    # If you do not define any access logfiles within a &lt;VirtualHost&gt;</span><br><span class="line">    # container, they will be logged here.  Contrariwise, if you *do*</span><br><span class="line">    # define per-&lt;VirtualHost&gt; access logfiles, transactions will be</span><br><span class="line">    # logged therein and *not* in this file.</span><br><span class="line">    #</span><br><span class="line">    CustomLog &quot;logs/access_log&quot; common</span><br><span class="line"></span><br><span class="line">    #</span><br><span class="line">    # If you prefer a logfile with access, agent, and referer information</span><br><span class="line">    # (Combined Logfile Format) you can use the following directive.</span><br><span class="line">    #</span><br><span class="line">    #CustomLog &quot;logs/access_log&quot; combined</span><br><span class="line">&lt;/IfModule&gt;</span><br><span class="line"></span><br><span class="line">&lt;IfModule alias_module&gt;</span><br><span class="line">    #</span><br><span class="line">    # Redirect: Allows you to tell clients about documents that used to </span><br><span class="line">    # exist in your server&#x27;s namespace, but do not anymore. The client </span><br><span class="line">    # will make a new request for the document at its new location.</span><br><span class="line">    # Example:</span><br><span class="line">    # Redirect permanent /foo http://www.example.com/bar</span><br><span class="line"></span><br><span class="line">    #</span><br><span class="line">    # Alias: Maps web paths into filesystem paths and is used to</span><br><span class="line">    # access content that does not live under the DocumentRoot.</span><br><span class="line">    # Example:</span><br><span class="line">    # Alias /webpath /full/filesystem/path</span><br><span class="line">    #</span><br><span class="line">    # If you include a trailing / on /webpath then the server will</span><br><span class="line">    # require it to be present in the URL.  You will also likely</span><br><span class="line">    # need to provide a &lt;Directory&gt; section to allow access to</span><br><span class="line">    # the filesystem path.</span><br><span class="line"></span><br><span class="line">    #</span><br><span class="line">    # ScriptAlias: This controls which directories contain server scripts. </span><br><span class="line">    # ScriptAliases are essentially the same as Aliases, except that</span><br><span class="line">    # documents in the target directory are treated as applications and</span><br><span class="line">    # run by the server when requested rather than as documents sent to the</span><br><span class="line">    # client.  The same rules about trailing &quot;/&quot; apply to ScriptAlias</span><br><span class="line">    # directives as to Alias.</span><br><span class="line">    #</span><br><span class="line">    ScriptAlias /cgi-bin/ &quot;/usr/local/httpd-2.2.24/cgi-bin/&quot;</span><br><span class="line"></span><br><span class="line">&lt;/IfModule&gt;</span><br><span class="line"></span><br><span class="line">&lt;IfModule cgid_module&gt;</span><br><span class="line">    #</span><br><span class="line">    # ScriptSock: On threaded servers, designate the path to the UNIX</span><br><span class="line">    # socket used to communicate with the CGI daemon of mod_cgid.</span><br><span class="line">    #</span><br><span class="line">    #Scriptsock logs/cgisock</span><br><span class="line">&lt;/IfModule&gt;</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># &quot;/usr/local/httpd-2.2.24/cgi-bin&quot; should be changed to whatever your ScriptAliased</span><br><span class="line"># CGI directory exists, if you have that configured.</span><br><span class="line">#</span><br><span class="line">&lt;Directory &quot;/usr/local/httpd-2.2.24/cgi-bin&quot;&gt;</span><br><span class="line">    AllowOverride None</span><br><span class="line">    Options None</span><br><span class="line">    Order allow,deny</span><br><span class="line">    Allow from all</span><br><span class="line">&lt;/Directory&gt;</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># DefaultType: the default MIME type the server will use for a document</span><br><span class="line"># if it cannot otherwise determine one, such as from filename extensions.</span><br><span class="line"># If your server contains mostly text or HTML documents, &quot;text/plain&quot; is</span><br><span class="line"># a good value.  If most of your content is binary, such as applications</span><br><span class="line"># or images, you may want to use &quot;application/octet-stream&quot; instead to</span><br><span class="line"># keep browsers from trying to display binary files as though they are</span><br><span class="line"># text.</span><br><span class="line">#</span><br><span class="line">DefaultType text/plain</span><br><span class="line"></span><br><span class="line">&lt;IfModule mime_module&gt;</span><br><span class="line">    #</span><br><span class="line">    # TypesConfig points to the file containing the list of mappings from</span><br><span class="line">    # filename extension to MIME-type.</span><br><span class="line">    #</span><br><span class="line">    TypesConfig conf/mime.types</span><br><span class="line"></span><br><span class="line">    #</span><br><span class="line">    # AddType allows you to add to or override the MIME configuration</span><br><span class="line">    # file specified in TypesConfig for specific file types.</span><br><span class="line">    #</span><br><span class="line">    #AddType application/x-gzip .tgz</span><br><span class="line">    #</span><br><span class="line">    # AddEncoding allows you to have certain browsers uncompress</span><br><span class="line">    # information on the fly. Note: Not all browsers support this.</span><br><span class="line">    #</span><br><span class="line">    #AddEncoding x-compress .Z</span><br><span class="line">    #AddEncoding x-gzip .gz .tgz</span><br><span class="line">    #</span><br><span class="line">    # If the AddEncoding directives above are commented-out, then you</span><br><span class="line">    # probably should define those extensions to indicate media types:</span><br><span class="line">    #</span><br><span class="line">    AddType application/x-compress .Z</span><br><span class="line">    AddType application/x-gzip .gz .tgz</span><br><span class="line"></span><br><span class="line">    #</span><br><span class="line">    # AddHandler allows you to map certain file extensions to &quot;handlers&quot;:</span><br><span class="line">    # actions unrelated to filetype. These can be either built into the server</span><br><span class="line">    # or added with the Action directive (see below)</span><br><span class="line">    #</span><br><span class="line">    # To use CGI scripts outside of ScriptAliased directories:</span><br><span class="line">    # (You will also need to add &quot;ExecCGI&quot; to the &quot;Options&quot; directive.)</span><br><span class="line">    #</span><br><span class="line">    #AddHandler cgi-script .cgi</span><br><span class="line"></span><br><span class="line">    # For type maps (negotiated resources):</span><br><span class="line">    #AddHandler type-map var</span><br><span class="line"></span><br><span class="line">    #</span><br><span class="line">    # Filters allow you to process content before it is sent to the client.</span><br><span class="line">    #</span><br><span class="line">    # To parse .shtml files for server-side includes (SSI):</span><br><span class="line">    # (You will also need to add &quot;Includes&quot; to the &quot;Options&quot; directive.)</span><br><span class="line">    #</span><br><span class="line">    #AddType text/html .shtml</span><br><span class="line">    #AddOutputFilter INCLUDES .shtml</span><br><span class="line">&lt;/IfModule&gt;</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># The mod_mime_magic module allows the server to use various hints from the</span><br><span class="line"># contents of the file itself to determine its type.  The MIMEMagicFile</span><br><span class="line"># directive tells the module where the hint definitions are located.</span><br><span class="line">#</span><br><span class="line">#MIMEMagicFile conf/magic</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># Customizable error responses come in three flavors:</span><br><span class="line"># 1) plain text 2) local redirects 3) external redirects</span><br><span class="line">#</span><br><span class="line"># Some examples:</span><br><span class="line">#ErrorDocument 500 &quot;The server made a boo boo.&quot;</span><br><span class="line">#ErrorDocument 404 /missing.html</span><br><span class="line">#ErrorDocument 404 &quot;/cgi-bin/missing_handler.pl&quot;</span><br><span class="line">#ErrorDocument 402 http://www.example.com/subscription_info.html</span><br><span class="line">#</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># MaxRanges: Maximum number of Ranges in a request before</span><br><span class="line"># returning the entire resource, or one of the special</span><br><span class="line"># values &#x27;default&#x27;, &#x27;none&#x27; or &#x27;unlimited&#x27;.</span><br><span class="line"># Default setting is to accept 200 Ranges.</span><br><span class="line">#MaxRanges unlimited</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># EnableMMAP and EnableSendfile: On systems that support it, </span><br><span class="line"># memory-mapping or the sendfile syscall is used to deliver</span><br><span class="line"># files.  This usually improves server performance, but must</span><br><span class="line"># be turned off when serving from networked-mounted </span><br><span class="line"># filesystems or if support for these functions is otherwise</span><br><span class="line"># broken on your system.</span><br><span class="line">#</span><br><span class="line">#EnableMMAP off</span><br><span class="line">#EnableSendfile off</span><br><span class="line"></span><br><span class="line"># Supplemental configuration</span><br><span class="line">#</span><br><span class="line"># The configuration files in the conf/extra/ directory can be </span><br><span class="line"># included to add extra features or to modify the default configuration of </span><br><span class="line"># the server, or you may simply copy their contents here and change as </span><br><span class="line"># necessary.</span><br><span class="line"></span><br><span class="line"># Server-pool management (MPM specific)</span><br><span class="line">#Include conf/extra/httpd-mpm.conf</span><br><span class="line"></span><br><span class="line"># Multi-language error messages</span><br><span class="line">#Include conf/extra/httpd-multilang-errordoc.conf</span><br><span class="line"></span><br><span class="line"># Fancy directory listings</span><br><span class="line">#Include conf/extra/httpd-autoindex.conf</span><br><span class="line"></span><br><span class="line"># Language settings</span><br><span class="line">#Include conf/extra/httpd-languages.conf</span><br><span class="line"></span><br><span class="line"># User home directories</span><br><span class="line">#Include conf/extra/httpd-userdir.conf</span><br><span class="line"></span><br><span class="line"># Real-time info on requests and configuration</span><br><span class="line">#Include conf/extra/httpd-info.conf</span><br><span class="line"></span><br><span class="line"># Virtual hosts</span><br><span class="line">#Include conf/extra/httpd-vhosts.conf</span><br><span class="line"></span><br><span class="line"># Local access to the Apache HTTP Server Manual</span><br><span class="line">#Include conf/extra/httpd-manual.conf</span><br><span class="line"></span><br><span class="line"># Distributed authoring and versioning (WebDAV)</span><br><span class="line">#Include conf/extra/httpd-dav.conf</span><br><span class="line"></span><br><span class="line"># Various default settings</span><br><span class="line">#Include conf/extra/httpd-default.conf</span><br><span class="line"></span><br><span class="line"># Secure (SSL/TLS) connections</span><br><span class="line">#Include conf/extra/httpd-ssl.conf</span><br><span class="line">#</span><br><span class="line"># Note: The following must must be present to support</span><br><span class="line">#       starting without SSL on platforms with no /dev/random equivalent</span><br><span class="line">#       but a statically compiled-in mod_ssl.</span><br><span class="line">#</span><br><span class="line">&lt;IfModule ssl_module&gt;</span><br><span class="line">SSLRandomSeed startup builtin</span><br><span class="line">SSLRandomSeed connect builtin</span><br><span class="line">&lt;/IfModule&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://github.com/rohman-zhu/posts/90a47bf7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rohman.Zhu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="诺曼实验室">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 诺曼实验室">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/90a47bf7/" class="post-title-link" itemprop="url">httpd.conf</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2018-11-23 00:11:57" itemprop="dateCreated datePublished" datetime="2018-11-23T00:11:57+00:00">2018-11-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-12-22 05:27:49" itemprop="dateModified" datetime="2024-12-22T05:27:49+00:00">2024-12-22</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br></pre></td><td class="code"><pre><span class="line">#</span><br><span class="line"># This is the main Apache HTTP server configuration file.  It contains the</span><br><span class="line"># configuration directives that give the server its instructions.</span><br><span class="line"># See &lt;URL:http://httpd.apache.org/docs/2.2&gt; for detailed information.</span><br><span class="line"># In particular, see </span><br><span class="line"># &lt;URL:http://httpd.apache.org/docs/2.2/mod/directives.html&gt;</span><br><span class="line"># for a discussion of each configuration directive.</span><br><span class="line">#</span><br><span class="line"># Do NOT simply read the instructions in here without understanding</span><br><span class="line"># what they do.  They&#x27;re here only as hints or reminders.  If you are unsure</span><br><span class="line"># consult the online docs. You have been warned.  </span><br><span class="line">#</span><br><span class="line"># Configuration and logfile names: If the filenames you specify for many</span><br><span class="line"># of the server&#x27;s control files begin with &quot;/&quot; (or &quot;drive:/&quot; for Win32), the</span><br><span class="line"># server will use that explicit path.  If the filenames do *not* begin</span><br><span class="line"># with &quot;/&quot;, the value of ServerRoot is prepended -- so &#x27;log/access_log&#x27;</span><br><span class="line"># with ServerRoot set to &#x27;/www&#x27; will be interpreted by the</span><br><span class="line"># server as &#x27;/www/log/access_log&#x27;, where as &#x27;/log/access_log&#x27; will be</span><br><span class="line"># interpreted as &#x27;/log/access_log&#x27;.</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># ServerRoot: The top of the directory tree under which the server&#x27;s</span><br><span class="line"># configuration, error, and log files are kept.</span><br><span class="line">#</span><br><span class="line"># Do not add a slash at the end of the directory path.  If you point</span><br><span class="line"># ServerRoot at a non-local disk, be sure to point the LockFile directive</span><br><span class="line"># at a local disk.  If you wish to share the same ServerRoot for multiple</span><br><span class="line"># httpd daemons, you will need to change at least LockFile and PidFile.</span><br><span class="line">#</span><br><span class="line">ServerRoot &quot;/usr/local/httpd-2.2.24/&quot;</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># Listen: Allows you to bind Apache to specific IP addresses and/or</span><br><span class="line"># ports, instead of the default. See also the &lt;VirtualHost&gt;</span><br><span class="line"># directive.</span><br><span class="line">#</span><br><span class="line"># Change this to Listen on specific IP addresses as shown below to </span><br><span class="line"># prevent Apache from glomming onto all bound IP addresses.</span><br><span class="line">#</span><br><span class="line">#Listen 12.34.56.78:80</span><br><span class="line">Listen 80</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># Dynamic Shared Object (DSO) Support</span><br><span class="line">#</span><br><span class="line"># To be able to use the functionality of a module which was built as a DSO you</span><br><span class="line"># have to place corresponding `LoadModule&#x27; lines at this location so the</span><br><span class="line"># directives contained in it are actually available _before_ they are used.</span><br><span class="line"># Statically compiled modules (those listed by `httpd -l&#x27;) do not need</span><br><span class="line"># to be loaded here.</span><br><span class="line">#</span><br><span class="line"># Example:</span><br><span class="line"># LoadModule foo_module modules/mod_foo.so</span><br><span class="line">#</span><br><span class="line">LoadModule authn_file_module modules/mod_authn_file.so</span><br><span class="line">LoadModule authn_dbm_module modules/mod_authn_dbm.so</span><br><span class="line">LoadModule authn_anon_module modules/mod_authn_anon.so</span><br><span class="line">LoadModule authn_dbd_module modules/mod_authn_dbd.so</span><br><span class="line">LoadModule authn_default_module modules/mod_authn_default.so</span><br><span class="line">LoadModule authz_host_module modules/mod_authz_host.so</span><br><span class="line">LoadModule authz_groupfile_module modules/mod_authz_groupfile.so</span><br><span class="line">LoadModule authz_user_module modules/mod_authz_user.so</span><br><span class="line">LoadModule authz_dbm_module modules/mod_authz_dbm.so</span><br><span class="line">LoadModule authz_owner_module modules/mod_authz_owner.so</span><br><span class="line">LoadModule authz_default_module modules/mod_authz_default.so</span><br><span class="line">LoadModule auth_basic_module modules/mod_auth_basic.so</span><br><span class="line">LoadModule auth_digest_module modules/mod_auth_digest.so</span><br><span class="line">LoadModule dbd_module modules/mod_dbd.so</span><br><span class="line">LoadModule dumpio_module modules/mod_dumpio.so</span><br><span class="line">LoadModule reqtimeout_module modules/mod_reqtimeout.so</span><br><span class="line">LoadModule ext_filter_module modules/mod_ext_filter.so</span><br><span class="line">LoadModule include_module modules/mod_include.so</span><br><span class="line">LoadModule filter_module modules/mod_filter.so</span><br><span class="line">LoadModule substitute_module modules/mod_substitute.so</span><br><span class="line">LoadModule deflate_module modules/mod_deflate.so</span><br><span class="line">LoadModule log_config_module modules/mod_log_config.so</span><br><span class="line">LoadModule logio_module modules/mod_logio.so</span><br><span class="line">LoadModule env_module modules/mod_env.so</span><br><span class="line">LoadModule expires_module modules/mod_expires.so</span><br><span class="line">LoadModule headers_module modules/mod_headers.so</span><br><span class="line">LoadModule ident_module modules/mod_ident.so</span><br><span class="line">LoadModule setenvif_module modules/mod_setenvif.so</span><br><span class="line">LoadModule version_module modules/mod_version.so</span><br><span class="line">LoadModule ssl_module modules/mod_ssl.so</span><br><span class="line">LoadModule mime_module modules/mod_mime.so</span><br><span class="line">LoadModule dav_module modules/mod_dav.so</span><br><span class="line">LoadModule status_module modules/mod_status.so</span><br><span class="line">LoadModule autoindex_module modules/mod_autoindex.so</span><br><span class="line">LoadModule asis_module modules/mod_asis.so</span><br><span class="line">LoadModule info_module modules/mod_info.so</span><br><span class="line">LoadModule cgi_module modules/mod_cgi.so</span><br><span class="line">LoadModule cgid_module modules/mod_cgid.so</span><br><span class="line">LoadModule dav_fs_module modules/mod_dav_fs.so</span><br><span class="line">LoadModule vhost_alias_module modules/mod_vhost_alias.so</span><br><span class="line">LoadModule negotiation_module modules/mod_negotiation.so</span><br><span class="line">LoadModule dir_module modules/mod_dir.so</span><br><span class="line">LoadModule imagemap_module modules/mod_imagemap.so</span><br><span class="line">LoadModule actions_module modules/mod_actions.so</span><br><span class="line">LoadModule speling_module modules/mod_speling.so</span><br><span class="line">LoadModule userdir_module modules/mod_userdir.so</span><br><span class="line">LoadModule alias_module modules/mod_alias.so</span><br><span class="line">LoadModule rewrite_module modules/mod_rewrite.so</span><br><span class="line"></span><br><span class="line">&lt;IfModule !mpm_netware_module&gt;</span><br><span class="line">&lt;IfModule !mpm_winnt_module&gt;</span><br><span class="line">#</span><br><span class="line"># If you wish httpd to run as a different user or group, you must run</span><br><span class="line"># httpd as root initially and it will switch.  </span><br><span class="line">#</span><br><span class="line"># User/Group: The name (or #number) of the user/group to run httpd as.</span><br><span class="line"># It is usually good practice to create a dedicated user and group for</span><br><span class="line"># running httpd, as with most system services.</span><br><span class="line">#</span><br><span class="line">User daemon</span><br><span class="line">Group daemon</span><br><span class="line"></span><br><span class="line">&lt;/IfModule&gt;</span><br><span class="line">&lt;/IfModule&gt;</span><br><span class="line"></span><br><span class="line"># &#x27;Main&#x27; server configuration</span><br><span class="line">#</span><br><span class="line"># The directives in this section set up the values used by the &#x27;main&#x27;</span><br><span class="line"># server, which responds to any requests that aren&#x27;t handled by a</span><br><span class="line"># &lt;VirtualHost&gt; definition.  These values also provide defaults for</span><br><span class="line"># any &lt;VirtualHost&gt; containers you may define later in the file.</span><br><span class="line">#</span><br><span class="line"># All of these directives may appear inside &lt;VirtualHost&gt; containers,</span><br><span class="line"># in which case these default settings will be overridden for the</span><br><span class="line"># virtual host being defined.</span><br><span class="line">#</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># ServerAdmin: Your address, where problems with the server should be</span><br><span class="line"># e-mailed.  This address appears on some server-generated pages, such</span><br><span class="line"># as error documents.  e.g. admin@your-domain.com</span><br><span class="line">#</span><br><span class="line">ServerAdmin you@example.com</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># ServerName gives the name and port that the server uses to identify itself.</span><br><span class="line"># This can often be determined automatically, but we recommend you specify</span><br><span class="line"># it explicitly to prevent problems during startup.</span><br><span class="line">#</span><br><span class="line"># If your host doesn&#x27;t have a registered DNS name, enter its IP address here.</span><br><span class="line">#</span><br><span class="line">#ServerName www.example.com:80</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># DocumentRoot: The directory out of which you will serve your</span><br><span class="line"># documents. By default, all requests are taken from this directory, but</span><br><span class="line"># symbolic links and aliases may be used to point to other locations.</span><br><span class="line">#</span><br><span class="line">DocumentRoot &quot;/usr/local/httpd-2.2.24//htdocs&quot;</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># Each directory to which Apache has access can be configured with respect</span><br><span class="line"># to which services and features are allowed and/or disabled in that</span><br><span class="line"># directory (and its subdirectories). </span><br><span class="line">#</span><br><span class="line"># First, we configure the &quot;default&quot; to be a very restrictive set of </span><br><span class="line"># features.  </span><br><span class="line">#</span><br><span class="line">&lt;Directory &quot;/var/www/html/&quot;&gt;</span><br><span class="line">    Options Indexes FollowSymLinks</span><br><span class="line">    AllowOverride None</span><br><span class="line">    Order deny,allow</span><br><span class="line">    Deny from all</span><br><span class="line">&lt;/Directory&gt;</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># Note that from this point forward you must specifically allow</span><br><span class="line"># particular features to be enabled - so if something&#x27;s not working as</span><br><span class="line"># you might expect, make sure that you have specifically enabled it</span><br><span class="line"># below.</span><br><span class="line">#</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># This should be changed to whatever you set DocumentRoot to.</span><br><span class="line">#</span><br><span class="line">&lt;Directory &quot;/usr/local/httpd-2.2.24//htdocs&quot;&gt;</span><br><span class="line">    #</span><br><span class="line">    # Possible values for the Options directive are &quot;None&quot;, &quot;All&quot;,</span><br><span class="line">    # or any combination of:</span><br><span class="line">    #   Indexes Includes FollowSymLinks SymLinksifOwnerMatch ExecCGI MultiViews</span><br><span class="line">    #</span><br><span class="line">    # Note that &quot;MultiViews&quot; must be named *explicitly* --- &quot;Options All&quot;</span><br><span class="line">    # doesn&#x27;t give it to you.</span><br><span class="line">    #</span><br><span class="line">    # The Options directive is both complicated and important.  Please see</span><br><span class="line">    # http://httpd.apache.org/docs/2.2/mod/core.html#options</span><br><span class="line">    # for more information.</span><br><span class="line">    #</span><br><span class="line">    Options Indexes FollowSymLinks</span><br><span class="line"></span><br><span class="line">    #</span><br><span class="line">    # AllowOverride controls what directives may be placed in .htaccess files.</span><br><span class="line">    # It can be &quot;All&quot;, &quot;None&quot;, or any combination of the keywords:</span><br><span class="line">    #   Options FileInfo AuthConfig Limit</span><br><span class="line">    #</span><br><span class="line">    AllowOverride None</span><br><span class="line"></span><br><span class="line">    #</span><br><span class="line">    # Controls who can get stuff from this server.</span><br><span class="line">    #</span><br><span class="line">    Order allow,deny</span><br><span class="line">    Allow from all</span><br><span class="line"></span><br><span class="line">&lt;/Directory&gt;</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># DirectoryIndex: sets the file that Apache will serve if a directory</span><br><span class="line"># is requested.</span><br><span class="line">#</span><br><span class="line">&lt;IfModule dir_module&gt;</span><br><span class="line">    DirectoryIndex index.html</span><br><span class="line">&lt;/IfModule&gt;</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># The following lines prevent .htaccess and .htpasswd files from being </span><br><span class="line"># viewed by Web clients. </span><br><span class="line">#</span><br><span class="line">&lt;FilesMatch &quot;^\.ht&quot;&gt;</span><br><span class="line">    Order allow,deny</span><br><span class="line">    Deny from all</span><br><span class="line">    Satisfy All</span><br><span class="line">&lt;/FilesMatch&gt;</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># ErrorLog: The location of the error log file.</span><br><span class="line"># If you do not specify an ErrorLog directive within a &lt;VirtualHost&gt;</span><br><span class="line"># container, error messages relating to that virtual host will be</span><br><span class="line"># logged here.  If you *do* define an error logfile for a &lt;VirtualHost&gt;</span><br><span class="line"># container, that host&#x27;s errors will be logged there and not here.</span><br><span class="line">#</span><br><span class="line">ErrorLog &quot;logs/error_log&quot;</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># LogLevel: Control the number of messages logged to the error_log.</span><br><span class="line"># Possible values include: debug, info, notice, warn, error, crit,</span><br><span class="line"># alert, emerg.</span><br><span class="line">#</span><br><span class="line">LogLevel warn</span><br><span class="line"></span><br><span class="line">&lt;IfModule log_config_module&gt;</span><br><span class="line">    #</span><br><span class="line">    # The following directives define some format nicknames for use with</span><br><span class="line">    # a CustomLog directive (see below).</span><br><span class="line">    #</span><br><span class="line">    LogFormat &quot;%h %l %u %t \&quot;%r\&quot; %&gt;s %b \&quot;%&#123;Referer&#125;i\&quot; \&quot;%&#123;User-Agent&#125;i\&quot;&quot; combined</span><br><span class="line">    LogFormat &quot;%h %l %u %t \&quot;%r\&quot; %&gt;s %b&quot; common</span><br><span class="line"></span><br><span class="line">    &lt;IfModule logio_module&gt;</span><br><span class="line">      # You need to enable mod_logio.c to use %I and %O</span><br><span class="line">      LogFormat &quot;%h %l %u %t \&quot;%r\&quot; %&gt;s %b \&quot;%&#123;Referer&#125;i\&quot; \&quot;%&#123;User-Agent&#125;i\&quot; %I %O&quot; combinedio</span><br><span class="line">    &lt;/IfModule&gt;</span><br><span class="line"></span><br><span class="line">    #</span><br><span class="line">    # The location and format of the access logfile (Common Logfile Format).</span><br><span class="line">    # If you do not define any access logfiles within a &lt;VirtualHost&gt;</span><br><span class="line">    # container, they will be logged here.  Contrariwise, if you *do*</span><br><span class="line">    # define per-&lt;VirtualHost&gt; access logfiles, transactions will be</span><br><span class="line">    # logged therein and *not* in this file.</span><br><span class="line">    #</span><br><span class="line">    CustomLog &quot;logs/access_log&quot; common</span><br><span class="line"></span><br><span class="line">    #</span><br><span class="line">    # If you prefer a logfile with access, agent, and referer information</span><br><span class="line">    # (Combined Logfile Format) you can use the following directive.</span><br><span class="line">    #</span><br><span class="line">    #CustomLog &quot;logs/access_log&quot; combined</span><br><span class="line">&lt;/IfModule&gt;</span><br><span class="line"></span><br><span class="line">&lt;IfModule alias_module&gt;</span><br><span class="line">    #</span><br><span class="line">    # Redirect: Allows you to tell clients about documents that used to </span><br><span class="line">    # exist in your server&#x27;s namespace, but do not anymore. The client </span><br><span class="line">    # will make a new request for the document at its new location.</span><br><span class="line">    # Example:</span><br><span class="line">    # Redirect permanent /foo http://www.example.com/bar</span><br><span class="line"></span><br><span class="line">    #</span><br><span class="line">    # Alias: Maps web paths into filesystem paths and is used to</span><br><span class="line">    # access content that does not live under the DocumentRoot.</span><br><span class="line">    # Example:</span><br><span class="line">    # Alias /webpath /full/filesystem/path</span><br><span class="line">    #</span><br><span class="line">    # If you include a trailing / on /webpath then the server will</span><br><span class="line">    # require it to be present in the URL.  You will also likely</span><br><span class="line">    # need to provide a &lt;Directory&gt; section to allow access to</span><br><span class="line">    # the filesystem path.</span><br><span class="line"></span><br><span class="line">    #</span><br><span class="line">    # ScriptAlias: This controls which directories contain server scripts. </span><br><span class="line">    # ScriptAliases are essentially the same as Aliases, except that</span><br><span class="line">    # documents in the target directory are treated as applications and</span><br><span class="line">    # run by the server when requested rather than as documents sent to the</span><br><span class="line">    # client.  The same rules about trailing &quot;/&quot; apply to ScriptAlias</span><br><span class="line">    # directives as to Alias.</span><br><span class="line">    #</span><br><span class="line">    ScriptAlias /cgi-bin/ &quot;/usr/local/httpd-2.2.24//cgi-bin/&quot;</span><br><span class="line"></span><br><span class="line">&lt;/IfModule&gt;</span><br><span class="line"></span><br><span class="line">&lt;IfModule cgid_module&gt;</span><br><span class="line">    #</span><br><span class="line">    # ScriptSock: On threaded servers, designate the path to the UNIX</span><br><span class="line">    # socket used to communicate with the CGI daemon of mod_cgid.</span><br><span class="line">    #</span><br><span class="line">    #Scriptsock logs/cgisock</span><br><span class="line">&lt;/IfModule&gt;</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># &quot;/usr/local/httpd-2.2.24//cgi-bin&quot; should be changed to whatever your ScriptAliased</span><br><span class="line"># CGI directory exists, if you have that configured.</span><br><span class="line">#</span><br><span class="line">&lt;Directory &quot;/usr/local/httpd-2.2.24//cgi-bin&quot;&gt;</span><br><span class="line">    AllowOverride None</span><br><span class="line">    Options None</span><br><span class="line">    Order allow,deny</span><br><span class="line">    Allow from all</span><br><span class="line">&lt;/Directory&gt;</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># DefaultType: the default MIME type the server will use for a document</span><br><span class="line"># if it cannot otherwise determine one, such as from filename extensions.</span><br><span class="line"># If your server contains mostly text or HTML documents, &quot;text/plain&quot; is</span><br><span class="line"># a good value.  If most of your content is binary, such as applications</span><br><span class="line"># or images, you may want to use &quot;application/octet-stream&quot; instead to</span><br><span class="line"># keep browsers from trying to display binary files as though they are</span><br><span class="line"># text.</span><br><span class="line">#</span><br><span class="line">DefaultType text/plain</span><br><span class="line"></span><br><span class="line">&lt;IfModule mime_module&gt;</span><br><span class="line">    #</span><br><span class="line">    # TypesConfig points to the file containing the list of mappings from</span><br><span class="line">    # filename extension to MIME-type.</span><br><span class="line">    #</span><br><span class="line">    TypesConfig /etc/httpd/mime.types</span><br><span class="line"></span><br><span class="line">    #</span><br><span class="line">    # AddType allows you to add to or override the MIME configuration</span><br><span class="line">    # file specified in TypesConfig for specific file types.</span><br><span class="line">    #</span><br><span class="line">    #AddType application/x-gzip .tgz</span><br><span class="line">    #</span><br><span class="line">    # AddEncoding allows you to have certain browsers uncompress</span><br><span class="line">    # information on the fly. Note: Not all browsers support this.</span><br><span class="line">    #</span><br><span class="line">    #AddEncoding x-compress .Z</span><br><span class="line">    #AddEncoding x-gzip .gz .tgz</span><br><span class="line">    #</span><br><span class="line">    # If the AddEncoding directives above are commented-out, then you</span><br><span class="line">    # probably should define those extensions to indicate media types:</span><br><span class="line">    #</span><br><span class="line">    AddType application/x-compress .Z</span><br><span class="line">    AddType application/x-gzip .gz .tgz</span><br><span class="line"></span><br><span class="line">    #</span><br><span class="line">    # AddHandler allows you to map certain file extensions to &quot;handlers&quot;:</span><br><span class="line">    # actions unrelated to filetype. These can be either built into the server</span><br><span class="line">    # or added with the Action directive (see below)</span><br><span class="line">    #</span><br><span class="line">    # To use CGI scripts outside of ScriptAliased directories:</span><br><span class="line">    # (You will also need to add &quot;ExecCGI&quot; to the &quot;Options&quot; directive.)</span><br><span class="line">    #</span><br><span class="line">    #AddHandler cgi-script .cgi</span><br><span class="line"></span><br><span class="line">    # For type maps (negotiated resources):</span><br><span class="line">    #AddHandler type-map var</span><br><span class="line"></span><br><span class="line">    #</span><br><span class="line">    # Filters allow you to process content before it is sent to the client.</span><br><span class="line">    #</span><br><span class="line">    # To parse .shtml files for server-side includes (SSI):</span><br><span class="line">    # (You will also need to add &quot;Includes&quot; to the &quot;Options&quot; directive.)</span><br><span class="line">    #</span><br><span class="line">    #AddType text/html .shtml</span><br><span class="line">    #AddOutputFilter INCLUDES .shtml</span><br><span class="line">&lt;/IfModule&gt;</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># The mod_mime_magic module allows the server to use various hints from the</span><br><span class="line"># contents of the file itself to determine its type.  The MIMEMagicFile</span><br><span class="line"># directive tells the module where the hint definitions are located.</span><br><span class="line">#</span><br><span class="line">#MIMEMagicFile /etc/httpd/magic</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># Customizable error responses come in three flavors:</span><br><span class="line"># 1) plain text 2) local redirects 3) external redirects</span><br><span class="line">#</span><br><span class="line"># Some examples:</span><br><span class="line">#ErrorDocument 500 &quot;The server made a boo boo.&quot;</span><br><span class="line">#ErrorDocument 404 /missing.html</span><br><span class="line">#ErrorDocument 404 &quot;/cgi-bin/missing_handler.pl&quot;</span><br><span class="line">#ErrorDocument 402 http://www.example.com/subscription_info.html</span><br><span class="line">#</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># MaxRanges: Maximum number of Ranges in a request before</span><br><span class="line"># returning the entire resource, or one of the special</span><br><span class="line"># values &#x27;default&#x27;, &#x27;none&#x27; or &#x27;unlimited&#x27;.</span><br><span class="line"># Default setting is to accept 200 Ranges.</span><br><span class="line">#MaxRanges unlimited</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># EnableMMAP and EnableSendfile: On systems that support it, </span><br><span class="line"># memory-mapping or the sendfile syscall is used to deliver</span><br><span class="line"># files.  This usually improves server performance, but must</span><br><span class="line"># be turned off when serving from networked-mounted </span><br><span class="line"># filesystems or if support for these functions is otherwise</span><br><span class="line"># broken on your system.</span><br><span class="line">#</span><br><span class="line">#EnableMMAP off</span><br><span class="line">#EnableSendfile off</span><br><span class="line"></span><br><span class="line"># Supplemental configuration</span><br><span class="line">#</span><br><span class="line"># The configuration files in the /etc/httpd/extra/ directory can be </span><br><span class="line"># included to add extra features or to modify the default configuration of </span><br><span class="line"># the server, or you may simply copy their contents here and change as </span><br><span class="line"># necessary.</span><br><span class="line"></span><br><span class="line"># Server-pool management (MPM specific)</span><br><span class="line">#Include /etc/httpd/extra/httpd-mpm.conf</span><br><span class="line"></span><br><span class="line"># Multi-language error messages</span><br><span class="line">#Include /etc/httpd/extra/httpd-multilang-errordoc.conf</span><br><span class="line"></span><br><span class="line"># Fancy directory listings</span><br><span class="line">#Include /etc/httpd/extra/httpd-autoindex.conf</span><br><span class="line"></span><br><span class="line"># Language settings</span><br><span class="line">#Include /etc/httpd/extra/httpd-languages.conf</span><br><span class="line"></span><br><span class="line"># User home directories</span><br><span class="line">#Include /etc/httpd/extra/httpd-userdir.conf</span><br><span class="line"></span><br><span class="line"># Real-time info on requests and configuration</span><br><span class="line">#Include /etc/httpd/extra/httpd-info.conf</span><br><span class="line"></span><br><span class="line"># Virtual hosts</span><br><span class="line">#Include /etc/httpd/extra/httpd-vhosts.conf</span><br><span class="line"></span><br><span class="line"># Local access to the Apache HTTP Server Manual</span><br><span class="line">#Include /etc/httpd/extra/httpd-manual.conf</span><br><span class="line"></span><br><span class="line"># Distributed authoring and versioning (WebDAV)</span><br><span class="line">#Include /etc/httpd/extra/httpd-dav.conf</span><br><span class="line"></span><br><span class="line"># Various default settings</span><br><span class="line">#Include /etc/httpd/extra/httpd-default.conf</span><br><span class="line"></span><br><span class="line"># Secure (SSL/TLS) connections</span><br><span class="line">#Include /etc/httpd/extra/httpd-ssl.conf</span><br><span class="line">#</span><br><span class="line"># Note: The following must must be present to support</span><br><span class="line">#       starting without SSL on platforms with no /dev/random equivalent</span><br><span class="line">#       but a statically compiled-in mod_ssl.</span><br><span class="line">#</span><br><span class="line">&lt;IfModule ssl_module&gt;</span><br><span class="line">SSLRandomSeed startup builtin</span><br><span class="line">SSLRandomSeed connect builtin</span><br><span class="line">&lt;/IfModule&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ServerName localhost:80</span><br><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://github.com/rohman-zhu/posts/92162876/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rohman.Zhu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="诺曼实验室">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 诺曼实验室">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/92162876/" class="post-title-link" itemprop="url">lamp-Zabbix服务器监控部署</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2018-11-20 23:18:36" itemprop="dateCreated datePublished" datetime="2018-11-20T23:18:36+00:00">2018-11-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-12-22 05:27:49" itemprop="dateModified" datetime="2024-12-22T05:27:49+00:00">2024-12-22</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h1><ul>
<li>Centos 7</li>
<li>Zabbix-4.0</li>
<li>PHP-7.2.12</li>
<li>Apache-2.2.24</li>
<li>MariaDB-10.3.11 Stable</li>
</ul>
<blockquote>
<p>采用编译安装</p>
</blockquote>
<blockquote>
<p>Centos 7 的防火墙坑，firewall-cmd –stat 看看防火墙的状态是否为运行状态。</p>
</blockquote>
<h1 id="TODO"><a href="#TODO" class="headerlink" title="TODO"></a>TODO</h1><p>完成应用的安装<br>Deadline ：2018-12-2 0:00 [完成时间：20181202 22:30]</p>
<p>完成监控部署<br>Deadline ：2018-12-8 0:00</p>
<h1 id="Linux中的准备工作"><a href="#Linux中的准备工作" class="headerlink" title="Linux中的准备工作"></a>Linux中的准备工作</h1><ul>
<li><p>httpd (提供 Apache 主程式)</p>
</li>
<li><p>mysql (MySQL 客戶端程式)</p>
</li>
<li><p>mysql-server (MySQL 伺服器程式)</p>
</li>
<li><p>php (PHP 主程式含給 apache 使用的模組)</p>
</li>
<li><p>php-devel (PHP 的發展工具，這個與 PHP 外掛的加速軟體有關)</p>
</li>
<li><p>php-mysql (提供給 PHP 程式讀取 MySQL 資料庫的模組)</p>
</li>
<li><p>关闭 Selinux</p>
</li>
<li><p>关闭 Iptables</p>
</li>
<li><p>添加 mysql 账号</p>
</li>
<li><p>添加 zabbix 账号</p>
</li>
<li><p>添加 apache 账号</p>
</li>
</ul>
<h1 id="安装Apache"><a href="#安装Apache" class="headerlink" title="安装Apache"></a>安装Apache</h1><p>先安装apache必备运行库 ， 安装 apr 和 apr-util </p>
<ul>
<li>apr-1.6.5</li>
<li>apr-util-1.6.1</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">安装依赖包</span></span><br><span class="line">yum install pcre-devel -y</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">安装运行库必备</span></span><br><span class="line">wget -O apr-1.6.5.tar.gz http://mirror.bit.edu.cn/apache//apr/apr-1.6.5.tar.gz</span><br><span class="line"></span><br><span class="line">wget -O apr-util-1.6.1.tar.gz http://mirror.bit.edu.cn/apache//apr/apr-util-1.6.1.tar.gz</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">到 apr 目录下</span></span><br><span class="line">./configure --prefix=/usr/local/apr-1.6.5</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">检查</span></span><br><span class="line">echo  $?</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">如果没有错误则编译安装</span></span><br><span class="line">make</span><br><span class="line">make install</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">到 apr-util 目录下</span></span><br><span class="line">./configure --prefxi=/usr/local/apr-util-1.6.1 --with-apr=/usr/local/apr</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">检查</span></span><br><span class="line">echo $?</span><br><span class="line">make</span><br><span class="line">make install</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">到httpd-2.2.4的目录下安装</span></span><br><span class="line">./configure --prefix=/usr/local/httpd-2.2.24/ --sysconfdir=/etc/httpd --enable-so --enable-rewrite --enable-ssl --enable-cgi --enable-cgid --enable-modules=most --enable-mods-shared=most --enable-mpms-shared=all --with-apr=/usr/local/apr --with-apr-util=/usr/local/apr-util</span><br><span class="line"></span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">参数说明</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">--enable-so：支持动态共享模块，如果支持php将不能与apache一起工作。必须要有</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">--enable-ssl：启用ssl功能，如果不启用将无法使用https</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">--enable-mpms-shared=all：prefork、worker、event</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">--with-mpm=event：event为默认</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">--enable-rewrite：支持URL重写</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">--enable-cgi :支持cgi</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">--enable-cgid:httpd使用event或者worker得启用被线程方式访问</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">--enable-modules=most :启用大多数模块</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">--enable-mods-shared=most:启用大多数共享模块</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">复制apachectl到/etc/init.d下</span></span><br><span class="line">cp /usr/local/httpd/bin/apachectl /etc/init.d/httpd</span><br></pre></td></tr></table></figure>

<h2 id="Apache启动报错"><a href="#Apache启动报错" class="headerlink" title="Apache启动报错"></a>Apache启动报错</h2><ol>
<li><p>Could not reliably determine the server’s fully qualified domain name, using localhost.localdomain for ServerName</p>
</li>
<li><p>configure: error: …No recognized SSL&#x2F;TLS toolkit detected</p>
</li>
</ol>
<ul>
<li>yum install openssl-devel -y</li>
</ul>
<ol start="3">
<li>Syntax error on line 118 of &#x2F;usr&#x2F;local&#x2F;httpd-2.2.24&#x2F;conf&#x2F;httpd.conf:Invalid command ‘Order’, perhaps misspelled or defined by a module not included in the server configuration</li>
</ol>
<ul>
<li>没有加载 mod_authz_host.so 模块</li>
<li>LoadModule authz_host_module modules&#x2F;mod_authz_host.so</li>
</ul>
<h1 id="安装PHP-7-2-12"><a href="#安装PHP-7-2-12" class="headerlink" title="安装PHP-7.2.12"></a>安装PHP-7.2.12</h1><ul>
<li>curl 要求 7.10.5+</li>
<li>区别于 –with-mysql , 这个版本的php用的是 –with-pdo-mysql ,而不是用 –with-mysql</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">./configure --prefix=/usr/local/php-7.2.12 --with-config-file-path=/usr/local/php-7.2.12/etc --with-bz2 --with-curl --enable-ftp --enable-sockets --disable-ipv6 --with-gd --with-jpeg-dir=/usr/local --with-png-dir=/usr/local --with-freetype-dir=/usr/local --with-iconv-dir=/usr/local --enable-mbstring --enable-calendar --with-gettext --with-libxml-dir=/usr/local --with-zlib --with-pdo-mysql=mysqlnd --with-mysqli=mysqlnd --enable-dom --enable-xml --enable-fpm --with-libdir=lib64 --enable-bcmath --enable-mbstring --with-gd  --with-libxml-dir=/usr/local --with-apxs2=/usr/local/httpd/bin/apxs</span><br><span class="line"></span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure>

<blockquote>
<p>因为要编译apache的php模块，所以一定要带上 –with-apxs2 参数。</p>
</blockquote>
<p>需要对 apache 的配置文件进行设置 ， httpd.conf , 默认在 &#x2F;usr&#x2F;local&#x2F;httpd&#x2F;conf&#x2F;httpd.conf 。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">添加解析问文件后缀</span></span><br><span class="line">AddType application/x-httpd-php .php .html .htm</span><br><span class="line"></span><br><span class="line">LoadModule php7_module modules/libphp7.so</span><br><span class="line"></span><br><span class="line">添加解析节点</span><br><span class="line">&lt;FileMatch \.php$&gt;</span><br><span class="line">    SetHandler application/x-httpd-php</span><br><span class="line">&lt;FileMatch&gt;</span><br></pre></td></tr></table></figure>

<p>设置几个必要参数 , 修改配置文件 &#x2F;etc&#x2F;php.ini</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看 php 的配置文件 php.ini 的路径</span></span><br><span class="line">./bin/php --ini</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">编辑 php.ini 文件</span></span><br><span class="line">vi /etc/php.ini</span><br><span class="line">---</span><br><span class="line">max_execution_time = 300</span><br><span class="line">memory_limit = 128M</span><br><span class="line">post_max_size = 16M</span><br><span class="line">upload_max_filesize = 2M</span><br><span class="line">max_input_time = 300</span><br><span class="line">date.timezone PRC</span><br><span class="line">---</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">修改完后，需要重启 web服务器 才能生效。</span></span><br><span class="line">/etc/init.d/httpd restart</span><br></pre></td></tr></table></figure>

<ul>
<li>php-fpm.conf 是 PHP-FPM特有的配置文件。</li>
<li>php.ini 是 PHP 解析器的配置文件。</li>
</ul>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><ol>
<li>wrong mysql library version or lib not found.</li>
</ol>
<ul>
<li>不指定对应的mysqli即可。</li>
</ul>
<ol start="2">
<li>ERROR: No pool defined. at least one pool section must be specified in confi</li>
</ol>
<ul>
<li>进入PHP安装目录&#x2F;etc&#x2F;php-fpm.d ，将<a target="_blank" rel="noopener" href="http://www.conf.default改名为www.conf/">www.conf.default改名为www.conf</a></li>
<li>这个是池的定义，默认的为www池。</li>
</ul>
<h1 id="安装-Mysql"><a href="#安装-Mysql" class="headerlink" title="安装 Mysql"></a>安装 Mysql</h1><p>解压源码包，执行编译安装。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">tar xf mariaDB-10.3.11.tar.gz</span><br><span class="line"></span><br><span class="line">cd mariaDB-10.3.11</span><br><span class="line"></span><br><span class="line">cmake . -DCMAKE_INSTALL_PREFIX=/usr/local/mariaDB-10.3.11 -DMYSQL_DATADIR=/usr/local/mariadb/DB-DATA/ -DSYSCONFDIR=/etc -DWITHOUT_TOKUDB=1 -DWITH_INNOBASE_STORAGE_ENGINE=1  -DMYSQL_UNIX_ADDR=/tmp/mysql.sock -DDEFAULT_CHARSET=utf8 -DDEFAULT_COLLATION=utf8_general_ci</span><br><span class="line"></span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">参数说明：</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">-DCMAKE_INSTALL_PREFIX是指定安装的位置</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">-DMYSQL_DATADIR是指定MySQL的数据目录</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">-DSYSCONFDIR是指定配置文件所在的目录，一般都是/etc ，具体的配置文件是/etc/my.cnf</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">-DWITHOUT_TOKUDB=1这个参数一般都要设置上，表示不安装tokudb引擎。</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">tokudb是MySQL中一款开源的存储引擎，可以管理大量数据并且有一些新的特性，这些是Innodb所不具备的，这里之所以不安装，是因为一般计算机默认是没有Percona Server的，并且加载tokudb还要依赖jemalloc内存优化，一般开发中也是不用tokudb的，所以暂时屏蔽掉。</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">将常用指令添加至环境变量中。</span></span><br><span class="line"></span><br><span class="line">vim /etc/profile</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">---profile---</span></span><br><span class="line">export PATH=&quot;/usr/local/mariaDB/bin:$PATH&quot;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">---profile---</span></span><br><span class="line"></span><br><span class="line">source /etc/profile</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">关于配置文件，默认安装中，mysql的配置文件放在 /etc/my.cnf 中，里面需要编辑，有关于服务端的配置。</span></span><br><span class="line"></span><br><span class="line">vim /etc/my.cnf</span><br><span class="line">---</span><br><span class="line">[mysqld]</span><br><span class="line">basedir=/usr/local/mariaDB-10.3.11</span><br><span class="line">port=3306</span><br><span class="line">socket=/tmp/mysqld.socket</span><br><span class="line">datadir=/db-data/</span><br><span class="line">log_error=/db-data/mariaDB-error.log</span><br><span class="line"></span><br><span class="line">[client]</span><br><span class="line">socket=/tmp/mysqld.socket</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">进入数据库</span></span><br><span class="line">/usr/local/mysqld/support-files/mysql.service start</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h2 id="遇到的问题-1"><a href="#遇到的问题-1" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><ol>
<li>无法看到报错日志。</li>
</ol>
<ul>
<li>需要自己手动创建报错日志文件 ，即 touch &#x2F;var&#x2F;log&#x2F;mariadb&#x2F;mariadb.log</li>
<li>没有配置mysqld的错误日志输出 log_error 参数未设置</li>
</ul>
<ol start="2">
<li>无法启动 mysql 服务 ，因为 mysql.user 表不存在。“Fatal error: Can’t open and lock privilege tables: Table ‘mysql.user’ doesn’t exist“</li>
</ol>
<ul>
<li>这个是因为列表没有初始化，导致数据库无法识别到相应的用户信息以及数据库信息。</li>
<li>检查方法：在 my.cnf 配置文件的 [mysqld] 节点中添加 skip-grant-tables , 就可以跳过检查 user 表进入数据库，可以看到里面并没有mysql这个库。</li>
<li>真正的解决方法是在编译安装完后，需要运行脚本 mysql_install_db</li>
</ul>
<p>下面是mysql进程所调用的路径</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql    120667  0.1  3.9 1281688 73040 pts/0   Sl   12:58   0:00 /usr/local/mysql/bin/mysqld --basedir=/usr/local/mysql --datadir=/usr/local/mysql/data --plugin-dir=/usr/local/mysql/lib/plugin --user=mysql --log-error=/usr/local/mysql/data/localhost.localdomain.err --pid-file=/usr/local/mysql/data/localhost.localdomain.pid</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>如果还是无法启动，请检查以下 mysql 目录下的用户权限。“ Cannot open ‘&#x2F;data&#x2F;mysql&#x2F;ib_buffer_pool’ for reading: Permission denied<br>”</li>
</ol>
<ul>
<li>因为使用mysql用户去启动这个进程，所有调用都是使用mysql去实现，因此必要的文件必须拥授权给mysql。</li>
</ul>
<ol start="4">
<li>启动遇到socket问题，无法连接 mysql.socket.</li>
</ol>
<ul>
<li>这是因为我已经修改了socket文件的命名，默认的是mysql.socket , 因此只需要在启动的时候指定 socket 即可 ， 加参数 -S 。</li>
</ul>
<h1 id="安装Zabbix-4-0-2"><a href="#安装Zabbix-4-0-2" class="headerlink" title="安装Zabbix-4.0.2"></a>安装Zabbix-4.0.2</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">./configure --prefix=/usr/local/zabbix-4.0.2/ --enable-server \</span><br><span class="line">--enable-agent --with-mysql --with-net-snmp --with-libcurl --with-libxml2</span><br><span class="line"></span><br><span class="line">make &amp;&amp; make install=</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">创建专门用于zabbix的账户</span></span><br><span class="line">useradd zabbix -s /sbin/nologin</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">初始化zabbix的数据库</span></span><br><span class="line">mysql -uroot -p -S /tmp/mysql.socket &lt; &#x27;create database zabbix default charset utf8&#x27;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">初始化数据库的表格</span></span><br><span class="line">mysql -uroot zabbix &lt; /data/zabbix-2.2.20/database/mysql/schema.sql</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">初始化sever</span></span><br><span class="line">mysql -uroot zabbix&lt; /data/zabbix-2.2.20/database/mysql/images.sql</span><br><span class="line">mysql -uroot zabbix&lt; /data/zabbix-2.2.20/database/mysql/data.sql</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">导入sql语句的时候，可能会提示没有找到数据库</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">自己手动往 schema.sql 、 images.sql 、 data.sql 上添加 use zabbix</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">配置zabbix_server</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">TODO ： 前端文件复制到 Apache 目录下</span></span><br><span class="line">mkdir /etc/zabbix</span><br><span class="line">cp config/zabbix_server.conf /etc/zabbix/</span><br><span class="line">vim /etc/zabbix/zabbix_server.conf</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">---zabbix_server.conf---#</span></span><br><span class="line">DBName=zabbix</span><br><span class="line">DBUser=root</span><br><span class="line">DBPassword=ttlsapwd</span><br><span class="line">DBPort=3306</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">---zabbix_server.conf---#</span></span><br></pre></td></tr></table></figure>

<p>Zabbix 初始账号和密码：</p>
<ul>
<li>Usr ： Admin</li>
<li>Pwd ： zabbix</li>
</ul>
<h2 id="遇到的问题-2"><a href="#遇到的问题-2" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><ol>
<li>configure: error: newly created file is older than distributed files!</li>
</ol>
<ul>
<li>硬件时钟、系统时间不一致导致的问题。</li>
</ul>
<ol start="2">
<li>进入web界面，初始化zabbix遇到以下问题。</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Minimum required size of PHP post is 16M (configuration option &quot;post_max_size&quot;).</span><br><span class="line">Minimum required limit on execution time of PHP scripts is 300 (configuration option &quot;max_execution_time&quot;).</span><br><span class="line">Time zone for PHP is not set (configuration parameter &quot;date.timezone&quot;).</span><br></pre></td></tr></table></figure>

<ul>
<li>这个需要修改 php.ini 文件。</li>
<li>timezone 是在 php-5.1 开始引入的东西，默认是关闭的，显示的时间是格林威治标准时间，和北京时间相差 8 个小时。</li>
</ul>
<h1 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h1><p>对于安装顺序的要求，是因为安装时会有关联，因此先执行以下的安装顺序较为妥当：</p>
<ol>
<li>安装 Apache</li>
<li>安装 Mysql</li>
<li>安装 PHP<ol>
<li>加上 axps 参数，指定apache路径</li>
</ol>
</li>
<li>安装 Zabbix</li>
</ol>
<p>Centos中对防火墙的使用并不是 iptables ， 而是 firewalld 因此在端口拦截方面要注意此应用。</p>
<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul>
<li>坑爹的网卡配置 ：<a target="_blank" rel="noopener" href="https://www.linuxidc.com/Linux/2017-04/143002.htm">https://www.linuxidc.com/Linux/2017-04/143002.htm</a></li>
<li>坑爹的网卡操作指令：<a target="_blank" rel="noopener" href="https://linux.cn/article-3631-1.html">https://linux.cn/article-3631-1.html</a></li>
<li>阿里源 <a target="_blank" rel="noopener" href="https://blog.csdn.net/jameshadoop/article/details/54881295">https://blog.csdn.net/jameshadoop/article/details/54881295</a></li>
<li>APR :<a target="_blank" rel="noopener" href="http://apr.apache.org/download.cgi">http://apr.apache.org/download.cgi</a> </li>
<li>Apache ： <a target="_blank" rel="noopener" href="https://archive.apache.org/dist/httpd/">https://archive.apache.org/dist/httpd/</a></li>
<li>开发套件安装 ：<a target="_blank" rel="noopener" href="https://www.linuxidc.com/Linux/2016-04/130081.htm">https://www.linuxidc.com/Linux/2016-04/130081.htm</a></li>
<li>Httpd 配置 ： <a target="_blank" rel="noopener" href="https://www.linuxidc.com/Linux/2016-04/130079.htm">https://www.linuxidc.com/Linux/2016-04/130079.htm</a></li>
<li>Apache-2.2 ：<a target="_blank" rel="noopener" href="http://httpd.apache.org/docs/2.2/">http://httpd.apache.org/docs/2.2/</a></li>
<li>Zabbix官方安装指引 ： <a target="_blank" rel="noopener" href="https://www.zabbix.com/cn/download?zabbix=4.0&os_distribution=centos&os_version=7&db=MySQL">https://www.zabbix.com/cn/download?zabbix=4.0&amp;os_distribution=centos&amp;os_version=7&amp;db=MySQL</a></li>
<li>MariaDB-10.3.11 : <a target="_blank" rel="noopener" href="https://downloads.mariadb.org/mariadb/10.3.11/">https://downloads.mariadb.org/mariadb/10.3.11/</a></li>
<li>MariaDB : <a target="_blank" rel="noopener" href="https://mariadb.com/kb/zh-cn/mariadb/">https://mariadb.com/kb/zh-cn/mariadb/</a></li>
<li>MariaDB-10.1.18源码安装：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/freeweb/p/5991374.html">https://www.cnblogs.com/freeweb/p/5991374.html</a></li>
<li>php 时区设置：<a target="_blank" rel="noopener" href="https://www.jb51.net/article/27821.htm">https://www.jb51.net/article/27821.htm</a></li>
<li>firewall-cmd : <a target="_blank" rel="noopener" href="https://www.jianshu.com/p/411274f96492">https://www.jianshu.com/p/411274f96492</a></li>
<li>PHP的配置文件 ： <a target="_blank" rel="noopener" href="https://blog.csdn.net/u012129607/article/details/71191489">https://blog.csdn.net/u012129607/article/details/71191489</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://github.com/rohman-zhu/posts/9181123c/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rohman.Zhu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="诺曼实验室">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 诺曼实验室">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/9181123c/" class="post-title-link" itemprop="url">启动错误-init配置文件错误</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2018-11-18 19:05:38" itemprop="dateCreated datePublished" datetime="2018-11-18T19:05:38+00:00">2018-11-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-12-22 05:27:49" itemprop="dateModified" datetime="2024-12-22T05:27:49+00:00">2024-12-22</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>进入 single mode 也要读取 &#x2F;etc&#x2F;inittab 来开机。如果无法进入单用户模式，改用 bash 。</p>
<h1 id="操作"><a href="#操作" class="headerlink" title="操作"></a>操作</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grub edit &gt; kernel /vmlinuz-2.6.18-92.e15 ro root=LABEL=/ rhgb quiet init=/bin/bash</span><br></pre></td></tr></table></figure>

<p>指定内核调用第一个进程（init）变成 &#x2F;bin&#x2F;bash  , 因此 &#x2F;sbin&#x2F;init 就不会被执行。</p>
<p>进入 bash 界面将根目录变成读写状态：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mount -o remount,rw /</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://github.com/rohman-zhu/posts/6d48d123/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rohman.Zhu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="诺曼实验室">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 诺曼实验室">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/6d48d123/" class="post-title-link" itemprop="url">Linux-忘记root密码</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2018-11-18 19:05:22" itemprop="dateCreated datePublished" datetime="2018-11-18T19:05:22+00:00">2018-11-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-12-22 05:27:48" itemprop="dateModified" datetime="2024-12-22T05:27:48+00:00">2024-12-22</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>有时候一台 Linux 虚拟机放太久了，又没有做注释，初始密码就容易忘记。</p>
<p>前提条件：</p>
<ul>
<li>MBR + Grub 的方式引导系统启动。</li>
</ul>
<h1 id="CentOS密码忘记"><a href="#CentOS密码忘记" class="headerlink" title="CentOS密码忘记"></a>CentOS密码忘记</h1><ul>
<li>进入 grub 菜单后，对想要编辑的菜单项按 [E] 键编辑；</li>
<li>再将光标移到 Kernel 上方再点 [E] 键编辑；</li>
<li>在末尾添加 single ：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grub edit &gt; kernel /vmlinuz-2.6.18-92.e15 ro root=LABEL=/ rhgb quiet single</span><br></pre></td></tr></table></figure>

<ul>
<li>按 [回车] 键后， 按 [B] 键即可进入单用户维护模式了。</li>
</ul>
<h1 id="Ubuntu-进入恢复模式"><a href="#Ubuntu-进入恢复模式" class="headerlink" title="Ubuntu 进入恢复模式"></a>Ubuntu 进入恢复模式</h1><ul>
<li>开机长按 [Shift] 键进入 grub 菜单；</li>
<li>进入高级菜单 [Advanced options for Ubuntu] ；</li>
<li>选择任意一个恢复模式；</li>
<li>选择 “root Drop to root shell prompt”;</li>
<li>重新挂载 &#x2F; 目录 ， mount -o remount,rw &#x2F;</li>
<li>再去修改密码。</li>
</ul>
<h1 id="Ubuntu-修改内核启动参数"><a href="#Ubuntu-修改内核启动参数" class="headerlink" title="Ubuntu 修改内核启动参数"></a>Ubuntu 修改内核启动参数</h1><ul>
<li>开机长按 [Shift] 键进入 grub 菜单；</li>
<li>进入高级菜单 [Advanced options for Ubuntu] ；</li>
<li>选择任意一个恢复模式,按 [E] 键编辑；</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">将 linux 那一行的末尾 ro single 改成 rw single init=/bin/bash</span></span><br><span class="line">rw single init=/bin/bash</span><br></pre></td></tr></table></figure>

<ul>
<li>按 [Ctrl] + [X] 进入单用户模式，修改密码。</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://github.com/rohman-zhu/posts/5c44fcdc/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rohman.Zhu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="诺曼实验室">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 诺曼实验室">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/5c44fcdc/" class="post-title-link" itemprop="url">为Grub菜单添加密码</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2018-11-18 19:03:10" itemprop="dateCreated datePublished" datetime="2018-11-18T19:03:10+00:00">2018-11-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-12-22 05:27:49" itemprop="dateModified" datetime="2024-12-22T05:27:49+00:00">2024-12-22</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://github.com/rohman-zhu/posts/d244349e/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rohman.Zhu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="诺曼实验室">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 诺曼实验室">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/d244349e/" class="post-title-link" itemprop="url">BIOS 无法读取大硬盘的问题</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2018-11-18 19:02:21" itemprop="dateCreated datePublished" datetime="2018-11-18T19:02:21+00:00">2018-11-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-12-22 05:27:47" itemprop="dateModified" datetime="2024-12-22T05:27:47+00:00">2024-12-22</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://github.com/rohman-zhu/posts/97711d3f/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rohman.Zhu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="诺曼实验室">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 诺曼实验室">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/97711d3f/" class="post-title-link" itemprop="url">ToDo-修复因缺少initrd而无法启动的grub程序</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2018-11-18 18:20:44" itemprop="dateCreated datePublished" datetime="2018-11-18T18:20:44+00:00">2018-11-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-12-22 05:27:48" itemprop="dateModified" datetime="2024-12-22T05:27:48+00:00">2024-12-22</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://github.com/rohman-zhu/posts/a57385a9/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rohman.Zhu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="诺曼实验室">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 诺曼实验室">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/a57385a9/" class="post-title-link" itemprop="url">待补充-Boot Loader:Grub</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2018-11-17 23:03:01" itemprop="dateCreated datePublished" datetime="2018-11-17T23:03:01+00:00">2018-11-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-12-22 05:27:49" itemprop="dateModified" datetime="2024-12-22T05:27:49+00:00">2024-12-22</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><ul>
<li>在BIOS 读完信息后，第一启动设备的MBR会去读取boot loader 。</li>
<li>boot loader 具有菜单功能、直接加载内核文件 以及 控制权移交的功能等，系统必须要有 loader 才有办法加载该操作系统的内核。</li>
<li>MBR 是整个硬盘的第一个 sector 内的一个块，充其量整个大小也才446bytes。</li>
</ul>
<p><img src="https://images0.cnblogs.com/blog/432441/201305/19135459-4ac4e5873a42476c95a02460464449d5.jpg" alt="启动顺序"></p>
<p>测试环境：</p>
<ul>
<li>CentOS 6.9</li>
</ul>
<h1 id="TODO-LIST"><a href="#TODO-LIST" class="headerlink" title="TODO-LIST"></a>TODO-LIST</h1><ul>
<li>两块硬盘，每一块硬盘都装有不同的系统，编写双系统启动grub引导文件。</li>
<li>当从一块没有系统的硬盘（只装有grub的硬盘）启动，如何快速修复进入系统）[完成时间：2018-11-18]</li>
<li>第二块盘上面的grub配置文件有误，如何快速进入系统[完成时间：2018-11-18]</li>
<li>修复Ubuntu下的无法启动问题。</li>
<li>修复采用LVM分区方式的Ubuntu无法启动问题。</li>
</ul>
<h1 id="Linux中的解决方案"><a href="#Linux中的解决方案" class="headerlink" title="Linux中的解决方案"></a>Linux中的解决方案</h1><p>Linux将boot loader的程序代码执行与设置值加载分成两个阶段（stage）</p>
<h2 id="Stage-1-：-执行boot-loader-主程序"><a href="#Stage-1-：-执行boot-loader-主程序" class="headerlink" title="Stage 1 ： 执行boot loader 主程序"></a>Stage 1 ： 执行boot loader 主程序</h2><p>这个主程序必须安装在启动区 ， 即 MBR或者 boot sector 。 不过由于 MBR 实在太小了， 因此 MBR 或者 boot sector 通常仅安装 boot loader 的最小主程序 ， 并没有安装 loader 的相关配置文件。</p>
<h2 id="Stage-2-：-主程序加载配置文件"><a href="#Stage-2-：-主程序加载配置文件" class="headerlink" title="Stage 2 ： 主程序加载配置文件"></a>Stage 2 ： 主程序加载配置文件</h2><p>通过boot loader加载所有配置文件与相关的环境参数文件（包括文件系统定义与主要配置文件menu.lst) , 一般在 &#x2F;boot 下面。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">与Grub有关的文件都放在 /boot/grub 中</span></span><br><span class="line">[root@OrigialCentOS ~]# ll /boot/grub/</span><br><span class="line">总用量 274</span><br><span class="line">-rw-r--r--. 1 root root     63 11月  9 2017 device.map  # grub 的设备对应文件</span><br><span class="line">-rw-r--r--. 1 root root  13428 11月  9 2017 e2fs_stage1_5 # ext2/ext3 文件系统的定义文件</span><br><span class="line">-rw-r--r--. 1 root root  12636 11月  9 2017 fat_stage1_5 # fat 文件系统的定义文件</span><br><span class="line">-rw-r--r--. 1 root root  11780 11月  9 2017 ffs_stage1_5 # ffs 文件系统的定义文件</span><br><span class="line">-rw-------. 1 root root    771 11月  9 2017 grub.conf # grub 在 Centos中的配置文件</span><br><span class="line">-rw-r--r--. 1 root root  11772 11月  9 2017 iso9660_stage1_5 # 光驱文件系统的定义文件</span><br><span class="line">-rw-r--r--. 1 root root  13284 11月  9 2017 jfs_stage1_5 # jfs 文件系统的定义文件</span><br><span class="line">lrwxrwxrwx. 1 root root     11 11月  9 2017 menu.lst -&gt; ./grub.conf # menu.lst 配置文件</span><br><span class="line">-rw-r--r--. 1 root root  11972 11月  9 2017 minix_stage1_5 # minix 文件系统定义文件</span><br><span class="line">-rw-r--r--. 1 root root  14428 11月  9 2017 reiserfs_stage1_5 # reiserfs 文件系统的定义文件</span><br><span class="line">-rw-r--r--. 1 root root   1341 11月 15 2010 splash.xpm.gz # 启动时 在 grub 下面的后台图示</span><br><span class="line">-rw-r--r--. 1 root root    512 11月  9 2017 stage1 # stage 1 的相关说明</span><br><span class="line">-rw-r--r--. 1 root root 126148 11月  9 2017 stage2 # stage 2 的相关说明</span><br><span class="line">-rw-r--r--. 1 root root  12040 11月  9 2017 ufs2_stage1_5 # ufs 的文件系统定义文件</span><br><span class="line">-rw-r--r--. 1 root root  11380 11月  9 2017 vstafs_stage1_5 # vstafs 的文件系统定义文件</span><br><span class="line">-rw-r--r--. 1 root root  13980 11月  9 2017 xfs_stage1_5 # xfs 文件系统的定义文件</span><br></pre></td></tr></table></figure>

<p>上面中 ， 最重要的配置文件为 menu.lst 。（Red hat 定义为 &#x2F;boot&#x2F;grub.conf) </p>
<h1 id="Grub"><a href="#Grub" class="headerlink" title="Grub"></a>Grub</h1><p>Grub 是目前使用最广泛的 Linux 引导装载程序 ， 有以下几个优点 ： </p>
<ul>
<li>认识与支持较多的文件系统 ， 并且可以使用该grub的主程序直接在文件系统中查询内核文件名。</li>
<li>启动的时候，可以自行编辑与修改启动设置选项，类似bash的命令模式。</li>
<li>可以动态查找配置文件，而不需要修改配置文件后重新安装 grub 。 只需要修改 &#x2F;boot&#x2F;grub&#x2F;menu.lst 后重启生效。</li>
<li>安装在 MBR 的 grub 主要任务是加载内核文件，以让内核能够驱动整个系统的硬件。</li>
<li>grub 与 硬盘分区代号<ul>
<li>(hd0,0)</li>
<li>硬盘代号以 () 括起</li>
<li>硬盘以hd表示 ， 后面会接一组数字</li>
<li>以“查找顺序”作为硬盘的编号，而不是依照硬盘扁平电缆的排序（重点！）</li>
<li>第一个查找的硬盘编号为0号</li>
<li>每块硬盘的第一个分区号为0</li>
</ul>
</li>
<li>第一块硬盘的第一个逻辑分区的boot sector 代号为 (hd0,4)</li>
</ul>
<blockquote>
<p>使用SATA 磁盘，加上使用逻辑分区，Linux当中的文件名为&#x2F;dev&#x2F;sda5 (1-4保留给 primary 和 extended 使用)。 对应grub 的磁盘代号为 （hd0，4） ， 注意因为代号是从0开始，所以是4，而不是5.</p>
</blockquote>
<h2 id="menu-lst-配置文件"><a href="#menu-lst-配置文件" class="headerlink" title="menu.lst 配置文件"></a>menu.lst 配置文件</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@OrigialCentOS ~]# cat /boot/grub/menu.lst </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">grub.conf generated by anaconda</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># Note that you do not have to rerun grub after making changes to this file</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">NOTICE:  You have a /boot partition.  This means that</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">         all kernel and initrd paths are relative to /boot/, eg.</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">         root (hd0,0)</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">         kernel /vmlinuz-version ro root=/dev/sda3</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">         initrd /initrd-[generic-]version.img</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">boot=/dev/sda</span></span><br><span class="line">default=0 # 默认启动选项，使用第一个启动菜单（title）</span><br><span class="line">timeout=5 # 超时5s</span><br><span class="line">splashimage=(hd0,0)/grub/splash.xpm.gz # 后台图示所在的文件</span><br><span class="line">hiddenmenu # 读秒期间是否显示出完整菜单（默认隐藏）</span><br><span class="line">title CentOS 6 (2.6.32-696.el6.x86_64) # 第一个菜单的内容</span><br><span class="line">	root (hd0,0)</span><br><span class="line">	kernel /vmlinuz-2.6.32-696.el6.x86_64 ro root=UUID=4c170fc7-b150-4dde-8bb4-6987741f6fd1 rd_NO_LUKS rd_NO_LVM LANG=en_US.UTF-8 rd_NO_MD SYSFONT=latarcyrheb-sun16 crashkernel=auto  KEYBOARDTYPE=pc KEYTABLE=us rd_NO_DM rhgb quiet</span><br><span class="line">	initrd /initramfs-2.6.32-696.el6.x86_64.img</span><br></pre></td></tr></table></figure>

<ul>
<li>default ， 默认从第几个菜单启动， 从0开始。</li>
<li>timeout ，单位为s ， 设置为0表示直接使用 default值进行启动而不读秒；设置为 -1 表示进入菜单不读秒。</li>
<li>title 后面是指定启动的内核文件或者是 boot loader 控制权。</li>
<li>splashimage &#x3D; (hd0,0)&#x2F;grub&#x2F;splash.xpm.gz , 提供后台图示。</li>
<li>hiddenmenu ， 如果要显示完整菜单，则注释掉此行。</li>
<li>指定内核启动<ul>
<li>先指定内核文件放置的分区 ，再读取文件（目录树），最后才加入文件的实际文件名和路径 （ kernel 与 initrd）</li>
<li>root (hd0,0) 代表内核文件放在哪一个分区中<ul>
<li>root 代表 的是内核文件放置的那个分区 ，而不是根目录 。</li>
</ul>
</li>
<li>kernel kernel &#x2F;vmlinuz-2.6.32-696.el6.x86_64 ro root&#x3D;UUID&#x3D;4c170fc7-b150-4dde-8bb4-6987741f6fd1 rd_NO_LUKS rd_NO_LVM LANG&#x3D;en_US.UTF-8 rd_NO_MD SYSFONT&#x3D;latarcyrheb-sun16 crashkernel&#x3D;auto  KEYBOARDTYPE&#x3D;pc KEYTABLE&#x3D;us rd_NO_DM rhgb quiet<ul>
<li>kernel 接的是内核的文件名 ， 文件名后面接的是内核的参数 。</li>
<li>root&#x3D;UUID ， 指的是Linux的根目录在哪一个分区的意思。这里采用的UUID来挂载根目录。</li>
<li>rhgb （redhat graphics boot） 为色彩显示 </li>
<li>rd_NO_LVM 禁用LVM</li>
<li>rd_NO_LUKS</li>
<li>SYSFONT</li>
<li>crashkernel</li>
<li>rd_NO_DM</li>
<li>quiet 是 安静模式 （屏幕不会输入内核检测信息）</li>
</ul>
</li>
<li>initrd &#x2F;initramfs-2.6.32-696.el6.x86_64.img</li>
</ul>
</li>
</ul>
<h2 id="利用-chain-loader的方式转交控制权-，即-双系统的启动方式-。"><a href="#利用-chain-loader的方式转交控制权-，即-双系统的启动方式-。" class="headerlink" title="利用 chain loader的方式转交控制权 ，即 双系统的启动方式 。"></a>利用 chain loader的方式转交控制权 ，即 双系统的启动方式 。</h2><p>chain loader（引导装载程序的连接） 仅是 将控制权交给下一个boot loader而已 。</p>
<ul>
<li>预计要前往的boot sector 所在的分区代号。</li>
<li>chain loader 在的那个分区的boot sector （一般为第一个扇区）</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">应用场景 ， 假设 Windows分区在dev/hda1 ，仅有一块硬盘</span> </span><br><span class="line">title Windows partition</span><br><span class="line">    root (hd0,0)</span><br><span class="line">    # 如果我的/dev/hda5 是安装Linux的分区，不想让Windows识别到这个分区。</span><br><span class="line">    hide (hd0,4)</span><br><span class="line">    # +1 可以认为是第一个扇区 ，即 boot sector</span><br><span class="line">    chainloader +1 </span><br><span class="line">    # 由于Windows的系统盘需要设置为活动（active）状态 ，并且 grub 默认会去检查该分区的文件系统</span><br><span class="line">    makeactive </span><br><span class="line">    </span><br></pre></td></tr></table></figure>

<h1 id="initrd"><a href="#initrd" class="headerlink" title="initrd"></a>initrd</h1><p>initrd 启动过程中提供所需要的最重要内核模块，以便系统启动过程顺利完成。</p>
<p>而需要 initrd 的原因：</p>
<ul>
<li>内核模块放置于 &#x2F;lib&#x2F;modules&#x2F;$(uname -r)&#x2F;kernel&#x2F;当中 ， 这些模块必须要根目录(&#x2F;)被挂在时才能够被读取。<ul>
<li>如果内核本身不具备磁盘的驱动程序时，时无法挂载根目录的，也没有办法取得驱动程序。</li>
<li>部分服务器的RAID驱动并没有集成到内核中，因此开机过程中会提示没有找到启动目录。</li>
</ul>
</li>
<li>initrd 可以将&#x2F;lib&#x2F;modules&#x2F;…内的启动过程中一定需要的模块打包成一个文件（文件名为initrd）。<ul>
<li>然后再启动时通过主机的int13 硬件功能 将该文件读取出来解压缩，并且initrd在内存内会仿真成根目录 。</li>
<li>由于虚拟文件系统（Initial RAM Disk） 主要包含磁盘与文件系统的模块，所以内核最后才能对实际硬盘进行根目录挂载 操作。  </li>
<li>initrd 内所包含的模块大多都与启动过程有关，而主要以文件系及硬盘模块（usb、SCSI等）为主的。</li>
<li>一般需要initrd的时刻为<ul>
<li>根目录所在的磁盘为 SATA 、 USB | SCSI 等连接接口</li>
<li>根目录所在文件系统为LVM 、 RAID 等特殊格式</li>
<li>根目录所在文件系统为非创痛LINUX “认识” 的文件系统</li>
<li>其他必须在内核加载时系统的模块</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="mkinitrd"><a href="#mkinitrd" class="headerlink" title="mkinitrd"></a>mkinitrd</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">mkinitrd [-v] [--with=模块名称] initrd文件名 内核版本</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">-v 显示mkinitrd 运行过程</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">--with 模块名称 ： 指模块的名字 ，不需要写完整路径</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">内核版本 ，当前的内核版本就写上 $(<span class="built_in">uname</span> -r)</span></span><br></pre></td></tr></table></figure>

<h1 id="测试安装-grub"><a href="#测试安装-grub" class="headerlink" title="测试安装 grub"></a>测试安装 grub</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">grub-install [--root-directory=DIR] INSTALL_DEVICE</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">--root-directory 为设置实际目录。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">使用grub-install默认会将grub所有的文件都复制到/boot/grub/*。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">如果想要更改目录，则需要使用这个参数。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">INSTALL_DEVICE 为安装的设备代号</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">案例1 ： 将 grub 安装在目前系统的MBR下面</span> </span><br><span class="line">grub-install /dev/hda</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">案例2 ： /home.test 为独立的 /dev/sdb1 , 将grub安装到 /dev/sdb1</span></span><br><span class="line">grub-install --root-directory=/home.test /dev/sdb1</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">Probing devices to guess BIOS drives. This may take a long time.</span><br><span class="line">Installation finished. No error reported.</span><br><span class="line">This is the contents of the device map /home.test/boot/grub/device.map.</span><br><span class="line">Check if this is correct or not. If any of the lines is incorrect,</span><br><span class="line">fix it and re-run the script `grub-install&#x27;.</span><br><span class="line"></span><br><span class="line">(fd0)	/dev/fd0</span><br><span class="line">(hd0)	/dev/sda</span><br><span class="line">(hd1)	/dev/sdb</span><br><span class="line">-</span><br></pre></td></tr></table></figure>

<p>这个在两个硬盘上的第一个分区都装有grub ， 需要从第二块硬盘上面启动的时候，才能生效。</p>
<h2 id="第二块盘上面只有grub，如何快速进入系统"><a href="#第二块盘上面只有grub，如何快速进入系统" class="headerlink" title="第二块盘上面只有grub，如何快速进入系统"></a>第二块盘上面只有grub，如何快速进入系统</h2><p>因为第二快盘只有 grub ，开机启动只有grub shell ，是因为grub没有配置好所导致的问题，现在无法进入系统。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># 正常情况下为：</span><br><span class="line"># 从有操作系统的磁盘启动 </span><br><span class="line"># Linux 显示 ： /dev/sda</span><br><span class="line"># grub 检测显示： hd0</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line"># 故障情况</span><br><span class="line"># 修改启动顺序，从一块没有操作系统的磁盘启动</span><br><span class="line"># Linux 显示 ： /dev/sdb</span><br><span class="line"># grub 显示 ： hd0</span><br><span class="line"># 【正确的系统盘】在grub 显示为 ： hd1</span><br><span class="line"></span><br><span class="line">root (hd1,0)</span><br><span class="line"># kernel 参数中必须挂上root目录，否则系统无法启动 </span><br><span class="line">kernel/vmlinuz-2.6.32-696.el6.x86_64 ro root=UUID=4c170fc7-b150-4dde-8bb4-6987741f6fd1</span><br><span class="line"># 挂载内核模块</span><br><span class="line">initrd /initramfs-2.6.32-696.el6.x86_64.img</span><br><span class="line">boot</span><br></pre></td></tr></table></figure>

<h2 id="第二块盘上面的grub配置文件有误，如何快速进入系统"><a href="#第二块盘上面的grub配置文件有误，如何快速进入系统" class="headerlink" title="第二块盘上面的grub配置文件有误，如何快速进入系统"></a>第二块盘上面的grub配置文件有误，如何快速进入系统</h2><p>主要查看两点：</p>
<ul>
<li>路径（root ， kernel ， initrd）是否正确，是否选择有操作系统的boot sector</li>
<li>kernel 中是否有选中root目录。（这个有报错提示的）<ul>
<li>指定root目录三种方法：<ul>
<li>LABEL方法：前提是要设置了label ， root&#x3D;LABEL&#x3D;myRoot</li>
<li>UUID方法：前提是要知道UUID，root&#x3D;UUID&#x3D;…..</li>
<li>指定分区 ： 前提是要知道根目录在哪一个分区 ,root&#x3D;&#x2F;dev&#x2F;sda3</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul>
<li>《鸟哥的Linux私房菜（第三版）》</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://github.com/rohman-zhu/posts/1be89a35/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rohman.Zhu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="诺曼实验室">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 诺曼实验室">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/1be89a35/" class="post-title-link" itemprop="url">内核学习笔记</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2018-11-15 22:43:10" itemprop="dateCreated datePublished" datetime="2018-11-15T22:43:10+00:00">2018-11-15</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-12-22 05:27:49" itemprop="dateModified" datetime="2024-12-22T05:27:49+00:00">2024-12-22</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>内核即Kernel ， 控制主机的所有硬件并提供系统所有的功能。一般Linux启动过程是利用开机管理程序加载这个内核文件来检测硬件 ， 在内核加载合适的驱动程序后，系统才能够正常启动。</p>
<ul>
<li>内核（Kernel）是一个文件 ，通常放置在 &#x2F;boot&#x2F;vmlinuz 中 ，一台Linux中可以有多个内核文件，只是开机的时候仅加载其中一个而已。</li>
<li>内核模块（Kernel Module）通常是一些不常用的类似驱动程序的内容独立出内核，编译成模块，系统在运行过程中加载这个模块得到内核的支持。通常放在 &#x2F;lib&#x2F;modules&#x2F;$(uname -r)&#x2F;kernel&#x2F;当中。</li>
<li>内核是通过源代码(Source Code)编译而成的，内核是直接被读入内存当中的。</li>
</ul>
<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul>
<li>《鸟哥的Linux私房菜（第三版）》</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="Previous page" aria-label="Previous page" href="/page/34/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/34/">34</a><span class="page-number current">35</span><a class="page-number" href="/page/36/">36</a><span class="space">&hellip;</span><a class="page-number" href="/page/46/">46</a><a class="extend next" rel="next" title="Next page" aria-label="Next page" href="/page/36/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Rohman.Zhu</span>
  </div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  

  <script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":"light","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mermaid/11.4.0/mermaid.min.js","integrity":"sha256-G8ouPAnw4zzMbnAenHnVz6h9XpKbNdOkrqTh7AadyHs="}}</script>
  <script src="/js/third-party/tags/mermaid.js"></script>





  





</body>
</html>
