<!DOCTYPE html>
<html lang="zh_cn">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha256-5eIC48iZUHmSlSUz9XtjRyK2mzQkHScZY1WdMaoz74E=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"github.com","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.21.1","exturl":false,"sidebar":{"position":"right","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

    <meta property="og:type" content="website">
<meta property="og:title" content="诺曼实验室">
<meta property="og:url" content="http://github.com/rohman-zhu/page/16/index.html">
<meta property="og:site_name" content="诺曼实验室">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Rohman.Zhu">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://github.com/rohman-zhu/page/16/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh_cn","comments":"","permalink":"","path":"page/16/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>诺曼实验室</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="stylesheet" href="/css/prism.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">诺曼实验室</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Rohman.Zhu</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">430</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">44</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">143</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://github.com/rohman-zhu/2022/01/04/Horizon-Client%E6%8F%90%E7%A4%BA%E8%BF%9C%E7%A8%8B%E6%A1%8C%E9%9D%A2%E5%B7%B2%E6%96%AD%E5%BC%80/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rohman.Zhu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="诺曼实验室">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 诺曼实验室">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/01/04/Horizon-Client%E6%8F%90%E7%A4%BA%E8%BF%9C%E7%A8%8B%E6%A1%8C%E9%9D%A2%E5%B7%B2%E6%96%AD%E5%BC%80/" class="post-title-link" itemprop="url">Horizon Client提示远程桌面已断开</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2022-01-04 22:27:26 / Modified: 14:33:07" itemprop="dateCreated datePublished" datetime="2022-01-04T22:27:26+00:00">2022-01-04</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/VMware/" itemprop="url" rel="index"><span itemprop="name">VMware</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/VMware/Horizon-View/" itemprop="url" rel="index"><span itemprop="name">Horizon View</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="故障现象"><a href="#故障现象" class="headerlink" title="故障现象"></a>故障现象</h1><p>用户端使用VMware Horizon Client登录后，打开其中发布的VDI或者RDSH应用，提示“远程桌面已断开”。</p>
<h1 id="原因分析"><a href="#原因分析" class="headerlink" title="原因分析"></a>原因分析</h1><h2 id="原因一–服务端防火墙拦截"><a href="#原因一–服务端防火墙拦截" class="headerlink" title="原因一–服务端防火墙拦截"></a>原因一–服务端防火墙拦截</h2><p>服务端的防火墙拦截，例如连接服务器与Horizon View Agent之间防火墙拦截、安全服务器或UAG与Horizon View Agent之间的防火墙拦截。</p>
<p>使用Blast网关或者PCoIP网关的情况下，防火墙如下：</p>
<p>SRC:UAG\Connection Server\Security Server<br>DST:Horizon View Agent<br>TCP:22443(Blast)\4172(PCoIP)<br>UDP:2443(Blast)\4172(PCoIP)</p>
<p>检测方法，可以使用WEB端访问，如果可以访问，则说明Blast协议所需的防火墙已开通。</p>
<h2 id="原因二–客户端异常"><a href="#原因二–客户端异常" class="headerlink" title="原因二–客户端异常"></a>原因二–客户端异常</h2><p>本地客户端VMware Horizon View Client有异常，需要卸载重装。</p>
<h1 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h1><h2 id="原因一-–-申请防火墙即可。"><a href="#原因一-–-申请防火墙即可。" class="headerlink" title="原因一 – 申请防火墙即可。"></a>原因一 – 申请防火墙即可。</h2><h2 id="原因二-–-卸载客户端重装。"><a href="#原因二-–-卸载客户端重装。" class="headerlink" title="原因二 – 卸载客户端重装。"></a>原因二 – 卸载客户端重装。</h2><p>需要将原来Horizon View里面的文件均删除，如AppData中的文件夹。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://github.com/rohman-zhu/2021/12/01/%E5%85%89%E7%BA%A4%E8%B7%B3%E7%BA%BF%E6%8E%A5%E5%A4%B4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rohman.Zhu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="诺曼实验室">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 诺曼实验室">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/12/01/%E5%85%89%E7%BA%A4%E8%B7%B3%E7%BA%BF%E6%8E%A5%E5%A4%B4/" class="post-title-link" itemprop="url">光纤跳线接头</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2021-12-01 23:19:19 / Modified: 15:40:48" itemprop="dateCreated datePublished" datetime="2021-12-01T23:19:19+00:00">2021-12-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/default/" itemprop="url" rel="index"><span itemprop="name">default</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="传输距离标识"><a href="#传输距离标识" class="headerlink" title="传输距离标识"></a>传输距离标识</h1><table>
<thead>
<tr>
<th align="center">类型</th>
<th align="center">纤径(μm)</th>
<th align="center">光纤类型</th>
<th align="center">1 Gigabit 以太网 1000BASE-SX</th>
<th align="center">1 Gigabit 以太网 1000BASE-LX</th>
<th align="center">10Gbps 以太网  10GBASE</th>
<th align="center">40Gbps 以太网 40GBASE SR4</th>
<th align="center">100Gbps 以太网  100GBASE SR4</th>
</tr>
</thead>
<tbody><tr>
<td align="center">OM1</td>
<td align="center">62.5&#x2F;125</td>
<td align="center">多模</td>
<td align="center">275m</td>
<td align="center">550m</td>
<td align="center">33m</td>
<td align="center">Not supported</td>
<td align="center">Not supported</td>
</tr>
<tr>
<td align="center">OM2</td>
<td align="center">50&#x2F;125</td>
<td align="center">多模</td>
<td align="center">550m</td>
<td align="center">550m</td>
<td align="center">82m</td>
<td align="center">Not supported</td>
<td align="center">Not supported</td>
</tr>
<tr>
<td align="center">OM3(激光优化)</td>
<td align="center">50&#x2F;125</td>
<td align="center">多模</td>
<td align="center">550m</td>
<td align="center">550m</td>
<td align="center">300m</td>
<td align="center">100m(SR4)</td>
<td align="center">100m(SR4)</td>
</tr>
<tr>
<td align="center">OM4(激光优化)</td>
<td align="center">50&#x2F;125</td>
<td align="center">多模</td>
<td align="center">550m</td>
<td align="center">550m</td>
<td align="center">400m</td>
<td align="center">150m(SR4)</td>
<td align="center">150m(SR4)</td>
</tr>
<tr>
<td align="center">单模</td>
<td align="center">9&#x2F;125</td>
<td align="center">单模</td>
<td align="center">5km at 1310nm</td>
<td align="center">5km at 1310nm</td>
<td align="center">10km at 1310nm</td>
<td align="center">N&#x2F;A</td>
<td align="center">N&#x2F;A</td>
</tr>
</tbody></table>
<h1 id="接口类型"><a href="#接口类型" class="headerlink" title="接口类型"></a>接口类型</h1><ul>
<li><p>FC型又分为FC&#x2F;FC和FC&#x2F;PC(APC)型，前一个FC 是Ferrule Connector 的缩写，表明其外部加强件是采用金属套，紧固方式为螺丝扣；后面的FC 表明接头的对接方式为平面对接，PC 是Physical Connection 的缩写，表明其对接端面是物理接触，即端面呈凸面拱型结构，APC和PC类似，但采用了特殊的研磨方式，PC是球面，APC是斜8度球面，指标要比PC好些。目前电信网常用的是FC&#x2F;PC型，FC&#x2F;APC多用于有线电视系统。一般写成FC或PC均是指FC&#x2F;PC光连接器。</p>
</li>
<li><p>SC型其外壳采用模塑工艺，用铸模玻璃纤维塑料制成，呈矩型；插头套管（也称插针）由精密陶瓷制成，耦合套筒为金属开缝套管结构，其结构尺寸与FC 型相同，端面处理采用PC 或APC 型研磨方式；紧固方式是采用插拔销闩式，不需旋转头。常用于在数据工程中使用。一般SC型均指SC&#x2F;PC。由日本NTT公司开发的光纤连接器。其外壳呈矩形，所采用的插针与耦合套筒的结构尺寸与FC型完全相同。其中插针的端面多采用PC或APC型研磨方式；紧固方式是采用插拔销闩式，不需旋转。此类连接器价格低廉，插拔操作方便，介入损耗波动小，抗压强度较高，安装密度高。ST和SC接口是光纤连接器的两种类型，对于10Base-F连接来说，连接器通常是ST类型的，对于100Base-FX来说，连接器大部分情况下为SC类型的。ST连接器的芯外露，SC连接器的芯在接头里面。</p>
</li>
<li><p>LC光纤连接器采用模块化插孔(RJ)机理制成。其所采用的插针和套桶的尺寸是普通SC，FC等尺寸的一半。LC常见于通信设备的高密度的光接口板上。LC型连接器是著名Bell（贝尔）研究所研究开发出来的，采用操作方便的模块化插孔（RJ）闩锁机理制成。其所采用的插针和套筒的尺寸是普通SC、FC等 所用尺寸的一半，为1.25mm。这样可以提高光纤配线架中光纤连接器的密度。目前，在单模SFF方面，LC类型的连接器实际已经占据了主导地位，在多模 方面的应用也增长迅速。</p>
</li>
<li><p>MT-RJ ( (Mechanical Transfer Registered Jack) 起步于NTT开发的MT连接器，带有与RJ-45型LAN电连接器相同的闩锁机构，通过安装于小型套管两侧的导向销对准光纤，为便于与光收发信机相连，连接器端面光纤为双芯（间隔0.75mm）排列设计，是主要用于数据传输的下一代高密度光纤连接器。</p>
</li>
<li><p>MU型连接器 MU（Miniature unit Coupling）连接器是以目前使用最多的SC型连接器为基础，由NTT研制开发出来的世界上最小的单芯光纤连接器，。该连接器采用1.25mm直径的套管和自保持机构，其优势在于能实现高密度安装。利用MU的l.25mm直径的套管，NTT已经开发了MU连接器系列。它们有用于光缆连接的插座型连接器 （MU-A系列）；具有自保持机构的底板连接器（MU-B系列）以及用于连接LD／PD模块与插头的简化插座（MU-SR系列）等。随着光纤网络向更大带 宽更大容量方向的迅速发展和DWDM技术的广泛应用，对MU型连接器的需求也将迅速增长。</p>
</li>
</ul>
<blockquote>
<p>服务器万兆网卡与万兆交换机用的比较多的也是LC接口。</p>
</blockquote>
<h1 id="常规外观"><a href="#常规外观" class="headerlink" title="常规外观"></a>常规外观</h1><p>单模光纤(Single-mode Fiber)：一般光纤跳线用黄色表示，接头和保护套为蓝色；传输距离较长。</p>
<p>单模光纤(SMF，Single Mode Fiber)，纤芯较细，只能传一种模式的光。因此，其模间色散很小，适用于远程通讯。</p>
<p>多模光纤(Multi-mode Fiber)：一般光纤跳线用橙色表示，也有的用灰色表示，接头和保护套用米色或者黑色；传输距离较短。</p>
<p>多模光纤(MMF，Multi Mode Fiber)，纤芯较粗，可传多种模式的光。但其模间色散较大，且随传输距离的增加模间色散情况会逐渐加重。多模光纤的传输距离还与其传输速率、芯径、模式带宽有关。</p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/lxm920714/article/details/97805754">https://blog.csdn.net/lxm920714/article/details/97805754</a><br><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/362645221">https://zhuanlan.zhihu.com/p/362645221</a><br><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/54226120">https://zhuanlan.zhihu.com/p/54226120</a><br><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/43982599">https://zhuanlan.zhihu.com/p/43982599</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://github.com/rohman-zhu/2021/12/01/%E5%BF%98%E8%AE%B0%E5%9F%9F%E6%8E%A7%E5%88%B6%E5%99%A8%E5%AF%86%E7%A0%81/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rohman.Zhu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="诺曼实验室">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 诺曼实验室">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/12/01/%E5%BF%98%E8%AE%B0%E5%9F%9F%E6%8E%A7%E5%88%B6%E5%99%A8%E5%AF%86%E7%A0%81/" class="post-title-link" itemprop="url">忘记域控制器密码</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2021-12-01 23:11:07 / Modified: 15:17:06" itemprop="dateCreated datePublished" datetime="2021-12-01T23:11:07+00:00">2021-12-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Windows-Server/" itemprop="url" rel="index"><span itemprop="name">Windows Server</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><p>部署测试域控，结果忘记密码。无法使用PE去修改密码。</p>
<h1 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h1><p>调出cmd去使用net user指令来修改密码。</p>
<h2 id="实操"><a href="#实操" class="headerlink" title="实操"></a>实操</h2><ol>
<li>挂载安装镜像iso。</li>
<li>进入命令行模式，打开cmd。</li>
<li>进入操作系统目录，如C:\Windows\System32下。</li>
<li>修改文件名，把屏幕键盘程序改一下名字，ren osk.exe osk.exe.bak</li>
<li>修改文件名，把CMD改成屏幕键盘名，ren cmd.exe osk.exe</li>
<li>重启，进入操作系统界面。</li>
<li>打开登录界面的屏幕键盘，即会跳出cmd界面。</li>
<li>输入 net user administrator [新密码]。</li>
<li>修改完成后，需要将No.4与No.5修改回来。</li>
</ol>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p><a target="_blank" rel="noopener" href="https://blog.51cto.com/91xueit/1750008">https://blog.51cto.com/91xueit/1750008</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://github.com/rohman-zhu/2021/11/30/Windows%E6%9F%A5%E6%89%BE%E8%B4%A6%E6%88%B7%E8%A2%AB%E7%A6%81%E7%94%A8%E7%9A%84%E8%84%9A%E6%9C%AC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rohman.Zhu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="诺曼实验室">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 诺曼实验室">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/11/30/Windows%E6%9F%A5%E6%89%BE%E8%B4%A6%E6%88%B7%E8%A2%AB%E7%A6%81%E7%94%A8%E7%9A%84%E8%84%9A%E6%9C%AC/" class="post-title-link" itemprop="url">Windows查找账户被禁用的脚本</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-11-30 02:28:40" itemprop="dateCreated datePublished" datetime="2021-11-30T02:28:40+00:00">2021-11-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2021-12-01 15:08:15" itemprop="dateModified" datetime="2021-12-01T15:08:15+00:00">2021-12-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Windows-Server/" itemprop="url" rel="index"><span itemprop="name">Windows Server</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h1><p>收集一个目录下所有文件夹名，收集这些以AD命名的文件夹名，确认这些用户是否被禁用了。</p>
<h1 id="脚本"><a href="#脚本" class="headerlink" title="脚本"></a>脚本</h1><p>收集账户名</p>
<figure class="highlight ps1"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Get-ChildItem</span> D:\ | <span class="built_in">select</span> name &gt;&gt; Account.list</span><br></pre></td></tr></table></figure>

<p>处理账户</p>
<figure class="highlight ps1"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Get-Content</span> D:\Account.list | <span class="built_in">ForEach-Object</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">echo</span> <span class="variable">$_</span> &gt; accountInfo.temp</span><br><span class="line">  net user <span class="variable">$_</span> /domain | findstr <span class="string">&quot;Account&quot;</span> | findstr <span class="string">&quot;No&quot;</span> &gt;&gt; acountInfo.temp</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span>( <span class="variable">$</span>(<span class="built_in">Get-Content</span> accountInfo.temp).Length <span class="operator">-eq</span> <span class="number">2</span>)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="comment"># Work Here!</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注：如果powershell的出来的是乱码，则需要将页面编码改成UTF-8，临时生效的指令为 chcp 65001 。</p>
</blockquote>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://github.com/rohman-zhu/2021/11/30/Linux%E5%BE%AA%E7%8E%AF%E5%88%9B%E5%BB%BA%E8%B4%A6%E6%88%B7%E8%84%9A%E6%9C%AC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rohman.Zhu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="诺曼实验室">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 诺曼实验室">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/11/30/Linux%E5%BE%AA%E7%8E%AF%E5%88%9B%E5%BB%BA%E8%B4%A6%E6%88%B7%E8%84%9A%E6%9C%AC/" class="post-title-link" itemprop="url">Linux循环创建账户脚本</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-11-30 02:15:21" itemprop="dateCreated datePublished" datetime="2021-11-30T02:15:21+00:00">2021-11-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2021-12-01 15:03:44" itemprop="dateModified" datetime="2021-12-01T15:03:44+00:00">2021-12-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h1><p>需要一次性创建10个测试账户，并且设置初始账户密码。</p>
<h1 id="脚本"><a href="#脚本" class="headerlink" title="脚本"></a>脚本</h1><p>创建账户</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">for</span> (( i=<span class="number">1</span>;i&lt;<span class="number">11</span>;i++ ))</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">sudo</span> useradd -m -s /bin/bash [username]-<span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>批量修改密码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[username]:[init password]</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> chpasswd &lt; temp.file</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://github.com/rohman-zhu/2021/11/30/UAG%E7%A3%81%E7%9B%98%E7%A9%BA%E9%97%B4%E4%BD%BF%E7%94%A8%E7%8E%87%E9%97%AE%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rohman.Zhu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="诺曼实验室">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 诺曼实验室">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/11/30/UAG%E7%A3%81%E7%9B%98%E7%A9%BA%E9%97%B4%E4%BD%BF%E7%94%A8%E7%8E%87%E9%97%AE%E9%A2%98/" class="post-title-link" itemprop="url">UAG磁盘空间使用率问题</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-11-30 00:37:56" itemprop="dateCreated datePublished" datetime="2021-11-30T00:37:56+00:00">2021-11-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2021-11-29 16:56:17" itemprop="dateModified" datetime="2021-11-29T16:56:17+00:00">2021-11-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/VMware/" itemprop="url" rel="index"><span itemprop="name">VMware</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/VMware/Horizon-View/" itemprop="url" rel="index"><span itemprop="name">Horizon View</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><p>UAG近期被主流Horizon View架构中，用于替换安全服务器。这个是基于Photon Linux封装的操作系统，官方直接提供OVF包让我们导入虚拟化环境中。然而，这套东西貌似还没有开发完善，连基本的扩容操作都没有，ovf中可怜的20G空间很快就会被审计日志占满。当空间被占满后，就容易影响原有的业务，然而面对这种窘境，官方竟然没有任何一篇KB能够解决！</p>
<p>除了空间问题，还有其他槽点：</p>
<ol>
<li>UAG还无法通过 WEB 控制台设置时区，甚至你都不知道你设置了哪一个时区!</li>
<li>Web控制台每次刷新一下，就得重新输入账户密码！</li>
<li>SNMP可监控的项实属过少。</li>
<li>无法讲明的会话机制，也无法讲明的释放机制。（我曾经因为会话数达到最大值而被中断业务。 T T）</li>
<li>最为致命的是ovf没有使用LVM来分区，无法做到在线扩容。</li>
</ol>
<h1 id="解决思路"><a href="#解决思路" class="headerlink" title="解决思路"></a>解决思路</h1><p>既然底层是基于Linux封装的，那也就意味着可以自定义定期运行的脚本。由此，我们可以基于shell脚本+crontab任务来解决，定期将已归档的审计日志（&#x2F;var&#x2F;log&#x2F;audit&#x2F;audit.log.gz)、系统日志(&#x2F;var&#x2F;log&#x2F;message.x)、认证日志(&#x2F;var&#x2F;log&#x2F;auth.log.gz)转移至其他地方。</p>
<h2 id="底层添加磁盘"><a href="#底层添加磁盘" class="headerlink" title="底层添加磁盘"></a>底层添加磁盘</h2><p>略</p>
<h2 id="初始化分区"><a href="#初始化分区" class="headerlink" title="初始化分区"></a>初始化分区</h2><p>略</p>
<h2 id="脚本"><a href="#脚本" class="headerlink" title="脚本"></a>脚本</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># @Rohman</span></span><br><span class="line"><span class="comment"># 2021-11-30</span></span><br><span class="line"><span class="comment"># 将目标日志挪到/archive目录下</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置目录变量，如果要执行的指令，需要用$()</span></span><br><span class="line">Directory=<span class="string">&quot;/archive/<span class="subst">$(date &#x27;+%Y-%m-%d&#x27;)</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建目录</span></span><br><span class="line"><span class="built_in">mkdir</span> <span class="variable">$Directory</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 移动对应的文件</span></span><br><span class="line"><span class="built_in">mv</span> /var/log/audit/audit.*.gz <span class="variable">$Directory</span></span><br><span class="line"><span class="built_in">mv</span> /var/log/message.* <span class="variable">$Directory</span></span><br><span class="line"><span class="built_in">mv</span> /var/log/auth.*.gz <span class="variable">$Directory</span></span><br></pre></td></tr></table></figure>

<h2 id="创建定期任务"><a href="#创建定期任务" class="headerlink" title="创建定期任务"></a>创建定期任务</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 编辑任务</span></span><br><span class="line">crontab -e</span><br><span class="line"></span><br><span class="line"><span class="comment"># 进入任务配置</span></span><br><span class="line"><span class="comment"># 格式为 分、时、日、月、周</span></span><br><span class="line"><span class="comment"># 每个月的月初执行即可，例如 每一个月的1日00:00执行</span></span><br><span class="line">0 0 1 * * [脚本的绝对路径]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 保存退出</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查是否有配置任务</span></span><br><span class="line">crontab -l</span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查日志</span></span><br><span class="line">less /var/log/cron</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://github.com/rohman-zhu/2021/11/21/%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95%E8%84%9A%E6%9C%AC%E4%B8%AD%E6%97%A0%E6%B3%95%E6%98%A0%E5%B0%84%E7%BD%91%E7%BB%9C%E9%A9%B1%E5%8A%A8%E5%99%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rohman.Zhu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="诺曼实验室">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 诺曼实验室">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/11/21/%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95%E8%84%9A%E6%9C%AC%E4%B8%AD%E6%97%A0%E6%B3%95%E6%98%A0%E5%B0%84%E7%BD%91%E7%BB%9C%E9%A9%B1%E5%8A%A8%E5%99%A8/" class="post-title-link" itemprop="url">用户登录脚本中无法映射网络驱动器</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2021-11-21 23:05:51 / Modified: 15:10:01" itemprop="dateCreated datePublished" datetime="2021-11-21T23:05:51+00:00">2021-11-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Windows-Server/" itemprop="url" rel="index"><span itemprop="name">Windows Server</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><p>测试环境中的一台Windows Server 2019服务器，需要为登录上来的用户自动映射一个网盘，即网络驱动器。</p>
<p>一开始在本地组策略中的，用户登录脚本中添加策略，有net指令来直接挂载网盘的动作，但是发现不生效；一开始怀疑是脚本写错了，但是在本地执行后，是能按预期生效的，那么问题就出在这个操作系统上，应该有什么地方需要设置。</p>
<h1 id="解决过程"><a href="#解决过程" class="headerlink" title="解决过程"></a>解决过程</h1><p>从外网找到的解决方法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Step 1. Click on “Start” and in the program box type in “regedit”. Click Enter.</span><br><span class="line">Step 2. Find this sub-key : “HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\System” and right click it.</span><br><span class="line">Step 3. Select “new” and click “DWORD value”.</span><br><span class="line">Step 4. Type in “EnableLinkedConnections”. Press Enter.</span><br><span class="line">Step 5. Select “EnableLinkedConnections” and right click. Choose “modify”.</span><br><span class="line">Step 6. Type “1” into the value box. Click OK.</span><br><span class="line">Step 7. Exit and restart your computer.</span><br></pre></td></tr></table></figure>

<p>在64位系统中，默认是使用x64，所以DWORD使用64位的即可。注册表修改完成后，一定要重启才能生效。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://github.com/rohman-zhu/2021/11/21/%E6%97%A0%E6%B3%95%E4%B8%BA%E4%B8%BB%E6%9C%BA%E5%88%86%E9%85%8D%E8%AE%B8%E5%8F%AF/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rohman.Zhu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="诺曼实验室">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 诺曼实验室">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/11/21/%E6%97%A0%E6%B3%95%E4%B8%BA%E4%B8%BB%E6%9C%BA%E5%88%86%E9%85%8D%E8%AE%B8%E5%8F%AF/" class="post-title-link" itemprop="url">无法为主机分配许可</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2021-11-21 22:54:51 / Modified: 15:11:17" itemprop="dateCreated datePublished" datetime="2021-11-21T22:54:51+00:00">2021-11-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/VMware/" itemprop="url" rel="index"><span itemprop="name">VMware</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/VMware/vSphere/" itemprop="url" rel="index"><span itemprop="name">vSphere</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><p>测试环境中有4台物理服务器组成vSAN，使用的ESXi 6.7 的版本。操作系统安装完后，需要安装ESXi的补丁。每一台服务器安装完补丁重启后，无法再添加回vCenter中。</p>
<h1 id="解决过程"><a href="#解决过程" class="headerlink" title="解决过程"></a>解决过程</h1><h2 id="【未解决】疑似测试许可未有vmotion功能"><a href="#【未解决】疑似测试许可未有vmotion功能" class="headerlink" title="【未解决】疑似测试许可未有vmotion功能"></a>【未解决】疑似测试许可未有vmotion功能</h2><p>在关闭ESXi主机的 vmKernel网络中的vmotion功能后，还是无法加入vCenter中。</p>
<p><a target="_blank" rel="noopener" href="https://community.spiceworks.com/topic/2223291-can-t-add-hosts-to-vcenter-essentials-license-not-available">https://community.spiceworks.com/topic/2223291-can-t-add-hosts-to-vcenter-essentials-license-not-available</a></p>
<h2 id="【未解决】主机与vCenter有时间偏差"><a href="#【未解决】主机与vCenter有时间偏差" class="headerlink" title="【未解决】主机与vCenter有时间偏差"></a>【未解决】主机与vCenter有时间偏差</h2><p>vCenter与ESXi均为配置时间服务器，怀疑是时间偏差导致，无法添加。在配置NTP服务后，依旧无法添加ESXi至VCSA。</p>
<p><a target="_blank" rel="noopener" href="https://community.spiceworks.com/topic/2223291-can-t-add-hosts-to-vcenter-essentials-license-not-available">https://community.spiceworks.com/topic/2223291-can-t-add-hosts-to-vcenter-essentials-license-not-available</a></p>
<h2 id="【未解决】版本不兼容"><a href="#【未解决】版本不兼容" class="headerlink" title="【未解决】版本不兼容"></a>【未解决】版本不兼容</h2><p>核对 ESXi 与 vCenter 的版本，发现并无差异。</p>
<p>vCenter的小版本号对应关系：<a target="_blank" rel="noopener" href="https://www.virten.net/vmware/vcenter-release-and-build-number-history/">https://www.virten.net/vmware/vcenter-release-and-build-number-history/</a></p>
<p>VMware 产品兼容性查询：<a target="_blank" rel="noopener" href="https://kb.vmware.com/s/article/70785?lang=zh_cn">https://kb.vmware.com/s/article/70785?lang=zh_cn</a></p>
<h2 id="【正解】重启VCSA"><a href="#【正解】重启VCSA" class="headerlink" title="【正解】重启VCSA"></a>【正解】重启VCSA</h2><p>VCSA重启后，ESXi就能添加至vCenter中了。果然重启治百病。。。</p>
<h1 id="其他参考"><a href="#其他参考" class="headerlink" title="其他参考"></a>其他参考</h1><p>HCL数据库更新方法：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/sunpear/p/6131696.html">https://www.cnblogs.com/sunpear/p/6131696.html</a><br>固件升级：<a target="_blank" rel="noopener" href="https://blog.csdn.net/TN947/article/details/90348579">https://blog.csdn.net/TN947/article/details/90348579</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://github.com/rohman-zhu/2021/11/21/%E4%BA%92%E8%81%94%E7%BD%91%E4%B8%8A%E7%9A%84vSphere%E8%AE%B8%E5%8F%AF%E6%94%B6%E9%9B%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rohman.Zhu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="诺曼实验室">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 诺曼实验室">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/11/21/%E4%BA%92%E8%81%94%E7%BD%91%E4%B8%8A%E7%9A%84vSphere%E8%AE%B8%E5%8F%AF%E6%94%B6%E9%9B%86/" class="post-title-link" itemprop="url">互联网上的vSphere许可收集</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-11-21 22:46:14" itemprop="dateCreated datePublished" datetime="2021-11-21T22:46:14+00:00">2021-11-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-01-08 14:17:34" itemprop="dateModified" datetime="2023-01-08T14:17:34+00:00">2023-01-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/VMware/" itemprop="url" rel="index"><span itemprop="name">VMware</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/VMware/vSphere/" itemprop="url" rel="index"><span itemprop="name">vSphere</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="测试许可列表"><a href="#测试许可列表" class="headerlink" title="测试许可列表"></a>测试许可列表</h1><h1 id="vSphere-6"><a href="#vSphere-6" class="headerlink" title="vSphere 6"></a>vSphere 6</h1><h2 id="VMware-vSphere-6-x"><a href="#VMware-vSphere-6-x" class="headerlink" title="VMware vSphere 6.x"></a>VMware vSphere 6.x</h2><table>
<thead>
<tr>
<th align="center">类型</th>
<th align="center">秘钥</th>
</tr>
</thead>
<tbody><tr>
<td align="center">ESXI</td>
<td align="center">MY4RH-AF1EJ-M84Z1-VL0NM-A7K24</td>
</tr>
<tr>
<td align="center">VCSA</td>
<td align="center">NA24U-4WK1P-M85Z0-TAA7P-CL808</td>
</tr>
<tr>
<td align="center">NSX</td>
<td align="center">H00V6-DW1D4-583D9-091K6-2092L</td>
</tr>
<tr>
<td align="center">vSAN</td>
<td align="center">NF4HH-F1K1Q-488R0-3L954-AF828</td>
</tr>
</tbody></table>
<h2 id="vSAN-6-0-Enterprise-plus"><a href="#vSAN-6-0-Enterprise-plus" class="headerlink" title="vSAN 6.0 Enterprise plus"></a>vSAN 6.0 Enterprise plus</h2><p>NF4HH-F1K1Q-488R0-3L954-AF828</p>
<h1 id="vSphere-7"><a href="#vSphere-7" class="headerlink" title="vSphere 7"></a>vSphere 7</h1><h2 id="vSphere-ESXi-7-0-Enterprise-Plus"><a href="#vSphere-ESXi-7-0-Enterprise-Plus" class="headerlink" title="vSphere ESXi 7.0 Enterprise Plus"></a>vSphere ESXi 7.0 Enterprise Plus</h2><ol>
<li>JJ2WR-25L9P-H71A8-6J20P-C0K3F</li>
<li>HN2X0-0DH5M-M78Q1-780HH-CN214</li>
<li>JH09A-2YL84-M7EC8-FL0K2-3N2J2</li>
</ol>
<h2 id="vCenter-7-0-Standard"><a href="#vCenter-7-0-Standard" class="headerlink" title="vCenter 7.0 Standard"></a>vCenter 7.0 Standard</h2><ol>
<li>104HH-D4343-07879-MV08K-2D2H2</li>
<li>410NA-DW28H-H74K1-ZK882-948L4</li>
<li>406DK-FWHEH-075K8-XAC06-0JH08</li>
</ol>
<h2 id="VSAN-7-0-Enterprise-Plus"><a href="#VSAN-7-0-Enterprise-Plus" class="headerlink" title="VSAN 7.0 Enterprise Plus"></a>VSAN 7.0 Enterprise Plus</h2><ol>
<li>HN0D8-AAJ1Q-07D00-6U924-CX224</li>
<li>50008-221DH-M7E99-A9CKM-A1030</li>
<li>HN0NH-62051-H75E9-P38RM-0H870</li>
</ol>
<h2 id="vSphere-7-Enterprise-Plus-with-Add-on-for-Kubernetes"><a href="#vSphere-7-Enterprise-Plus-with-Add-on-for-Kubernetes" class="headerlink" title="vSphere 7 Enterprise Plus with Add-on for Kubernetes"></a>vSphere 7 Enterprise Plus with Add-on for Kubernetes</h2><ol>
<li>J1608-4GJEQ-071L8-9VA0H-2MUK6</li>
<li>M10DH-8YL47-474L1-DV3U0-8H054</li>
<li>MM4MR-2G005-H7039-JVCAP-2RAL8</li>
</ol>
<h2 id="VMware-Horizon-7-Enterprise-100-CCU-s"><a href="#VMware-Horizon-7-Enterprise-100-CCU-s" class="headerlink" title="VMware Horizon 7 Enterprise 100 CCU(s)"></a>VMware Horizon 7 Enterprise 100 CCU(s)</h2><ol>
<li>9H0AK-4Y192-H8JAR-0H7R0-1RZJM</li>
</ol>
<h2 id="VMware-vCloud-Director-9-x"><a href="#VMware-vCloud-Director-9-x" class="headerlink" title="VMware vCloud Director 9.x"></a>VMware vCloud Director 9.x</h2><ol>
<li>JV6X0-2FJ5K-098E9-A91Z0-83RLD</li>
<li>0Z45A-AR38H-499K9-R9AE2-3ZAL2</li>
<li>1F68H-8V2D0-H9DU9-R3352-9YHH4</li>
</ol>
<h2 id="VMware-vCloud-Director-10-x"><a href="#VMware-vCloud-Director-10-x" class="headerlink" title="VMware vCloud Director 10.x"></a>VMware vCloud Director 10.x</h2><ol>
<li>HA0DR-6JL50-4A0J0-KH2XH-03UK2</li>
<li>JA0J0-6CL9H-HA4M1-TA3X4-9AUH0</li>
<li>4C4D2-FYJ5J-MA440-G8AZP-9ZAQ4</li>
</ol>
<h2 id="VMware-vRealize-Suite-2019-Enterprise"><a href="#VMware-vRealize-Suite-2019-Enterprise" class="headerlink" title="VMware vRealize Suite 2019 Enterprise"></a>VMware vRealize Suite 2019 Enterprise</h2><ol>
<li>JV2TK-F8J5N-MA1N1-UKCZP-2PH52</li>
<li>NZ0WK-A2H1Q-0A0L1-RACGP-0GK38</li>
<li>4F4D2-070DK-4AD49-YJ154-CU868</li>
</ol>
<h2 id="VMware-vRealize-Network-Insight"><a href="#VMware-vRealize-Network-Insight" class="headerlink" title="VMware vRealize Network Insight"></a>VMware vRealize Network Insight</h2><p>HH4RM-FGL9J-08R61-0JA0P-2TUNL</p>
<h1 id="vSphere-8"><a href="#vSphere-8" class="headerlink" title="vSphere 8"></a>vSphere 8</h1><h2 id="ESXi-8"><a href="#ESXi-8" class="headerlink" title="ESXi 8"></a>ESXi 8</h2><p>4V492-44210-48830-931GK-2PRJ4<br>4F40H-4ML1K-M89U0-0C2N4-1AKL4<br>HG00K-03H8K-48929-8K1NP-3LUJ4</p>
<h2 id="VCSA-8"><a href="#VCSA-8" class="headerlink" title="VCSA 8"></a>VCSA 8</h2><p>0Z20K-07JEH-08030-908EP-1CUK4<br>4F282-0MLD2-M8869-T89G0-CF240</p>
<h2 id="VCSA-8-1"><a href="#VCSA-8-1" class="headerlink" title="VCSA 8"></a>VCSA 8</h2><p>0F41K-0MJ4H-M88U1-0C3N0-0A214<br>NF212-08H0K-488X8-WV9X6-1F024</p>
<h2 id="Horizon-8"><a href="#Horizon-8" class="headerlink" title="Horizon 8"></a>Horizon 8</h2><p>JF61H-48K8K-488X9-W98Z0-1FH24<br>0G4DA-49J81-M80R1-012N4-86KH4</p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p><a target="_blank" rel="noopener" href="http://www.ucbug.com/news/154052.html">http://www.ucbug.com/news/154052.html</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://github.com/rohman-zhu/2021/11/21/%E9%80%9A%E8%BF%87ipmitool%E9%87%8D%E7%BD%AE%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%B8%A6%E5%A4%96%E5%AF%86%E7%A0%81/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rohman.Zhu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="诺曼实验室">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 诺曼实验室">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/11/21/%E9%80%9A%E8%BF%87ipmitool%E9%87%8D%E7%BD%AE%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%B8%A6%E5%A4%96%E5%AF%86%E7%A0%81/" class="post-title-link" itemprop="url">通过ipmitool重置服务器带外密码</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2021-11-21 17:27:15 / Modified: 14:44:14" itemprop="dateCreated datePublished" datetime="2021-11-21T17:27:15+00:00">2021-11-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8E%E5%AD%98%E5%82%A8/" itemprop="url" rel="index"><span itemprop="name">服务器与存储</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8E%E5%AD%98%E5%82%A8/%E6%9C%8D%E5%8A%A1%E5%99%A8/" itemprop="url" rel="index"><span itemprop="name">服务器</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><p>服务器一般都有设置带外管理，由于没有正常交接。导致无法进入带外，而重置带外需要在服务器重启后进入BIOS中操作。但业务一般不允许重启，所以可以通过操作系统内执行ipmi工具重置密码。</p>
<h1 id="操作过程"><a href="#操作过程" class="headerlink" title="操作过程"></a>操作过程</h1><p>智能型平台管理接口（Intelligent Platform Management Interface）</p>
<h2 id="安装ipmitool"><a href="#安装ipmitool" class="headerlink" title="安装ipmitool"></a>安装ipmitool</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Ubuntu</span></span><br><span class="line">apt-get install ipmitool</span><br><span class="line"></span><br><span class="line"><span class="comment"># CentOS</span></span><br><span class="line">yum install ipmitool</span><br></pre></td></tr></table></figure>

<h2 id="加载ipmitool模块"><a href="#加载ipmitool模块" class="headerlink" title="加载ipmitool模块"></a>加载ipmitool模块</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">modprobe ipmi_devintf</span><br><span class="line">modprobe ipmi_si</span><br></pre></td></tr></table></figure>

<h2 id="查看带外设置的用户并重置密码"><a href="#查看带外设置的用户并重置密码" class="headerlink" title="查看带外设置的用户并重置密码"></a>查看带外设置的用户并重置密码</h2><p>Linux 操作系统</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查询带外用户列表</span></span><br><span class="line">ipmitool user list 1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重置带外用户密码</span></span><br><span class="line">ipmitool user <span class="built_in">set</span> password [用户ID] [新密码]</span><br></pre></td></tr></table></figure>

<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/370457043">https://zhuanlan.zhihu.com/p/370457043</a><br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/lianglab/p/14106113.html">https://www.cnblogs.com/lianglab/p/14106113.html</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="Previous page" aria-label="Previous page" href="/page/15/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/15/">15</a><span class="page-number current">16</span><a class="page-number" href="/page/17/">17</a><span class="space">&hellip;</span><a class="page-number" href="/page/43/">43</a><a class="extend next" rel="next" title="Next page" aria-label="Next page" href="/page/17/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Rohman.Zhu</span>
  </div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  






  





</body>
</html>
