<!DOCTYPE html>
<html lang="zh_cn">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha256-5eIC48iZUHmSlSUz9XtjRyK2mzQkHScZY1WdMaoz74E=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"github.com","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.21.1","exturl":false,"sidebar":{"position":"right","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

    <meta property="og:type" content="website">
<meta property="og:title" content="诺曼实验室">
<meta property="og:url" content="http://github.com/rohman-zhu/page/42/index.html">
<meta property="og:site_name" content="诺曼实验室">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Rohman.Zhu">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://github.com/rohman-zhu/page/42/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh_cn","comments":"","permalink":"","path":"page/42/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>诺曼实验室</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="stylesheet" href="/css/prism.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">诺曼实验室</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Rohman.Zhu</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">430</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">44</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">144</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://github.com/rohman-zhu/posts/660babc0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rohman.Zhu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="诺曼实验室">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 诺曼实验室">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/660babc0/" class="post-title-link" itemprop="url">磁盘挂载</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2017-10-02 21:09:59" itemprop="dateCreated datePublished" datetime="2017-10-02T21:09:59+00:00">2017-10-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-12-22 05:27:49" itemprop="dateModified" datetime="2024-12-22T05:27:49+00:00">2024-12-22</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="fstab"><a href="#fstab" class="headerlink" title="fstab"></a>fstab</h2><p>Static information about the filesystem.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$df -h //以人类可读的信息查看磁盘挂载信息。</span><br></pre></td></tr></table></figure>

<h4 id="mount-命令"><a href="#mount-命令" class="headerlink" title="mount 命令"></a>mount 命令</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$mount -t ext4 -o noatime,noexec /dev/sdb1 /mnt</span><br></pre></td></tr></table></figure>

<h4 id="修改fstab文件"><a href="#修改fstab文件" class="headerlink" title="修改fstab文件"></a>修改fstab文件</h4><table>
<thead>
<tr>
<th>第一列</th>
<th align="center">第二列</th>
<th align="center">第三列</th>
<th align="center">第四列</th>
<th align="center">第五列</th>
</tr>
</thead>
<tbody><tr>
<td>设备路径</td>
<td align="center">挂载点</td>
<td align="center">文件系统类型</td>
<td align="center">选项</td>
<td align="center">备份</td>
</tr>
</tbody></table>
<blockquote>
<p>备份 与 检查，设置为0，因为自己的设备在开机检查的时候，如果结果是坏的，则系统启动不了。</p>
</blockquote>
<h2 id="如何测试手动挂载？"><a href="#如何测试手动挂载？" class="headerlink" title="如何测试手动挂载？"></a>如何测试手动挂载？</h2><ol>
<li>创建一个虚拟的块设备<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ dd if=/dev/zero of=/dev/sdb1 bs=4906 count=100</span><br></pre></td></tr></table></figure></li>
<li>格式化<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ mkfs.ext4 /dev/sdb1</span><br></pre></td></tr></table></figure></li>
<li>挂载<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ mount -t ext4 -o loop,noatime,noexec /dev/sda1 /mnt</span><br></pre></td></tr></table></figure></li>
<li>查看<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ df -h</span><br></pre></td></tr></table></figure></li>
</ol>
<blockquote>
<p>检查故障磁盘，用 <em>fsck</em> 指令</p>
</blockquote>
<h2 id="如果fstab出问题"><a href="#如果fstab出问题" class="headerlink" title="如果fstab出问题"></a>如果fstab出问题</h2><ol>
<li>开机提示，输入密码 修复。</li>
<li>修复模式</li>
</ol>
<blockquote>
<p>修改 &#x2F;etc&#x2F;fstab 只读状态，mount -0 rw,remount &#x2F;</p>
</blockquote>
<h1 id="让一个程序开机自启动"><a href="#让一个程序开机自启动" class="headerlink" title="让一个程序开机自启动"></a>让一个程序开机自启动</h1><ol>
<li>chkconfig ,但要自启动的程序，需要符合这样的格式（&#x2F;etc&#x2F;init.d&#x2F;sshd)。</li>
<li>放入 &#x2F;etc&#x2F;rc.local,建议将自启动程序放入这里面，相当于服务器的档案文件。</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://github.com/rohman-zhu/posts/460156fd/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rohman.Zhu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="诺曼实验室">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 诺曼实验室">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/460156fd/" class="post-title-link" itemprop="url">Linux 故障修复集</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2017-10-02 11:23:06" itemprop="dateCreated datePublished" datetime="2017-10-02T11:23:06+00:00">2017-10-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-12-22 05:27:48" itemprop="dateModified" datetime="2024-12-22T05:27:48+00:00">2024-12-22</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="修复CentOS-7启动引导"><a href="#修复CentOS-7启动引导" class="headerlink" title="修复CentOS-7启动引导"></a>修复CentOS-7启动引导</h1><h2 id="一、修复MBR："><a href="#一、修复MBR：" class="headerlink" title="一、修复MBR：##"></a>一、修复MBR：##</h2><p>MBR（Master Boot Record主引导记录）：</p>
<p>硬盘的0柱面、0磁头、1扇区称为主引导扇区。其中446Byte是bootloader，64Byte为Partition table，剩下的2Byte为magic number。</p>
<p>备份MBR：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#dd if=/dev/sda of=/root/mbr.bak count=1 bs=512</span><br></pre></td></tr></table></figure>

<p>破坏bootloader：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#dd if=/dev/zero of=/dev/sda count=1 bs=200</span><br></pre></td></tr></table></figure>

<p>这里边block size只要小于等于446即可。</p>
<p>修复方式：</p>
<ol>
<li>借助其他系统挂载磁盘修复。</li>
</ol>
<p>修复方式同光盘修复类似，也是使用grub2-install命令。</p>
<ol start="2">
<li>借助安装光盘修复。</li>
</ol>
<h3 id="插入Linux安装盘"><a href="#插入Linux安装盘" class="headerlink" title="插入Linux安装盘"></a>插入Linux安装盘</h3><ol>
<li>装入光盘，在光盘引导界面选择troubleshooting：</li>
<li>选择进入救援模式（Recue a CentOS system )：</li>
<li>按回车键继续：</li>
<li>进入磁盘挂载选择模式：磁盘将会被挂载至&#x2F;mnt&#x2F;sysimage&#x2F;下</li>
</ol>
<ul>
<li>continue 以rw方式挂载分区。</li>
<li>read only 以ro方式挂载分区。</li>
<li>skip 跳过，将来自己手工挂载磁盘。</li>
</ul>
<ol start="5">
<li>选择continue，稍等片刻，提示已经挂载完成。</li>
<li>此时进入救援模式的命令行：</li>
<li>使用grub2-install命令重建bootloader,并且显示无错误后，重启系统。</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#grub2-install root-directory=/mnt/sysimage /dev/sda</span><br><span class="line">#sync</span><br><span class="line">#reboot</span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="http://www.linuxidc.com/Linux/2015-03/114678.htm">原文地址</a></p>
<h1 id="硬件故障"><a href="#硬件故障" class="headerlink" title="硬件故障"></a>硬件故障</h1><p>先查看内核日志文件，检查问题</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ dmesg</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://github.com/rohman-zhu/posts/a20d1b8d/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rohman.Zhu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="诺曼实验室">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 诺曼实验室">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/a20d1b8d/" class="post-title-link" itemprop="url">Network setup</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2017-10-01 22:53:18" itemprop="dateCreated datePublished" datetime="2017-10-01T22:53:18+00:00">2017-10-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-12-22 05:27:48" itemprop="dateModified" datetime="2024-12-22T05:27:48+00:00">2024-12-22</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>This have two way to setup internet-config,’setup’ command and others.</p>
<ul>
<li>Path : &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-eth1</li>
</ul>
<h2 id="Network-driver-file"><a href="#Network-driver-file" class="headerlink" title="Network driver file"></a>Network driver file</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$cat /etc/sysconfig/network-scripts/ifcfg-eth1</span><br><span class="line">BOOTPROTO = none # &lt;== 其中，proto取值可以是：none，引导时不使用协议；static 静态分配地址；bootp,使用BOOTP协议；或者DHCP，使用DHCP协议；</span><br></pre></td></tr></table></figure>

<ul>
<li><p>开启网卡</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$/etc/init.d/network restart &lt;== ONBOOT = yes 网卡文件中该属性必须位YES</span><br><span class="line">$ifup NetworkDirver &lt;== Make NetworkDirver working</span><br><span class="line">$ifdown NetworkDirver &lt;== Shutdown NetWorkDirver </span><br></pre></td></tr></table></figure>
</li>
<li><p>Checking network status</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ifconfig</span><br><span class="line">$ip ad</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="DNS-config"><a href="#DNS-config" class="headerlink" title="DNS config"></a>DNS config</h2><ul>
<li>PATH : &#x2F;etc&#x2F;resolv.conf</li>
</ul>
<h3 id="DNS-config-summary"><a href="#DNS-config-summary" class="headerlink" title="DNS config summary"></a>DNS config summary</h3><ol>
<li>客户端DNS可以在网卡配置文件里面设置。( &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;…)</li>
<li>客户端DNS也可以在 &#x2F;etc&#x2F;resolv.conf 里面设置。</li>
<li>网卡里的设置DNS 优先于 &#x2F;etc&#x2F;resolv.conf。</li>
</ol>
<ul>
<li>PS： 上面的配置在DNS服务器重启的时候会清除, ($ &#x2F;etc&#x2F;init.d&#x2F;network restart)</li>
</ul>
<h2 id="etc-hosts-file"><a href="#etc-hosts-file" class="headerlink" title="&#x2F;etc&#x2F;hosts file"></a>&#x2F;etc&#x2F;hosts file</h2><p>The static table lookup for hostname.</p>
<p>hosts企业里面的作用：</p>
<ol>
<li>开发，产品，测试等人员，用于通过正式的域名测试产品。</li>
<li>服务器之间的调用可以用域名（内部的DNS），方便迁移。</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://github.com/rohman-zhu/posts/fdb616f9/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rohman.Zhu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="诺曼实验室">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 诺曼实验室">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/fdb616f9/" class="post-title-link" itemprop="url">Kernal base optimization</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2017-10-01 22:50:25" itemprop="dateCreated datePublished" datetime="2017-10-01T22:50:25+00:00">2017-10-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-12-22 05:27:48" itemprop="dateModified" datetime="2024-12-22T05:27:48+00:00">2024-12-22</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="内核基础优化"><a href="#内核基础优化" class="headerlink" title="内核基础优化"></a>内核基础优化</h1><p>配置文件:</p>
<ul>
<li>路径 : etc&#x2F;sysctl.conf</li>
<li>生效 : sysctl -p</li>
</ul>
<p>小提示:</p>
<ul>
<li>tip_1 : In ‘vim’ mode , use key (shift + g) turn to the end of the article.</li>
<li>tip_2 : In ‘vim’ mode , use key (shift + insert) to paste content .</li>
</ul>
<h2 id="1-修改sysctl-conf文件"><a href="#1-修改sysctl-conf文件" class="headerlink" title="1.修改sysctl.conf文件"></a>1.修改sysctl.conf文件</h2><h3 id="Commonly-used-Web-server-high-concurrent-status"><a href="#Commonly-used-Web-server-high-concurrent-status" class="headerlink" title="[Commonly used] Web server high concurrent status"></a>[Commonly used] Web server high concurrent status</h3><ul>
<li>net.ipv4.tcp_fin_timeout &#x3D; 2 默认是60秒</li>
<li>net.ipv4.tcp_tw_reuse &#x3D; 1 表示开启重用。允许将TIME-WAIT sockets重新用于新的TCP连接，默认为0，表示关闭；</li>
<li>net.ipv4.tcp_tw_recyle &#x3D; 1 表示开启TCP连接中TIME-WAIT sockets的快速回收，默认为0，表示关闭。</li>
</ul>
<h4 id="原理-TCP-three-way-handshake"><a href="#原理-TCP-three-way-handshake" class="headerlink" title="[原理]TCP three-way-handshake"></a>[原理]TCP three-way-handshake</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">  === &gt; syn</span><br><span class="line">&lt; === syn + ack</span><br><span class="line">  === &gt; ack</span><br></pre></td></tr></table></figure>

<h5 id="What-is-SYN"><a href="#What-is-SYN" class="headerlink" title="What is SYN"></a>What is SYN</h5><p>全称是_Synchronize Sequence Numbers_,是TCP&#x2F;IP建立连接时使用的握手信号。</p>
<h6 id="SYN-ATTACK"><a href="#SYN-ATTACK" class="headerlink" title="SYN ATTACK"></a>SYN ATTACK</h6><p>SYN攻击属于DDoS攻击的一种，它利用TCP协议缺陷，通过发送大量的半连接请求，耗费CPU和内存资源。SYN攻击除了能影响主机外，还可以危害路由器、防火墙等网络系统，事实上SYN攻击并不管目标是什么系统，只要这些系统打开TCP服务就可以实施。服务器接收到连接请求（syn&#x3D; j），将此信息加入未连接队列，并发送请求包给客户（syn&#x3D;k,ack&#x3D;j+1），此时进入SYN_RECV状态。当服务器未收到客户端的确认包时，重发请求包，一直到超时，才将此条目从未连接队列删除。配合IP欺骗，SYN攻击能达到很好的效果，通常，客户端在短时间内伪造大量不存在的IP地址，向服务器不断地发送syn包，服务器回复确认包，并等待客户的确认，由于源地址是不存在的，服务器需要不断的重发直至超时，这些伪造的SYN包将长时间占用未连接队列，正常的SYN请求被丢弃，目标系统运行缓慢，严重者引起网络堵塞甚至系统瘫痪。</p>
<h5 id="What-is-ACK"><a href="#What-is-ACK" class="headerlink" title="What is ACK"></a>What is ACK</h5><p>全称是_Acknowledgement Number_,即是确认字符，在数据通信中，接收站发给发送站的一种传输类控制字符。表示发来的数据已确认接收无误。</p>
<h2 id="2-Hide-your-operated-system-version"><a href="#2-Hide-your-operated-system-version" class="headerlink" title="2.Hide your operated-system version"></a>2.Hide your operated-system version</h2><p>里面的默认内容是:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># cat /etc/issue</span><br><span class="line">CentOS release 6.9 (Final)</span><br><span class="line">Kernel \r on an \m</span><br></pre></td></tr></table></figure>

<p>修改方式是</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># &gt;etc/issue</span><br></pre></td></tr></table></figure>

<h2 id="3-Modify-login-shell-information"><a href="#3-Modify-login-shell-information" class="headerlink" title="3.Modify login shell information"></a>3.Modify login shell information</h2><ul>
<li>Path : &#x2F;etc&#x2F;</li>
<li>Create new file : &#x2F;etc&#x2F;motd</li>
</ul>
<h2 id="4-Locked-system-file"><a href="#4-Locked-system-file" class="headerlink" title="4.Locked system file"></a>4.Locked system file</h2><p>Some system files is so important that common user could not modify without permission.<br>Such as passwd,shadow,group….</p>
</br>
锁文件操作

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># chattr +i /etc/passwd /etc/shadow /etc/group /etc/inittab</span><br></pre></td></tr></table></figure>

</br>
解锁文件

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#chattr -i /etc/passwd /etc/shadow /etc/group /etc/inittab</span><br></pre></td></tr></table></figure>

</br>
把重要命令藏起来

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$mv `which chattr` /home/roman</span><br></pre></td></tr></table></figure>

<h2 id="5-Add-password-to-grup-shell"><a href="#5-Add-password-to-grup-shell" class="headerlink" title="5.Add password to grup-shell"></a>5.Add password to grup-shell</h2><p>Because we can change root’s password in boot-shell and enter ‘grup’ shell.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># /sbin/grub-md5-crypt</span><br><span class="line"># vim /boot/grub/menu.lst</span><br><span class="line"># 顶端添加一行代码</span><br><span class="line"># password --md5 [grub-md5-crypt产生的密码]</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="6-Ban-other-terminal-ping-host-computer"><a href="#6-Ban-other-terminal-ping-host-computer" class="headerlink" title="6.Ban other terminal ping host computer"></a>6.Ban other terminal ping host computer</h2><p>添加语句到syscntl,禁止其他用户ping</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># echo &quot;net.ipv4.icmp_echo_ignore_all=1&quot; &gt;&gt; /etc/sysctl.conf</span><br></pre></td></tr></table></figure>

<p>更新设置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$sysctl -p</span><br></pre></td></tr></table></figure>

<h2 id="7-Fixed-bugs"><a href="#7-Fixed-bugs" class="headerlink" title="7.Fixed bugs"></a>7.Fixed bugs</h2><p>Update the software.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$yum install openssl openssh bash -y</span><br></pre></td></tr></table></figure>

<h2 id="8-Modify-yum-source"><a href="#8-Modify-yum-source" class="headerlink" title="8.Modify yum source"></a>8.Modify yum source</h2><h3 id="Download-command-–-wget"><a href="#Download-command-–-wget" class="headerlink" title="Download command – wget"></a>Download command – wget</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-6.repo</span><br></pre></td></tr></table></figure>

<blockquote>
<p>-O指令表示重新命名下载的文件</p>
</blockquote>
<h2 id="9-关于临时邮件处理"><a href="#9-关于临时邮件处理" class="headerlink" title="9.关于临时邮件处理"></a>9.关于临时邮件处理</h2><p>在CentOS5系列的系统会默认安装Sendmail服务，因此邮件临时寸放点的路径是&#x2F;var&#x2F;spool&#x2F;clientmqueue</p>
</br>

<p>在CentOS6默认情况下是没有安装Sendmail 服务，而是改装了Postfix，存放的路径在 &#x2F;var&#x2F;spool&#x2F;postfix&#x2F;maildrop&#x2F;。</p>
<h3 id="9-1手动清理的方法"><a href="#9-1手动清理的方法" class="headerlink" title="9.1手动清理的方法"></a>9.1手动清理的方法</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Centos_5</span><br><span class="line"># find /var/spool/clientmqueue/ -type f | xargs rm -f</span><br><span class="line"></span><br><span class="line">Centos_6</span><br><span class="line"># find /var/spool/postfix/maildrop/ -type f | xargs rm -f</span><br></pre></td></tr></table></figure>

<h3 id="9-2定时任务"><a href="#9-2定时任务" class="headerlink" title="9.2定时任务"></a>9.2定时任务</h3><p>将上面的命令携程脚本，做成定时任务。</p>
<h3 id="9-3-关闭-selinux-和-iptables"><a href="#9-3-关闭-selinux-和-iptables" class="headerlink" title="9.3 关闭 selinux 和 iptables"></a>9.3 关闭 selinux 和 iptables</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">永久关闭 selinux</span></span><br><span class="line">sed -i &quot;s#enforcing#disabled#g&quot; /etc/selinux/config</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">永久关闭 防火墙</span></span><br><span class="line">chkconfig iptables off</span><br></pre></td></tr></table></figure>
<h2 id="10-Summary"><a href="#10-Summary" class="headerlink" title="10.Summary"></a>10.Summary</h2><ol>
<li>不用root用户管理，普通用户通过sudo授权管理。</li>
<li>更改远程链接ssh服务端口，禁止root用户远程链接，改成只监听内网IP。</li>
<li>定时自动跟新服务器时间，使其和互联网时间同步。</li>
<li>配置yum更新源，从国内更新源下载安装软件包。</li>
<li>关闭seLinux 以及 iptables。</li>
<li>定时自动清理邮件目录垃圾文件，防止inodes节点被占满。</li>
<li>精简保留必要的开机自启动服务（如crond,sshd,network,rsyslog）。</li>
<li>Linux内核参数优化 &#x2F;etc&#x2F;sysctl.conf,执行sysctl -p 生效果。</li>
<li>锁定关键系统文件如（&#x2F;etc&#x2F;passwd &#x2F;etc&#x2F;shadow &#x2F;etc&#x2F;group 、&#x2F;etc&#x2F;inittab等</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://github.com/rohman-zhu/posts/4f35a184/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rohman.Zhu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="诺曼实验室">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 诺曼实验室">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/4f35a184/" class="post-title-link" itemprop="url">关于HEXO问题的解决方案</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2017-10-01 20:19:40" itemprop="dateCreated datePublished" datetime="2017-10-01T20:19:40+00:00">2017-10-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-12-22 05:27:49" itemprop="dateModified" datetime="2024-12-22T05:27:49+00:00">2024-12-22</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="使用-hexo-s-预览页面出现-“extends-partical…”问题"><a href="#使用-hexo-s-预览页面出现-“extends-partical…”问题" class="headerlink" title="使用 hexo -s 预览页面出现 “extends partical…”问题"></a>使用 hexo -s 预览页面出现 “extends partical…”问题</h1><p>更新使用新的主题，打开主界面显示以下代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">extends partial/layout</span><br><span class="line"></span><br><span class="line">block container</span><br><span class="line">    include mixins/post</span><br><span class="line">    +posts()</span><br><span class="line"></span><br><span class="line">block pagination</span><br><span class="line">    include mixins/paginator</span><br><span class="line">    +home()</span><br><span class="line"></span><br><span class="line">block copyright</span><br><span class="line">    include partial/copyright</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>网络给出的解决方案是这样的，只需要添加依赖即可，亲测有效。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$npm install --save hexo-renderer-jade hexo-generator-feed hexo-generator-sitemap hexo-browsersync hexo-generator-archive</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://www.v2ex.com/amp/t/362017">原文地址</a></p>
<p>PS : 至于是什么原因目前我还不知道，因为不是这个领域的人员，所以也不太清楚这到底是干什么的，见谅见谅。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://github.com/rohman-zhu/posts/e2b145ff/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rohman.Zhu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="诺曼实验室">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 诺曼实验室">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/e2b145ff/" class="post-title-link" itemprop="url">商城样例--底部菜单</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2017-07-22 16:05:56" itemprop="dateCreated datePublished" datetime="2017-07-22T16:05:56+00:00">2017-07-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-12-22 05:27:49" itemprop="dateModified" datetime="2024-12-22T05:27:49+00:00">2024-12-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Android/" itemprop="url" rel="index"><span itemprop="name">Android</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>接下俩一周将开启学习一个安卓商城样例的开发,今天的内容是一个底部的菜单–FragmentTabHost + Fragment</p>
<h1 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h1><p>使用这个控件,先要在布局文件中创建这个控件,这个控件是v4包的,所以在布局文件中有以下部分</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">FrameLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/fg_container&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_weight</span>=<span class="string">&quot;4&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">FrameLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">android.support.v4.app.FragmentTabHost</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_weight</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@android:id/tabhost&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">FrameLayout</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@android:id/tabcontent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">            &gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">FrameLayout</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">android.support.v4.app.FragmentTabHost</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>说明一下,FragmentTabHost这一部分是菜单底部的一个指示器,而上一级的FrameLayout这里作为我们呈现内容的容器,每一个菜单对应的内容将在这里展示.</p>
<p>接下来,就是我们的代码部分,在代码中,我们需要做的就是fragmentTabHost.setup(Context context,Fragmentmanager fragmentmanager,int containerId);</p>
<p>这里的containerId即是我们刚才说的容器ID,就是上面的FrameLayout.</p>
<p>做完这些还不够,我们还要向指示器(fragmentTabHost)里面添加不同的菜单,以及每一个菜单对应的内容展示.所以有了以下的代码:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">TabHost.<span class="type">TabSpec</span> <span class="variable">tabSpec</span> <span class="operator">=</span> fragmentTabHost.newTabSpec(String TAG); <span class="comment">//这里是这个菜单的标签</span></span><br><span class="line">tabSpec.setIndicator(View view); <span class="comment">//这里是这个菜单的样式,可以自定义</span></span><br><span class="line">fragmentTabHost.addTab(tabSpec,tab.getFragment(),<span class="literal">null</span>);</span><br></pre></td></tr></table></figure>

<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>这个控件还是比较简单的,但是为什么在FragmentTabHost这个布局控件里面要求TabWidget这个控件,为什么这里的id要是android:id&#x2F;…的型式?</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://github.com/rohman-zhu/posts/b6b408f/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rohman.Zhu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="诺曼实验室">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 诺曼实验室">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/b6b408f/" class="post-title-link" itemprop="url">宿舍书桌照明系统改造</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2017-07-12 12:02:20" itemprop="dateCreated datePublished" datetime="2017-07-12T12:02:20+00:00">2017-07-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-12-22 05:27:49" itemprop="dateModified" datetime="2024-12-22T05:27:49+00:00">2024-12-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/MCU/" itemprop="url" rel="index"><span itemprop="name">MCU</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>文章标题略显夸张,其实没有没有改造什么照明电路,只是用单片机区控制几个LED灯珠与台灯的开关,再给单片机添加一个单片机蓝牙通讯模块,这样就可以实现用手机蓝牙控制灯的开关.</p>
<ul>
<li>这里的蓝牙通讯其实不难,在单片机端,要弄明白串口通信就好了.</li>
<li>在安卓端里面,是通过SOCKET与固定UUID与单片机连接.</li>
</ul>
<h1 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h1><p>分两部分来写正文,分别是单片机端 和 安卓端</p>
<h2 id="一-单片机端"><a href="#一-单片机端" class="headerlink" title="一. 单片机端"></a>一. 单片机端</h2><p>我用的蓝牙模块是HC-06(在淘宝均价在17块左右),这个蓝牙模块在百度上有很多指令集.</p>
<p>来自百度文库的资料:</p>
<hr>
<h2 id="第一步-给蓝牙上电"><a href="#第一步-给蓝牙上电" class="headerlink" title="第一步 给蓝牙上电"></a>第一步 给蓝牙上电</h2><p>给hc-06上电之后，hc-06的指示灯会一直闪一直闪，这个时候就标志着进入AT模式了</p>
<h2 id="第二部-蓝牙配对"><a href="#第二部-蓝牙配对" class="headerlink" title="第二部 蓝牙配对"></a>第二部 蓝牙配对</h2><p>我只用了电脑和单片机之间传输数据，所以只讲电脑这一块儿。首先你得电脑得有蓝牙（没有就去买）。然后打开电脑蓝牙-&gt;添加设备。这个时候电脑就会自动搜索蓝牙设备，蓝牙设备收到后配对就好。一般hc-06的名称就是hc-06了，配对密码是1234。</p>
<h2 id="第三步-有线串口连接"><a href="#第三步-有线串口连接" class="headerlink" title="第三步 有线串口连接"></a>第三步 有线串口连接</h2><p>买一根串口线，串口转usb也成，将单片机和电脑连接起来，假设使用的是stm32f103的USART1。</p>
<h2 id="第四步-蓝牙引脚连接"><a href="#第四步-蓝牙引脚连接" class="headerlink" title="第四步 蓝牙引脚连接"></a>第四步 蓝牙引脚连接</h2><p>Stm32f103的USART1的A9、A10引脚分别是Tx和Rx脚。此时将hc-06的Rx连接A9，Tx连接A10。</p>
<h2 id="第五步打开串口调试助手"><a href="#第五步打开串口调试助手" class="headerlink" title="第五步	打开串口调试助手"></a>第五步	打开串口调试助手</h2><p>找到有线串口线对应的端口，将波特率设置为与hc-06波特率一致（首次修改为9600），8位数据位，1位结束位，无校验。然后打开串口。</p>
<h2 id="第六步-输入指令"><a href="#第六步-输入指令" class="headerlink" title="第六步 输入指令"></a>第六步 输入指令</h2><p>首先输入AT（无空格回车），然后串口助手会返回OK，修改波特率时输入AT+BAUDx（x为波特率编号），串口助手会返回OKnnnn（nnnn是你的波特率）。注意，在这之后你若还有其他要修改的，必须先关掉串口助手，然后修改端口波特率为你刚刚设置的波特率，然后再打开串口继续操作。</p>
<p>另给检测蓝牙模块是否正常的方法：</p>
<ol>
<li>给蓝牙模块供电</li>
<li>蓝牙配对</li>
<li>打开串口助手，设置波特率9600，数据位8位，结束位1位，校验位无</li>
<li>将蓝牙的TXD和RXD短接</li>
<li>随意发送一个数据，串口助手将回显同样的数据</li>
</ol>
<p>再附指令表：</p>
<ol>
<li>测试通信<br>发送：AK<br>返回：OK</li>
<li>修改波特率额</li>
</ol>
<p>发送：AK+BAUD8<br>返回：OK115200</p>
<p>波特率标号对应表：</p>
<ul>
<li>1———1200 </li>
<li>2———2400 </li>
<li>3———4800 </li>
<li>4———9600(默认)</li>
<li>5———19200 </li>
<li>6———38400 </li>
<li>7———57600 </li>
<li>8———115200 </li>
<li>9———230400 </li>
<li>A———460800 </li>
<li>B———921600 </li>
<li>C———1382400</li>
</ul>
<ol start="3">
<li>改蓝牙名称</li>
</ol>
<ul>
<li>发送：AT+NAMEname</li>
<li>返回：OKname</li>
</ul>
<ol start="4">
<li>改配对密码</li>
</ol>
<ul>
<li>发送：AT+PINxxx</li>
<li>返回：OKsetpin</li>
</ul>
<hr>
<p>在单片机里面无非就是设置串口通信的函数会比较难,计时器方面会比较难,但是用 “单片机精灵”生成就好了,串口通信的函数就会自动生成.</p>
<p>另一方面,要注意main函数如果没有设置死循环,那么将会从头到尾不断循环.</p>
<p><a href = "https://github.com/R0manJ/iDesk/blob/master/智能桌面单片机程序.c">详细代码看Github–iDesk–智能桌面单片机程序.c</a></p>
<h2 id="二-安卓端"><a href="#二-安卓端" class="headerlink" title="二. 安卓端"></a>二. 安卓端</h2><p>在安卓端无非是使用蓝牙跟单片机的蓝牙通讯,那么就要用到Socket连接,再通过输入输出流操作数据传送.</p>
<p>需要注意的是Socket的连接是阻塞操作,因此要通过子线程来操作.</p>
<p>因为要实现的是蓝牙的串口通信,所以UUID是固定的(“00001101-0000-1000-8000-00805F9B34FB”)</p>
<p>蓝牙操作的流程大概是这样:</p>
<p>BluetoothAdapter -&gt; BluetoothDevice -&gt; BluetoothSocket -&gt;connect -&gt;getInputStream &amp;&amp; getOutputStream</p>
<p>其中涉及到单片机传回的数据要处理并显示到界面上,那么就通过安卓的Handler消息处理机制来跟新UI.</p>
<p><a href ="https://github.com/R0manJ/iDesk/tree/master/app/src/main/java/com/rjstudio/idesk">详细代码看GitHub项目</a></p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>这个小样例做完后还留下一些小问题:<br></p>
<ul>
<li>在安卓中:</li>
</ul>
<ol>
<li>在activity结束后,线程是如何关闭的? 我获取的Socket资源与inputstream,outputStream 怎么在线程结束后关闭?</li>
<li>还没有做数据回传操作,如何通过广播开启蓝牙给单片机发送指令?</li>
</ol>
<ul>
<li>在单片机中:</li>
</ul>
<ol>
<li>单片机的功率是多少?</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://github.com/rohman-zhu/posts/55f10baf/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rohman.Zhu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="诺曼实验室">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 诺曼实验室">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/55f10baf/" class="post-title-link" itemprop="url">Android ConstraintLayout解析</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2017-07-06 11:43:48" itemprop="dateCreated datePublished" datetime="2017-07-06T11:43:48+00:00">2017-07-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-12-22 05:27:47" itemprop="dateModified" datetime="2024-12-22T05:27:47+00:00">2024-12-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Android/" itemprop="url" rel="index"><span itemprop="name">Android</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>因为ConstraintLayout这个布局是安卓的新特性,所以在此就学习一下.这里转自网上的一篇文章,把基本的东西都讲到了,感觉还是不错的.</p>
<h1 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h1><p>　　本篇文章的主题是ConstraintLayout。其实ConstraintLayout是Android Studio 2.2中主要的新增功能之一，也是Google在去年的I&#x2F;O大会上重点宣传的一个功能。我们都知道，在传统的Android开发当中，界面基本都是靠编写XML代码完成的，虽然Android Studio也支持可视化的方式来编写界面，但是操作起来并不方便，我也一直都不推荐使用可视化的方式来编写Android应用程序的界面。</p>
<p>　　而ConstraintLayout就是为了解决这一现状而出现的。它和传统编写界面的方式恰恰相反，ConstraintLayout非常适合使用可视化的方式来编写界面，但并不太适合使用XML的方式来进行编写。当然，可视化操作的背后仍然还是使用的XML代码来实现的，只不过这些代码是由Android Studio根据我们的操作自动生成的。</p>
<p>　　另外，ConstraintLayout还有一个优点，它可以有效地解决布局嵌套过多的问题。我们平时编写界面，复杂的布局总会伴随着多层的嵌套，而嵌套越多，程序的性能也就越差。ConstraintLayout则是使用约束的方式来指定各个控件的位置和关系的，它有点类似于RelativeLayout，但远比RelativeLayout要更强大。</p>
<p>　　其实ConstraintLayout属于Android Studio 2.2的新特性，我在去年写《第二行代码》的时候就非常想要将这部分内容加入到新书里面，但是在尝试之后还是放弃了。因为ConstraintLayout的用法很多都是对控件进行拖拽，只用文字或者是一些静态图片实在太难将它的用法表达清楚了，因此不太适合写到书上。我当时的想法就是在博客上面写一篇ConstraintLayout的用法讲解，来弥补一下《第二行代码》中缺失的这部分新特性，那么今天这篇文章来了。</p>
<h2 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h2><p>　　下面我们开始用边学边练的方式来进行学习，首先打开你的Android Studio，并新建一个ConstraintLayoutTest项目。另外，确保你的Android Studio是2.2或以上版本。<br>　　为了要使用ConstraintLayout，我们需要在app&#x2F;build.gradle文件中添加ConstraintLayout的依赖，如下所示。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">　　dependencies &#123;</span><br><span class="line">　  compile &#x27;com.android.support.constraint:constraint-layout:1.0.2&#x27;</span><br><span class="line">　　&#125;</span><br></pre></td></tr></table></figure>

<p>　　目前ConstraintLayout库最新的版本是1.0.2.</p>
<p>　　在目前的Android Studio 2.3中默认布局就是ConstraintLayout的</p>
<p>　　我们可以看到，现在主操作区域内有两个类似于手机屏幕的界面，左边的是预览界面，右边的是蓝图界面。这两部分都可以用于进行布局编辑工作，区别是左边部分主要用于预览最终的界面效果，右边部分主要用于观察界面内各个控件的约束情况。</p>
<p><img src="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175356264.gif" alt="ConstraintLayout转化"></p>
<h2 id="基本操作"><a href="#基本操作" class="headerlink" title="基本操作"></a>基本操作</h2><p>　　下面我们来学习一些具体的操作吧，ConstraintLayout的基本用法很简单，比如我们想要向布局中添加一个按钮，那么只需要从左侧的Palette区域拖一个Button进去就可以了，如下图所示。<br>　　<br><img src="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175357269.gif" alt="添加按钮"></p>
<p>　　虽说现在Button已经添加到界面上了，但是由于我们还没有给Button添加任何的约束，因此Button并不知道自己应该出现在什么位置。现在我们在预览界面上看到的Button位置并不是它最终运行后的实际位置，如果一个控件没有添加任何约束的话，它在运行之后会自动位于界面的左上角。</p>
<p>　　那么下面我们就来给Button添加约束，每个控件的约束都分为垂直和水平两类，一共可以在四个方向上给控件添加约束，如下图所示。<br><img src="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175357273.png" alt="按钮约束">　　</p>
<p>　　上图中Button的上下左右各有一个圆圈，这圆圈就是用来添加约束的，我们可以将约束添加到ConstraintLayout，也可以将约束添加到另一个控件。比如说，想让Button位于布局的右下角，就可以这样添加约束，如下图所示。<br>　　<br><img src="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175357217.gif" alt="添加约束"></p>
<p>　　我们给Button的右边和下边添加了约束，因此Button就会将自己定位到布局的右下角了。类似地，如果我们想要让Button居中显示，那么就需要给它的上下左右都添加约束，如下图所示。<br><img src="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175357404.gif" alt="添加约束">
　　</p>
<p>　　这就是添加约束最基本的用法了。</p>
<p>　　除此之外，我们还可以使用约束让一个控件相对于另一个控件进行定位。比如说，我们希望再添加一个Button，让它位于第一个Button的正下方，并且间距64dp，那么操作如下所示。<br>　　<br><img src="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175358652.gif" alt="给控件进行定位"></p>
<p>　　现在添加约束的方式我们已经学完了，那么该怎样删除约束呢?其实也很简单，删除约束的方式一共有三种，第一种用于删除一个单独的约束，将鼠标悬浮在某个约束的圆圈上，然后该圆圈会变成红色，这个时候单击一下就能删除了，如下图所示。<br>　　<br><img src="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175358976.gif" alt="删除约束一"></p>
<p>　　第二种用于删除某一个控件的所有约束，选中一个控件，然后它的左下角会出现一个删除约束的图标，点击该图标就能删除当前控件的所有约束了，如下所示。</p>
<p><img src="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175358962.gif" alt="删除约束二">　　</p>
<p>　　第三种用于删除当前界面中的所有约束，点击工具栏中的删除约束图标即可，如下图所示。<br>　　<br><img src="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175358912.png" alt="删除约束三"></p>
<h2 id="Inspector"><a href="#Inspector" class="headerlink" title="Inspector"></a>Inspector</h2><p>　　这样我们就把ConstraintLayout的基本用法学完了，接下来我们开始学习一些进阶的内容。</p>
<p>　　当你选中任意一个控件的时候，在右侧的Properties区域就会出现很多的属性选项，如下图所示。<br>　　<br><img src="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175359745.png" alt="检查员"></p>
<p>　　在这里我们就可以设置当前控件的所有属性，如文本内容、颜色、点击事件等等。这些功能都非常简单，我就不再进行详细介绍，大家自己点一点就会操作了。</p>
<p>　　需要我们重点掌握的是Properties区域的上半部分，这部分也被称为Inspector。<br><img src="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175359431.png" alt="属性">
　　</p>
<p>　　首先可以看到，在Inspector中有一个纵向的轴和一个横向的轴，这两个轴也是用于确定控件的位置的。我们刚才给Button的上下左右各添加了一个约束，然后Button就能居中显示了，其实就是因为这里纵横轴的值都是50。如果调整了纵横轴的比例，那么Button的位置也会随之改变，如下图所示。<br>　　<br><img src="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175359810.gif" alt="Button位置"></p>
<p>　　不过，虽然我们将横轴的值拖动到了100，但是Button并没有紧贴到布局的最右侧，这是为什么呢?实际上，Android Studio给控件的每个方向上的约束都默认添加了一个16dp的间距，从Inspector上面也可以明显地看出来这些间距的值。如果这些默认值并不是你想要的，可以直接在Inspector上进行修改，如下图所示：<br><img src="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175359805.gif" alt="贴紧边缘">　　</p>
<p>　　可以看到，修改成0之后Button右侧的间距就没了。<br>　　接下来我们再来学习一下位于Inspector最中间的那个正方形区域，它是用来控制控件大小的。一共有三种模式可选，每种模式都使用了一种不同的符号表示，点击符号即可进行切换。<br><img src="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175400110.png" alt="wrap_content"></p>
<p>　　表示wrap content，这个我们很熟悉了，不需要进行什么解释。<br><img src="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175400860.png" alt="固定值">　　</p>
<p>　　表示固定值，也就是给控件指定了一个固定的长度或者宽度值。<br>　　<br><img src="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175400253.png" alt="any_size"></p>
<p>　　表示any size，它有点类似于match parent，但和match parent并不一样，是属于ConstraintLayout中特有的一种大小控制方式，下面我们来重点讲解一下。</p>
<p>　　首先需要说明，在ConstraintLayout中是有match parent的，只不过用的比较少，因为ConstraintLayout的一大特点就是为了解决布局嵌套，既然没有了布局嵌套，那么match parent也就没有多大意义了。</p>
<p>　　而any size就是用于在ConstraintLayout中顶替match parent的，先看一下我们怎样使用any size实现和match parent同样的效果吧。比如说我想让Button的宽度充满整个布局，操作如下图所示。<br><img src="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175400124.gif" alt="any_size">　　</p>
<p>　　可以看到，我们将Button的宽度指定成any size，它就会自动充满整个布局了。当然还要记得将Button左侧的间距设置成0才行。</p>
<p>　　那有的朋友可能会问了，这和match parent有什么区别呢?其实最大的区别在于，match parent是用于填充满当前控件的父布局，而any size是用于填充满当前控件的约束规则。举个例子更好理解，如果我们有一个新的Button，它的其中一个约束是添加到当前这个Button上的，那么any size的效果也会发生改变，如下图所示。<br><img src="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175401772.gif" alt="any_size">　　</p>
<p>　　通过上图的演示，相信你已经很好地理解any size的作用了。<br>##　　Guidelines ##</p>
<p>　　现在你已经对ConstraintLayout比较熟悉，并且能使用ConstraintLayout来编写一些简单的界面了。不过目前有一个问题可能还比较头疼，刚才我们已经实现了让一个按钮居中对齐的功能，如果我们想让两个按钮共同居中对齐该怎么实现呢?</p>
<p>　　其实这个需求很常见，比如说在应用的登录界面，都会有一个登录按钮和一个注册按钮，不管它们是水平居中也好还是垂直居中也好，但肯定都是两个按钮共同居中的。</p>
<p>　　想要实现这个功能，仅仅用我们刚刚学的那些知识是不够的，这需要用到ConstraintLayout中的一个新的功能，Guidelines。</p>
<p>　　下面我们还是通过实际操作来学习一下Guidelines的用法吧。比如现在已经向界面中添加了登录和注册这两个按钮，如下图所示。<br>　　<br><img src="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175401539.png" alt="两个按钮"></p>
<p>　　然后我们希望让这两个按钮在水平方向上居中显示，在垂直方向上都距离底部64dp，那么就需要先添加一个垂直方向上的Guideline，如下图所示。<br>　　<br><img src="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175401448.gif" alt="垂直方向"></p>
<p>　　我来对上图中的操作进行一下解释。首先点击通知栏中的Guidelines图标可以添加一个垂直或水平方向上的Guideline，这里我们需要的是垂直方向上的。而Guideline默认是使用的dp尺，我们需要选中Guideline，并点击一下最上面的箭头图标将它改成百比分尺，然后将垂直方向上的Guideline调整到50%的位置，这样就将准备工作做好了。</p>
<p>　　接下来我们开始实现让两个按钮在水平方向上居中显示，并距离底部64dp的功能，如下图所示。<br>　　<br><img src="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175402417.gif" alt="增加64dp"></p>
<p>　　可以看到，我们给登录按钮的右边向Guideline添加约束，登录按钮的下面向底部添加约束，并拖动按钮让它距离底部64dp。然后给注册按钮的左边向Guideline添加约束，注册按钮的下面向登录按钮的下面添加约束。这样就实现了让两个按钮在水平方向上居中显示，在垂直方向上都距离底部64dp的功能了。<br>##　　自动添加约束 ##<br>　　不过如果界面中的内容变得复杂起来，给每个控件一个个地添加约束也是一件很繁琐的事情。为此，ConstraintLayout中支持自动添加约束的功能，可以极大程度上简化那些繁琐的操作。</p>
<p>　　自动添加约束的方式主要有两种，一种叫Autoconnect，一种叫Inference，我们先来看第一种。</p>
<p>　　想要使用Autoconnect，首先需要在工具栏中将这个功能启用，默认情况下Autoconnect是不启用的，如下图所示。<br><img src="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175402878.png" alt="Autoconnect"></p>
<p>　　Autoconnect可以根据我们拖放控件的状态自动判断应该如何添加约束，比如我们将Button放到界面的正中央，那么它的上下左右都会自动地添加上约束，如下图所示。<br><img src="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175402399.gif" alt="自动约束">
　　</p>
<p>　　然后我们在这个Button的下方再放置一个Button，效果如下。<br><img src="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175402126.gif" alt="Autoconnect"></p>
<p>　　可以看到，只需要将Button拖放到界面上，Autoconnect会判断我们的意图，并自动给控件添加约束。不过Autoconnect是无法保证百分百准确判断出我们的意图的，如果自动添加的约束并不是你想要的话，还可以在任何时候进行手动修改。总之，可以把它当成一个辅助工具，但不能完全靠它去添加控件的约束。<br>　　以上是Autoconnect的用法，接下来我们看一下Inference的用法。Inference也是用于自动添加约束的，但它比Autoconnect的功能要更为强大，因为AutoConnect只能给当前操作的控件自动添加约束，而Inference会给当前界面中的所有元素自动添加约束。因而Inference比较适合用来实现复杂度比较高的界面，它可以一键自动生成所有的约束。<br>　　下面我们就通过一个例子来演示一下Inference的用法，比如界面上现在有两个TextView，两个EditText，和两个Button，如下图所示。<br>　　<br><img src="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175403533.png" alt="Autoconnect"></p>
<p>　　接下来我们先将各个控件按照界面设计的位置进行摆放，摆放完成之后点击一下工具栏上的Infer Constraints按钮，就能为所有控件自动添加约束了，如下图所示。<br>　　<br><img src="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175403858.gif" alt="Autoconnect"><br>　　现在运行一下程序，最终效果如下图所示：<br>　　<br><img src="http://www.jeawaa.com/knowledge/UploadFiles_8892/201702/20170204175403263.png" alt="运行效果"></p>
<p>　　</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://github.com/rohman-zhu/posts/b348c678/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rohman.Zhu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="诺曼实验室">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 诺曼实验室">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/b348c678/" class="post-title-link" itemprop="url">NE555-呼吸灯</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2017-07-06 11:08:14" itemprop="dateCreated datePublished" datetime="2017-07-06T11:08:14+00:00">2017-07-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-12-22 05:27:48" itemprop="dateModified" datetime="2024-12-22T05:27:48+00:00">2024-12-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E7%94%B5%E5%AD%90/" itemprop="url" rel="index"><span itemprop="name">电子</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>其实要做出呼吸灯的效果,直接用单片机的PMW(脉宽调制,即在一个周期内控制高电平的时间与低电平的时间).但是也可以在没有单片机的情况下,组建电路.</p>
<p>而要实现呼吸灯的效果,其实最核心的地方在于能不能控制流进LED的电流,要让这个电流逐渐变大(或者逐渐变小),</p>
<p>实现不断循环的关键在于产生一个一段方波,这里用NE555芯片来做,这个芯片是用于产生振荡电路的.</p>
<h1 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h1><h2 id="NE555"><a href="#NE555" class="headerlink" title="NE555"></a>NE555</h2><p>介绍一下NE555:</p>
<ul>
<li>1脚：外接电源负端VSS或接地，一般情况下接地。</li>
<li>2脚：低触发端TR。</li>
<li>3脚：输出端Vo</li>
<li>4脚：是直接清零端。当此端接低电平，则时基电路不工作，此时不论TR、TH处于何电平，时基电路输出为“0”，该端不用时应接高电平。</li>
<li>5脚：VC为控制电压端。若此端外接电压，则可改变内部两个比较器的基准电压，当该端不用时，应将该端串入一只0.01μF电容接地，以防引入干扰。</li>
<li>6脚：高触发端TH。</li>
<li>7脚：放电端。该端与放电管集电极相连，用做定时器时电容的放电。</li>
<li>8脚：外接电源VCC，双极型时基电路VCC的范围是4.5 ~ 16V，CMOS型时基电路VCC的范围为3 ~ 18V。一般用5V。在1脚接地，5脚未外接电压，两个比较器A1、A2基准电压分别为低电平的情况下，555时基电路的功能表如表1示。</li>
</ul>
<p><img src="http://www.elecfans.com/uploads/160803/1449523-160P31P10SI.png" alt="功能表"><br><img src="http://www.elecfans.com/uploads/160803/1449523-160P31P136229.png" alt="内部结构"><br><img src="http://www.elecfans.com/article/UploadPic/2007-11/20071121182046892.gif" alt="内部结构二"><br><img src="http://www.elecfans.com/uploads/160803/1449523-160P31P136229.png" alt="封装型式"></p>
<p><a target="_blank" rel="noopener" href="https://bbs.kechuang.org/tool/elc/tool/ne555.html">频率计算器</a></p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://github.com/rohman-zhu/posts/73c7af9e/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rohman.Zhu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="诺曼实验室">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 诺曼实验室">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/73c7af9e/" class="post-title-link" itemprop="url">多谐震荡器</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2017-07-05 23:48:26" itemprop="dateCreated datePublished" datetime="2017-07-05T23:48:26+00:00">2017-07-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-12-22 05:27:49" itemprop="dateModified" datetime="2024-12-22T05:27:49+00:00">2024-12-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E7%94%B5%E5%AD%90/" itemprop="url" rel="index"><span itemprop="name">电子</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>之前对手电筒的电路有点感兴趣,为什么一个按钮会有三种状态的灯光状态,于是今天先学习一种状态 – 频闪模式.这个电路主要是用两个NPN型三极管加上两个电解电容组成的.</p>
<h1 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h1><h2 id="一-为什么会两个三极管间断开关呢"><a href="#一-为什么会两个三极管间断开关呢" class="headerlink" title="一.为什么会两个三极管间断开关呢?"></a>一.为什么会两个三极管间断开关呢?</h2><p><img src="http://img0.imgtn.bdimg.com/it/u=1623282880,3585205188&fm=26&gp=0.jpg" alt="电路图"><br>由于电子元件的差异性,我们假设三极管A先导通,那么与三极管A串连的电解电容也会处于充电状态,而三极管B的基极真是与这个电解电容相连,此时基极的电压基本为0,因此三极管B会处于断开状态.</p>
<p>当电容A充满后,此时电容A就为断路状态,三极管B的基极则会分到高电平,那么三极管B就会导通,同时,电容B也会处于充电状态,这就会导致三极管A的基极为低电平,那么就会导致三极管A处于断路,因此与三极管A串联的LED灯则会灭.</p>
<p>如此反复,这个震荡电路就构成了…</p>
<h2 id="二-为什么电解电容处于充电状态就会导致三极管B的基极电压为0"><a href="#二-为什么电解电容处于充电状态就会导致三极管B的基极电压为0" class="headerlink" title="二.为什么电解电容处于充电状态就会导致三极管B的基极电压为0?"></a>二.为什么电解电容处于充电状态就会导致三极管B的基极电压为0?</h2><p>在这里要说明一下,无论是哪种电容,其内部构造本身就是通路状态,电容从无电状态到有电状态的这个充电过程,就是一个通路,因此这个电容才会有通路的特性,这样也就导致了另外一端的三极管B的基极为0电压状态.</p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>这个电路的关键在于了解三极管的特性,两个三极管的通与断关键在于基极的电压,基极为高电平,则导通;那么第二个关键点在于对电容充放电的理解,当电容在充电时,相当电容被短接了,则与电容并联的三极管的基极相当于没有电流通过,这也就导致了这个三极管为断路的状态了.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="Previous page" aria-label="Previous page" href="/page/41/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/41/">41</a><span class="page-number current">42</span><a class="page-number" href="/page/43/">43</a><a class="extend next" rel="next" title="Next page" aria-label="Next page" href="/page/43/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Rohman.Zhu</span>
  </div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  






  





</body>
</html>
