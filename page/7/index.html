<!DOCTYPE html>
<html lang="zh_cn">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha256-5eIC48iZUHmSlSUz9XtjRyK2mzQkHScZY1WdMaoz74E=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"github.com","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.21.1","exturl":false,"sidebar":{"position":"right","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

    <meta property="og:type" content="website">
<meta property="og:title" content="诺曼实验室">
<meta property="og:url" content="http://github.com/rohman-zhu/page/7/index.html">
<meta property="og:site_name" content="诺曼实验室">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Rohman.Zhu">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://github.com/rohman-zhu/page/7/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh_cn","comments":"","permalink":"","path":"page/7/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>诺曼实验室</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="stylesheet" href="/css/prism.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">诺曼实验室</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Rohman.Zhu</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">429</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">44</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">144</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://github.com/rohman-zhu/posts/9e510a03/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rohman.Zhu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="诺曼实验室">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 诺曼实验室">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/9e510a03/" class="post-title-link" itemprop="url">VSAN-健康检查出现分区故障</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-10-06 22:20:15" itemprop="dateCreated datePublished" datetime="2023-10-06T22:20:15+00:00">2023-10-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-12-22 05:27:48" itemprop="dateModified" datetime="2024-12-22T05:27:48+00:00">2024-12-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/VMware/" itemprop="url" rel="index"><span itemprop="name">VMware</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/VMware/vSphere/" itemprop="url" rel="index"><span itemprop="name">vSphere</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/VMware/vSphere/vSAN/" itemprop="url" rel="index"><span itemprop="name">vSAN</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="故障描述"><a href="#故障描述" class="headerlink" title="故障描述"></a>故障描述</h1><p>vSAN集群的健康检查中，出现分区错误，有一台主机的vSAN分区为2号，其他主机的vSAN分区为1号。</p>
<h1 id="原因分析"><a href="#原因分析" class="headerlink" title="原因分析"></a>原因分析</h1><ol>
<li>网络异常：vSAN节点之间网络不通；</li>
<li>版本问题：vSAN节点之间版本不一致；</li>
<li>目标主机未开启集群发现；</li>
</ol>
<h1 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h1><p>先确认 vSAN Kernel 网络流量是否正常；</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获取 vSAN 网卡信息</span></span><br><span class="line">esxcli vsan network list</span><br><span class="line"><span class="comment"># 获取 IP 配置信息</span></span><br><span class="line">esxcli network ip interface ipv4 get</span><br><span class="line"><span class="comment"># 结合上述信息，确定vSAN用的 vmk 、IP信息；</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 发起ping测试</span></span><br><span class="line">ping [目标IP]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定对应网卡发起ping测试</span></span><br><span class="line">vmkping -I [vSAN用的网卡] [目标IP]</span><br></pre></td></tr></table></figure>

<blockquote>
<p>确定网络是否正常，另外MTU也是需要关注的；</p>
</blockquote>
<p>确定磁盘版本是否一致；</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">esxcli system settings advanced list -o /Virsto/DiskFormatVersion</span><br></pre></td></tr></table></figure>

<blockquote>
<p>如果磁盘版本不一致，则需要检查ESXi版本是否一致，是否有升级；</p>
</blockquote>
<p>检查分区更新值</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 确认成员更新值</span></span><br><span class="line">esxcfg-advcfg -g  /VSAN/IgnoreClusterMemberListupdates</span><br><span class="line"><span class="comment"># 如果值为1，则表示目标主机当前状态为“禁止从 vCenter Server 中更新集群成员”</span></span><br><span class="line"><span class="comment"># 需要重新执行指令：</span></span><br><span class="line">esxcfg-advcfg -s 0 /VSAN/IgnoreClusterMemberListupdates</span><br></pre></td></tr></table></figure>

<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p>解决VMware vSAN分区故障：<a target="_blank" rel="noopener" href="https://m.fx361.com/news/2018/1106/18285695.html">https://m.fx361.com/news/2018/1106/18285695.html</a><br>如何使用旧格式版本格式化 VSAN 磁盘组 ：<a target="_blank" rel="noopener" href="https://kb.vmware.com/s/article/2146221?lang=zh_CN">https://kb.vmware.com/s/article/2146221?lang=zh_CN</a><br>vSAN 运行状况服务 - 网络运行状况 - vSAN 群集分区：<a target="_blank" rel="noopener" href="https://kb.vmware.com/s/article/2108011?lang=zh_CN">https://kb.vmware.com/s/article/2108011?lang=zh_CN</a><br>如何处理 VSAN 群集中的隔离&#x2F;分区情形？：<a target="_blank" rel="noopener" href="https://blog.51cto.com/vsdsrevolution/1375800">https://blog.51cto.com/vsdsrevolution/1375800</a><br>Configuring vSAN Unicast networking from the command line (2150303)： <a target="_blank" rel="noopener" href="https://kb.vmware.com/s/article/2150303">https://kb.vmware.com/s/article/2150303</a><br>手动关闭并重新启动 vSAN 集群：<a target="_blank" rel="noopener" href="https://docs.vmware.com/cn/VMware-vSphere/7.0/com.vmware.vsphere.vsan-monitoring.doc/GUID-31B4F958-30A9-4BEC-819E-32A18A685688.html">https://docs.vmware.com/cn/VMware-vSphere/7.0/com.vmware.vsphere.vsan-monitoring.doc/GUID-31B4F958-30A9-4BEC-819E-32A18A685688.html</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://github.com/rohman-zhu/posts/5c673c3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rohman.Zhu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="诺曼实验室">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 诺曼实验室">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/5c673c3/" class="post-title-link" itemprop="url">CentOS7无法启动故障</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-08-27 23:08:01" itemprop="dateCreated datePublished" datetime="2023-08-27T23:08:01+00:00">2023-08-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-12-22 05:27:47" itemprop="dateModified" datetime="2024-12-22T05:27:47+00:00">2024-12-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%95%85%E9%9A%9C/" itemprop="url" rel="index"><span itemprop="name">故障</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="故障描述"><a href="#故障描述" class="headerlink" title="故障描述"></a>故障描述</h1><p>服务器在开机时会出现Log</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[FAILED] Failed to start Security Auditing Service.</span><br><span class="line">[FAILED] Failed to start Journal Service.</span><br></pre></td></tr></table></figure>

<p>使用正确的密码却无法登录服务器，一直提示Login incorrect.</p>
<h1 id="原因分析"><a href="#原因分析" class="headerlink" title="原因分析"></a>原因分析</h1><p>服务器开启了 selinux</p>
<h1 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/selinux/config</span><br><span class="line"></span><br><span class="line">将selinux改为disabled</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://github.com/rohman-zhu/posts/aae56061/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rohman.Zhu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="诺曼实验室">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 诺曼实验室">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/aae56061/" class="post-title-link" itemprop="url">VCSA-503故障-证书到期</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-07-30 17:39:17" itemprop="dateCreated datePublished" datetime="2023-07-30T17:39:17+00:00">2023-07-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-12-22 05:27:48" itemprop="dateModified" datetime="2024-12-22T05:27:48+00:00">2024-12-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/VMware/" itemprop="url" rel="index"><span itemprop="name">VMware</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/VMware/vSphere/" itemprop="url" rel="index"><span itemprop="name">vSphere</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="故障现象"><a href="#故障现象" class="headerlink" title="故障现象"></a>故障现象</h1><ol>
<li>登录vCenter的WEB界面，提示503报错；</li>
<li>登录vCenter的管理界面(<a href="https://VC-IP:5480)，提示服务异常；">https://VC-IP:5480)，提示服务异常；</a></li>
</ol>
<h1 id="原因分析"><a href="#原因分析" class="headerlink" title="原因分析"></a>原因分析</h1><ol>
<li>证书过期后未及时更新，导致服务异常；</li>
</ol>
<h2 id="检查方式1"><a href="#检查方式1" class="headerlink" title="检查方式1"></a>检查方式1</h2><p>登录vCenter的web界面，点击证书详情，可以看到证书到期时间；</p>
<h2 id="检查方式2"><a href="#检查方式2" class="headerlink" title="检查方式2"></a>检查方式2</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 检查指令</span></span><br><span class="line"><span class="keyword">for</span> store <span class="keyword">in</span> $(/usr/lib/vmware-vmafd/bin/vecs-cli store list | grep -v TRUSTED_ROOT_CRLS); <span class="keyword">do</span> <span class="built_in">echo</span> <span class="string">&quot;[*] Store :&quot;</span> <span class="variable">$store</span>; /usr/lib/vmware-vmafd/bin/vecs-cli entry list --store <span class="variable">$store</span> --text | grep -ie <span class="string">&quot;Alias&quot;</span> -ie <span class="string">&quot;Not After&quot;</span>;<span class="keyword">done</span>;</span><br></pre></td></tr></table></figure>

<h1 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h1><p>注意，以下操作执行前，请给VCSA虚拟机执行快照！！</p>
<p>另外需关闭HA功能</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vcha-destroy -f</span><br></pre></td></tr></table></figure>

<p>启动必要服务</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#检查服务启动情况：</span></span><br><span class="line">service-control --status</span><br><span class="line"><span class="comment">#手动启动服务：</span></span><br><span class="line">service-control --start applmgmtd</span><br><span class="line">service-control --start vmafdd</span><br></pre></td></tr></table></figure>

<h2 id="STS证书过期"><a href="#STS证书过期" class="headerlink" title="STS证书过期"></a>STS证书过期</h2><p>Center Single Sign-On Security Token Service (STS) 签名证书是内部 VMware 证书；</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建目录</span></span><br><span class="line"><span class="built_in">mkdir</span> newsts</span><br><span class="line"><span class="built_in">cd</span> newsts</span><br><span class="line"><span class="built_in">pwd</span> </span><br><span class="line"><span class="comment">#resulting output: /root/newst</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 将 certool.cfg 文件复制到新目录中</span></span><br><span class="line"><span class="built_in">cp</span> /usr/lib/vmware-vmca/share/config/certool.cfg /root/newsts</span><br><span class="line"></span><br><span class="line"><span class="comment"># 打开 certool.cfg 文件的副本并进行编辑，以便使用本地 Platform Services Controller 的 IP 地址和主机名。</span></span><br><span class="line">vim certool.cfg</span><br><span class="line"><span class="comment"># Template file for a CSR request</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Country is needed and has to be 2 characters</span></span><br><span class="line">Country = US</span><br><span class="line">Name = STS</span><br><span class="line">Organization = ExampleInc</span><br><span class="line">OrgUnit = ExampleInc Dev</span><br><span class="line">State = Indiana</span><br><span class="line">Locality = Indianapolis</span><br><span class="line">IPAddress = 10.0.1.32</span><br><span class="line">Email = chen@exampleinc.com</span><br><span class="line">Hostname = homecenter.exampleinc.local</span><br><span class="line"></span><br><span class="line"><span class="comment"># 生成密钥</span></span><br><span class="line">/usr/lib/vmware-vmca/bin/certool --server localhost --genkey --privkey=/root/newsts/sts.key --pubkey=/root/newsts/sts.pub</span><br><span class="line"></span><br><span class="line"><span class="comment"># 生成证书</span></span><br><span class="line">/usr/lib/vmware-vmca/bin/certool --gencert --cert=/root/newsts/newsts.cer --privkey=/root/newsts/sts.key --config=/root/newsts/certool.cfg</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将证书转成pk12格式</span></span><br><span class="line">openssl pkcs12 -<span class="built_in">export</span> -<span class="keyword">in</span> /root/newsts/newsts.cer -inkey /root/newsts/sts.key -certfile /var/lib/vmware/vmca/root.cer -name <span class="string">&quot;newstssigning&quot;</span> -passout pass:testpassword -out newsts.p12</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将证书添加到JAVA密钥库</span></span><br><span class="line">/usr/java/jre-vmware/bin/keytool -v -importkeystore -srckeystore newsts.p12 -srcstoretype pkcs12 -srcstorepass testpassword -srcalias newstssigning -destkeystore root-trust.jks -deststoretype JKS -deststorepass testpassword -destkeypass testpassword</span><br><span class="line"></span><br><span class="line">/usr/java/jre-vmware/bin/keytool -v -importcert -keystore root-trust.jks -deststoretype JKS -storepass testpassword -keypass testpassword -file /var/lib/vmware/vmca/root.cer -<span class="built_in">alias</span> root-ca</span><br><span class="line"><span class="comment"># 出现提示时，键入 Yes 接受证书以将其添加到密钥库。</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="根证书替换"><a href="#根证书替换" class="headerlink" title="根证书替换"></a>根证书替换</h2><p>需要先获取：</p>
<ol>
<li><a href="mailto:&#97;&#x64;&#109;&#x69;&#x6e;&#x69;&#x73;&#116;&#114;&#97;&#x74;&#111;&#x72;&#64;&#118;&#x73;&#112;&#104;&#x65;&#x72;&#x65;&#x2e;&#108;&#111;&#99;&#97;&#x6c;">&#97;&#x64;&#109;&#x69;&#x6e;&#x69;&#x73;&#116;&#114;&#97;&#x74;&#111;&#x72;&#64;&#118;&#x73;&#112;&#104;&#x65;&#x72;&#x65;&#x2e;&#108;&#111;&#99;&#97;&#x6c;</a>密码</li>
<li>VCSA的FQDN；</li>
</ol>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 生成脚本路径：</span></span><br><span class="line"><span class="comment"># LINUX版本的VCSA：/usr/lib/vmware-vmca/bin/certificate-manager</span></span><br><span class="line"><span class="comment"># WINDOWS版本的VCSA：C:\Program Files\VMware\vCenter Server\vmcad\certificate-manager.bat</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 选择4,Regenerate a new VMCA Root Certificate and replace all certificates。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 根据提示，输入指定信息</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 重启服务</span></span><br><span class="line">service-control --stop --all</span><br><span class="line">service-control --start vmafdd</span><br><span class="line">service-control --start vmdird</span><br><span class="line">service-control --start vmcad</span><br><span class="line">service-control --start --all</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="更换方式2，全部证书重置"><a href="#更换方式2，全部证书重置" class="headerlink" title="更换方式2，全部证书重置"></a>更换方式2，全部证书重置</h2><blockquote>
<p>2024-08-16</p>
</blockquote>
<p>需要先获取：</p>
<ol>
<li><a href="mailto:&#97;&#x64;&#x6d;&#105;&#x6e;&#105;&#115;&#116;&#114;&#x61;&#x74;&#x6f;&#x72;&#x40;&#x76;&#x73;&#112;&#104;&#101;&#114;&#x65;&#46;&#x6c;&#111;&#99;&#97;&#108;">&#97;&#x64;&#x6d;&#105;&#x6e;&#105;&#115;&#116;&#114;&#x61;&#x74;&#x6f;&#x72;&#x40;&#x76;&#x73;&#112;&#104;&#101;&#114;&#x65;&#46;&#x6c;&#111;&#99;&#97;&#108;</a>密码</li>
<li>VCSA的FQDN；</li>
<li>获取VCSA的FQDN、VCSA的hostname；</li>
</ol>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/usr/lib/vmware-vmafd/bin/vmafd-cli get-pnid --server-name localhost</span><br><span class="line">/usr/lib/vmware-vmafd/bin/vecs-cli entry list --store MACHINE_SSL_CERT --text | grep -A1 Alternative</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 生成脚本路径：</span></span><br><span class="line"><span class="comment"># LINUX版本的VCSA：/usr/lib/vmware-vmca/bin/certificate-manager</span></span><br><span class="line"><span class="comment"># WINDOWS版本的VCSA：C:\Program Files\VMware\vCenter Server\vmcad\certificate-manager.bat</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 选择8,Reset all Certificates</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 关键字段！！以下两个字段需要先确认自身的FQDN后填写，不可乱填写</span></span><br><span class="line"><span class="comment"># IPAddress</span></span><br><span class="line"><span class="comment"># FQDN</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 根据提示，输入指定信息</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 重启服务</span></span><br><span class="line">service-control --stop --all</span><br><span class="line">service-control --start vmafdd</span><br><span class="line">service-control --start vmdird</span><br><span class="line">service-control --start vmcad</span><br><span class="line">service-control --start --all</span><br></pre></td></tr></table></figure>

<h1 id="后续待办"><a href="#后续待办" class="headerlink" title="后续待办"></a>后续待办</h1><ol>
<li>【高优先级】证书监控；</li>
<li>证书自动续签；</li>
</ol>
<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p>检查证书：<a target="_blank" rel="noopener" href="https://kb.vmware.com/s/article/82332">https://kb.vmware.com/s/article/82332</a><br>503报错相关处理步骤：<a target="_blank" rel="noopener" href="https://kb.vmware.com/s/article/67818?lang=zh_cn">https://kb.vmware.com/s/article/67818?lang=zh_cn</a><br>更换STS证书：<a target="_blank" rel="noopener" href="https://docs.vmware.com/cn/VMware-vSphere/6.7/com.vmware.psc.doc/GUID-497233EA-AEF9-464B-A9C3-CCAEEA90C801.html#:~:text=%E7%94%B1%E4%BA%8E%20vCenter%20Single%20Sign-On%20Security%20Token%20Service%20%28STS%29,%E7%AD%BE%E5%90%8D%E8%AF%81%E4%B9%A6%E6%98%AF%E5%86%85%E9%83%A8%20VMware%20%E8%AF%81%E4%B9%A6%EF%BC%8C%E5%9B%A0%E6%AD%A4%E8%AF%B7%E5%8B%BF%E6%9B%BF%E6%8D%A2%E5%AE%83%EF%BC%8C%E9%99%A4%E9%9D%9E%E8%B4%B5%E5%85%AC%E5%8F%B8%E8%A6%81%E6%B1%82%E6%9B%BF%E6%8D%A2%E5%86%85%E9%83%A8%E8%AF%81%E4%B9%A6%E3%80%82%20%E5%A6%82%E6%9E%9C%E8%A6%81%E6%9B%BF%E6%8D%A2%E9%BB%98%E8%AE%A4%E7%9A%84%20STS%20%E7%AD%BE%E5%90%8D%E8%AF%81%E4%B9%A6%EF%BC%8C%E5%BF%85%E9%A1%BB%E7%94%9F%E6%88%90%E4%B8%80%E4%B8%AA%E6%96%B0%E8%AF%81%E4%B9%A6%E5%B9%B6%E5%B0%86%E5%85%B6%E6%B7%BB%E5%8A%A0%E5%88%B0%20Java%20%E5%AF%86%E9%92%A5%E5%BA%93%E3%80%82">https://docs.vmware.com/cn/VMware-vSphere/6.7/com.vmware.psc.doc/GUID-497233EA-AEF9-464B-A9C3-CCAEEA90C801.html#:~:text=%E7%94%B1%E4%BA%8E%20vCenter%20Single%20Sign-On%20Security%20Token%20Service%20%28STS%29,%E7%AD%BE%E5%90%8D%E8%AF%81%E4%B9%A6%E6%98%AF%E5%86%85%E9%83%A8%20VMware%20%E8%AF%81%E4%B9%A6%EF%BC%8C%E5%9B%A0%E6%AD%A4%E8%AF%B7%E5%8B%BF%E6%9B%BF%E6%8D%A2%E5%AE%83%EF%BC%8C%E9%99%A4%E9%9D%9E%E8%B4%B5%E5%85%AC%E5%8F%B8%E8%A6%81%E6%B1%82%E6%9B%BF%E6%8D%A2%E5%86%85%E9%83%A8%E8%AF%81%E4%B9%A6%E3%80%82%20%E5%A6%82%E6%9E%9C%E8%A6%81%E6%9B%BF%E6%8D%A2%E9%BB%98%E8%AE%A4%E7%9A%84%20STS%20%E7%AD%BE%E5%90%8D%E8%AF%81%E4%B9%A6%EF%BC%8C%E5%BF%85%E9%A1%BB%E7%94%9F%E6%88%90%E4%B8%80%E4%B8%AA%E6%96%B0%E8%AF%81%E4%B9%A6%E5%B9%B6%E5%B0%86%E5%85%B6%E6%B7%BB%E5%8A%A0%E5%88%B0%20Java%20%E5%AF%86%E9%92%A5%E5%BA%93%E3%80%82</a><br>重新生成新的VMCA根证书并替换所有证书：<a target="_blank" rel="noopener" href="https://docs.vmware.com/cn/VMware-vSphere/6.7/com.vmware.psc.doc/GUID-D944C044-B682-4427-90F8-55B8770F21AF.html">https://docs.vmware.com/cn/VMware-vSphere/6.7/com.vmware.psc.doc/GUID-D944C044-B682-4427-90F8-55B8770F21AF.html</a><br>自动替换VCSA证书：<a target="_blank" rel="noopener" href="https://kb.vmware.com/s/article/2112281?lang=zh_cn">https://kb.vmware.com/s/article/2112281?lang=zh_cn</a><br>STS证书处理KB：<a target="_blank" rel="noopener" href="https://kb.vmware.com/s/article/79248?lang=zh_cn">https://kb.vmware.com/s/article/79248?lang=zh_cn</a><br>vCenter使用VMCA续订证书：续订证书时发生意外错误：<a target="_blank" rel="noopener" href="https://www.dinghui.org/vcenter-vmca-machine-cert.html">https://www.dinghui.org/vcenter-vmca-machine-cert.html</a><br>VCSA 7.0 证书过期后的修复工作：<a target="_blank" rel="noopener" href="https://ngx.hk/2023/01/10/vcsa-7-0%e8%af%81%e4%b9%a6%e8%bf%87%e6%9c%9f%e5%90%8e%e7%9a%84%e4%bf%ae%e5%a4%8d%e5%b7%a5%e4%bd%9c.html">https://ngx.hk/2023/01/10/vcsa-7-0%e8%af%81%e4%b9%a6%e8%bf%87%e6%9c%9f%e5%90%8e%e7%9a%84%e4%bf%ae%e5%a4%8d%e5%b7%a5%e4%bd%9c.html</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://github.com/rohman-zhu/posts/4f7b31ae/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rohman.Zhu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="诺曼实验室">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 诺曼实验室">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/4f7b31ae/" class="post-title-link" itemprop="url">vCenter磁盘空间扩容</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-07-30 17:31:46" itemprop="dateCreated datePublished" datetime="2023-07-30T17:31:46+00:00">2023-07-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-12-22 05:27:49" itemprop="dateModified" datetime="2024-12-22T05:27:49+00:00">2024-12-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/VMware/" itemprop="url" rel="index"><span itemprop="name">VMware</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/VMware/vSphere/" itemprop="url" rel="index"><span itemprop="name">vSphere</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="故障描述"><a href="#故障描述" class="headerlink" title="故障描述"></a>故障描述</h1><ol>
<li>vCenter告警：Log Disk Exhaustion on vCenter；</li>
<li>进入vCenter的5480端口界面，看到磁盘空间耗尽；</li>
</ol>
<h1 id="故障分析"><a href="#故障分析" class="headerlink" title="故障分析"></a>故障分析</h1><ol>
<li>log增长，导致空间占满。</li>
</ol>
<h1 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h1><h2 id="短期："><a href="#短期：" class="headerlink" title="短期："></a>短期：</h2><p>找到目标硬盘，执行扩容：</p>
<ol>
<li>虚拟化层，扩容目标硬盘；</li>
<li>OS层，扩容目标空间；</li>
</ol>
<p>执行指令：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vpxd_servicecfg storage lvm autogrow</span><br></pre></td></tr></table></figure>

<h2 id="长期："><a href="#长期：" class="headerlink" title="长期："></a>长期：</h2><ol>
<li>设置日志保存周期；</li>
<li>设置VCSA空间告警；</li>
</ol>
<h1 id="其他补充"><a href="#其他补充" class="headerlink" title="其他补充"></a>其他补充</h1><table>
<thead>
<tr>
<th align="left">磁盘(VMDK)</th>
<th align="left">默认大小（微型，具有默认存储大小）</th>
<th align="left">挂载点</th>
<th align="left">作用</th>
</tr>
</thead>
<tbody><tr>
<td align="left">VMDK1</td>
<td align="left">12 GB</td>
<td align="left">&#x2F;(10 GB), &#x2F;boot (132 MB), SWAP (1 GB)</td>
<td align="left">存储内核映像和引导加载程序配置的目录。</td>
</tr>
<tr>
<td align="left">VMDK2</td>
<td align="left">1.8 GB</td>
<td align="left">&#x2F;tmp</td>
<td align="left">用于存储 vCenter Server 中的服务生成或使用的临时文件的目录</td>
</tr>
<tr>
<td align="left">VMDK3</td>
<td align="left">25 GB</td>
<td align="left">SWAP</td>
<td align="left">系统内存不足时用于交换到磁盘的目录</td>
</tr>
<tr>
<td align="left">VMDK4</td>
<td align="left">25 GB</td>
<td align="left">&#x2F;storage&#x2F;core</td>
<td align="left">用于存储 vCenter Server 中 VPXD  进程的核心转储文件的目录</td>
</tr>
<tr>
<td align="left">VMDK5</td>
<td align="left">10 GB</td>
<td align="left">&#x2F;storage&#x2F;log</td>
<td align="left">vCenter Server 和 Platform Services Controller 存储环境的所有日志的目录</td>
</tr>
<tr>
<td align="left">VMDK6</td>
<td align="left">10 GB</td>
<td align="left">&#x2F;storage&#x2F;db</td>
<td align="left">VMware Postgres 数据库存储位置</td>
</tr>
<tr>
<td align="left">VMDK7</td>
<td align="left">5 GB</td>
<td align="left">&#x2F;storage&#x2F;dblog</td>
<td align="left">VMware Postgres 数据库日志记录位置</td>
</tr>
<tr>
<td align="left">VMDK8</td>
<td align="left">10 GB</td>
<td align="left">&#x2F;storage&#x2F;seat</td>
<td align="left">VMware Postgres 的统计信息、事件、警报和任务 (SEAT) 目录</td>
</tr>
<tr>
<td align="left">VMDK9</td>
<td align="left">1 GB</td>
<td align="left">&#x2F;storage&#x2F;netdump</td>
<td align="left">VMware Netdump Collector 存储库，用于存储 ESXi 转储</td>
</tr>
<tr>
<td align="left">VMDK10</td>
<td align="left">10 GB</td>
<td align="left">&#x2F;storage&#x2F;autodeploy</td>
<td align="left">VMware Auto Deploy 存储库，存储用于 ESXi 主机无状态引导的</td>
</tr>
<tr>
<td align="left">VMDK11</td>
<td align="left">10 GB</td>
<td align="left">&#x2F;storage&#x2F;imagebuilder</td>
<td align="left">VMware Image Builder 存储库，用于存储 vSphere 映像配置文件、软件库和 VIB 软件包，例如驱动程序 VIB 和更新 VIB。</td>
</tr>
<tr>
<td align="left">VMDK12</td>
<td align="left">100 GB</td>
<td align="left">&#x2F;storage&#x2F;updatemgr</td>
<td align="left">VMware Update Manager 存储库，用于存储虚拟机和 ESXi 主机的修补程序和更新</td>
</tr>
<tr>
<td align="left">VMDK13</td>
<td align="left">50 GB</td>
<td align="left">&#x2F;storage&#x2F;archive</td>
<td align="left">VMware Postgres 数据库的预写日志记录 (WAL) 位置</td>
</tr>
</tbody></table>
<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a target="_blank" rel="noopener" href="https://www.dinghui.org/increasing-the-disk-space-for-the-vcenter-server-appliance.html">https://www.dinghui.org/increasing-the-disk-space-for-the-vcenter-server-appliance.html</a><br>Troubleshooting vCenter Appliance &#x2F;storage&#x2F;log directory is 80% or more full (83070): <a target="_blank" rel="noopener" href="https://kb.vmware.com/s/article/83070?lang=zh_cn">https://kb.vmware.com/s/article/83070?lang=zh_cn</a><br>vCenter Server Appliance disk space is full (76563)<br>:<a target="_blank" rel="noopener" href="https://kb.vmware.com/s/article/76563">https://kb.vmware.com/s/article/76563</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://github.com/rohman-zhu/posts/8ec359a/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rohman.Zhu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="诺曼实验室">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 诺曼实验室">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/8ec359a/" class="post-title-link" itemprop="url">Citrix 合作伙伴信息</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-07-30 17:23:44" itemprop="dateCreated datePublished" datetime="2023-07-30T17:23:44+00:00">2023-07-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-12-22 05:27:47" itemprop="dateModified" datetime="2024-12-22T05:27:47+00:00">2024-12-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Citrix/" itemprop="url" rel="index"><span itemprop="name">Citrix</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Citrix-代理商资质信息"><a href="#Citrix-代理商资质信息" class="headerlink" title="Citrix 代理商资质信息"></a>Citrix 代理商资质信息</h1><p>目前有4中资质,资质从低到高分别是：</p>
<ol>
<li>Silver Solution Advisor</li>
<li>Gold Solution Advisor</li>
<li>Platinum Solution Advisor</li>
<li>Platinum Plus Solution Advisor</li>
</ol>
<blockquote>
<p>信息截止至：2023年</p>
</blockquote>
<h1 id="可以在Citrix官网查询"><a href="#可以在Citrix官网查询" class="headerlink" title="可以在Citrix官网查询"></a>可以在Citrix官网查询</h1><p><a target="_blank" rel="noopener" href="https://www.citrix.com/buy/partnerlocator/results.html?partnertypes=CSN&levels=PLATINUM">https://www.citrix.com/buy/partnerlocator/results.html?partnertypes=CSN&amp;levels=PLATINUM</a></p>
<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a target="_blank" rel="noopener" href="https://www.citrix.com/buy/partnerlocator/results.html?partnertypes=CSN&levels=PLATINUM">https://www.citrix.com/buy/partnerlocator/results.html?partnertypes=CSN&amp;levels=PLATINUM</a><br><a target="_blank" rel="noopener" href="https://www.citrix.com/buy/partnerlocator/results.html?partnertypes=CSN&levels=PLATINUM">https://www.citrix.com/buy/partnerlocator/results.html?partnertypes=CSN&amp;levels=PLATINUM</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://github.com/rohman-zhu/posts/9b8590f7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rohman.Zhu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="诺曼实验室">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 诺曼实验室">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/9b8590f7/" class="post-title-link" itemprop="url">Citrix Virtual Apps and Desktops 常用指令</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-07-30 17:19:20" itemprop="dateCreated datePublished" datetime="2023-07-30T17:19:20+00:00">2023-07-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-12-22 05:27:47" itemprop="dateModified" datetime="2024-12-22T05:27:47+00:00">2024-12-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Citrix/" itemprop="url" rel="index"><span itemprop="name">Citrix</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="如何使用"><a href="#如何使用" class="headerlink" title="如何使用"></a>如何使用</h1><ol>
<li>安装SDK，或者直接在DDC中打开powershell</li>
<li>加载SDK，使用指令 asnp citrix*</li>
</ol>
<h2 id="获取用户信息"><a href="#获取用户信息" class="headerlink" title="获取用户信息"></a>获取用户信息</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Get-BrokerUser</span></span><br></pre></td></tr></table></figure>


<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul>
<li><a target="_blank" rel="noopener" href="https://developer-docs.citrix.com/projects/citrix-virtual-apps-desktops-sdk/en/latest/Broker/Get-BrokerUser/">https://developer-docs.citrix.com/projects/citrix-virtual-apps-desktops-sdk/en/latest/Broker/Get-BrokerUser/</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.citrix.com/en-us/xenapp-and-xendesktop">https://docs.citrix.com/en-us/xenapp-and-xendesktop</a></li>
<li><a target="_blank" rel="noopener" href="https://support.citrix.com/article/CTX222326/how-to-configure-powershell-sdk-and-execute-commands-remotely-in-xenappxendesktop-7x#:~:text=Install%20these%20PowerShell%20Snap-ins%20on%20the%20machine%20where,Citrix%20PowerShell%20commands%20by%20using%20the%20%22AdminAddress%22%20parameter">https://support.citrix.com/article/CTX222326/how-to-configure-powershell-sdk-and-execute-commands-remotely-in-xenappxendesktop-7x#:~:text=Install%20these%20PowerShell%20Snap-ins%20on%20the%20machine%20where,Citrix%20PowerShell%20commands%20by%20using%20the%20%22AdminAddress%22%20parameter</a>.</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://github.com/rohman-zhu/posts/5898552c/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rohman.Zhu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="诺曼实验室">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 诺曼实验室">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/5898552c/" class="post-title-link" itemprop="url">ESXi-时间服务器相关</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-07-30 16:16:51" itemprop="dateCreated datePublished" datetime="2023-07-30T16:16:51+00:00">2023-07-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-12-22 05:27:47" itemprop="dateModified" datetime="2024-12-22T05:27:47+00:00">2024-12-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/VMware/" itemprop="url" rel="index"><span itemprop="name">VMware</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/VMware/vSphere/" itemprop="url" rel="index"><span itemprop="name">vSphere</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="ESXi中的NTP服务"><a href="#ESXi中的NTP服务" class="headerlink" title="ESXi中的NTP服务"></a>ESXi中的NTP服务</h1><h2 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h2><ol>
<li>宿主机时间校准；</li>
<li>虚拟机时间校准；</li>
</ol>
<blockquote>
<p>虚拟机高级菜单中取消勾选“与主机同步时间”，每一次VMware Tools重启时，均会与主机同步时间。</p>
</blockquote>
<h2 id="相关指令–ntpq"><a href="#相关指令–ntpq" class="headerlink" title="相关指令–ntpq"></a>相关指令–ntpq</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查询指令</span></span><br><span class="line">ntpq -p ESXi_host_IP</span><br><span class="line"></span><br><span class="line"><span class="comment"># 出现以下内容</span></span><br><span class="line">remote refid st t when poll reach delay offset jitter</span><br><span class="line">==============================================================================</span><br><span class="line">*10.11.12.130.0.0.0 1 - 46 64 377 43.76 -5.58 40000</span><br></pre></td></tr></table></figure>

<h3 id="显示结果说明"><a href="#显示结果说明" class="headerlink" title="显示结果说明"></a>显示结果说明</h3><table>
<thead>
<tr>
<th align="left">参数项</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left">remote</td>
<td align="left">已配置的上游 NTP 服务器的主机名或 IP 地址。</td>
</tr>
<tr>
<td align="left">refid</td>
<td align="left">与 NTP 服务器同步的时间流的标识。如果收到的 refid 为“.INIT.”，则说明 ESXi&#x2F;ESX 主机未从已配置的 NTP 服务器收到响应。</td>
</tr>
<tr>
<td align="left">st</td>
<td align="left">Stratum 值代表上游 NTP 服务器的层次结构。值越高，表明 NTP 服务器越偏离根时间源。这些值是相对值，可以通过 NTP 服务器手动设置。</td>
</tr>
<tr>
<td align="left">t</td>
<td align="left">用于 NTP 通信的软件包交换类型。通常“u”表示单播 UDP。</td>
</tr>
<tr>
<td align="left">when</td>
<td align="left">自上次尝试轮询已配置的上游 NTP 服务器以来所经过的时间（秒）。</td>
</tr>
<tr>
<td align="left">poll</td>
<td align="left">ESXi&#x2F;ESX 主机轮询已配置的 NTP 服务器的间隔（秒）。</td>
</tr>
<tr>
<td align="left">reach</td>
<td align="left">8 位八进制 (base 8) 的移位寄存器，在连接已配置的 NTP 服务器时，每一位代表成功 (1) 或失败 (0)。值</td>
</tr>
<tr>
<td align="left">delay</td>
<td align="left">已配置的 NTP 服务器与 ESXi&#x2F;ESX 主机之间通信的往返延迟（毫秒）。</td>
</tr>
<tr>
<td align="left">offset</td>
<td align="left">已配置 NTP 服务器与 ESXi&#x2F;ESX 主机之间的时间偏移（毫秒）。理想值为接近 0 的值。</td>
</tr>
<tr>
<td align="left">jitter</td>
<td align="left">在已配置 NTP 服务器的时间时钟脉冲之间观察到的时间抖动或偏差。理想值为接近 0 的值。</td>
</tr>
</tbody></table>
<blockquote>
<p>By default, the NTP polling interval is 64 seconds.</p>
</blockquote>
<h2 id="查询网络流量信息"><a href="#查询网络流量信息" class="headerlink" title="查询网络流量信息"></a>查询网络流量信息</h2><h3 id="方法1"><a href="#方法1" class="headerlink" title="方法1"></a>方法1</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用以下命令获取可用 VMkernel 网络接口的列表：</span></span><br><span class="line">esxcfg-vmknic -l</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用以下命令捕获端口 123 上流经 NTP 服务器的 NTP 网络流量：</span></span><br><span class="line">tcpdump-uw -c 4 -n [使用目标网卡] host [NTP 服务器地址] and port 123</span><br><span class="line"><span class="comment"># 例如：</span></span><br><span class="line">tcpdump-uw -c 5 -n -i vmk0 host 10.11.12.13 and port 123</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="方法2"><a href="#方法2" class="headerlink" title="方法2"></a>方法2</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看可用网卡</span></span><br><span class="line">esxcfg-vswif -l</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用以下命令捕获端口 123 上流经 NTP 服务器的 NTP 网络流量：</span></span><br><span class="line">esxcfg-vswif -c 4 -n -i [使用目标网卡] host [NTP 服务器地址] and port 123</span><br></pre></td></tr></table></figure>

<h2 id="查询日志"><a href="#查询日志" class="headerlink" title="查询日志"></a>查询日志</h2><p>需要配置日志信息：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建日志地址</span></span><br><span class="line"><span class="built_in">mkdir</span> /var/log/ntp</span><br><span class="line"></span><br><span class="line"><span class="comment"># 增加日志文件存放配置</span></span><br><span class="line"><span class="comment"># /etc/ntp.conf</span></span><br><span class="line">vim /etc/ntp.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 增加以下四行内容</span></span><br><span class="line">statistics loopstats</span><br><span class="line">statsdir /var/log/ntp/</span><br><span class="line">filegen peerstats file peers <span class="built_in">type</span> day <span class="built_in">link</span> <span class="built_in">enable</span></span><br><span class="line">filegen loopstats file loops <span class="built_in">type</span> day <span class="built_in">link</span> <span class="built_in">enable</span></span><br></pre></td></tr></table></figure>

<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p>VMware官方KB：<a target="_blank" rel="noopener" href="https://kb.vmware.com/s/article/1005092?lang=zh_CN">https://kb.vmware.com/s/article/1005092?lang=zh_CN</a><br>NTP默认查询间隔：<a target="_blank" rel="noopener" href="https://techhub.hpe.com/eginfolib/networking/docs/switches/5120si/cr/5998-8502_nmm_cr/content/436058975.htm">https://techhub.hpe.com/eginfolib/networking/docs/switches/5120si/cr/5998-8502_nmm_cr/content/436058975.htm</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://github.com/rohman-zhu/posts/ea1f31d5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rohman.Zhu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="诺曼实验室">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 诺曼实验室">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/ea1f31d5/" class="post-title-link" itemprop="url">VMware Horizon-连接服务器常规配置注意事项</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-07-30 15:33:11" itemprop="dateCreated datePublished" datetime="2023-07-30T15:33:11+00:00">2023-07-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-12-22 05:27:48" itemprop="dateModified" datetime="2024-12-22T05:27:48+00:00">2024-12-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/VMware/" itemprop="url" rel="index"><span itemprop="name">VMware</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/VMware/Horizon-View/" itemprop="url" rel="index"><span itemprop="name">Horizon View</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="配置文件-locked-properties-–-检查源-checkOrigin"><a href="#配置文件-locked-properties-–-检查源-checkOrigin" class="headerlink" title="配置文件 locked.properties – 检查源 checkOrigin"></a>配置文件 locked.properties – 检查源 checkOrigin</h1><p>问题：连接服务器管理后台会提示“Failed to connect to the Connection Server”</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">checkOrigin = false</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://kb.vmware.com/s/article/2144768?lang=zh_cn">https://kb.vmware.com/s/article/2144768?lang=zh_cn</a></p>
<h1 id="配置文件-locked-properties-–-CORS（Cross-Origin-Resource-Sharing）-，enableCORS"><a href="#配置文件-locked-properties-–-CORS（Cross-Origin-Resource-Sharing）-，enableCORS" class="headerlink" title="配置文件 locked.properties – CORS（Cross-Origin Resource Sharing） ，enableCORS"></a>配置文件 locked.properties – CORS（Cross-Origin Resource Sharing） ，enableCORS</h1><p>问题：Horizon 8 后，CORS（Cross-Origin Resource Sharing）默认是开启的；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">enableCORS = false</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://kb.vmware.com/s/article/2144768">https://kb.vmware.com/s/article/2144768</a><br><a target="_blank" rel="noopener" href="https://kb.vmware.com/s/article/85801">https://kb.vmware.com/s/article/85801</a></p>
<h1 id="添加UAG服务器步骤简写"><a href="#添加UAG服务器步骤简写" class="headerlink" title="添加UAG服务器步骤简写"></a>添加UAG服务器步骤简写</h1><ol>
<li>虚拟机化层，部署UAG镜像；</li>
<li>应用层，配置UAG，即进入UAG管理界面 <a target="_blank" rel="noopener" href="https://uag-ip:9443/">https://UAG-IP:9443</a> ；</li>
</ol>
<ul>
<li>配置连接服务器地址</li>
<li>导入证书</li>
</ul>
<ol start="3">
<li>应用层，配置Connection Server，即进入Connection Server管理界面 <a target="_blank" rel="noopener" href="https://connectionserver-ip/admin">https://ConnectionServer-IP/admin</a> ；</li>
</ol>
<ul>
<li>连接服务器不使用安全网关</li>
<li>添加UAG服务器</li>
</ul>
<h1 id="安全服务器-连接服务器配置证书步骤"><a href="#安全服务器-连接服务器配置证书步骤" class="headerlink" title="安全服务器&#x2F;连接服务器配置证书步骤"></a>安全服务器&#x2F;连接服务器配置证书步骤</h1><ol>
<li>生成pkg证书文件；</li>
<li>导入安全服务器服务器；</li>
<li>修改目标证书别名为vdm；</li>
</ol>
<h1 id="UAG服务器证书配置步骤"><a href="#UAG服务器证书配置步骤" class="headerlink" title="UAG服务器证书配置步骤"></a>UAG服务器证书配置步骤</h1><ol>
<li>生成pkg证书文件；</li>
<li>导入UAG服务器；</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://github.com/rohman-zhu/posts/86d67da7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rohman.Zhu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="诺曼实验室">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 诺曼实验室">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/86d67da7/" class="post-title-link" itemprop="url">CentOS图形化远程桌面方案-XRDP-GNOME</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-04-30 17:27:10" itemprop="dateCreated datePublished" datetime="2023-04-30T17:27:10+00:00">2023-04-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-12-22 05:27:47" itemprop="dateModified" datetime="2024-12-22T05:27:47+00:00">2024-12-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Linux/CentOS/" itemprop="url" rel="index"><span itemprop="name">CentOS</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="需求分析"><a href="#需求分析" class="headerlink" title="需求分析"></a>需求分析</h1><p>CentOS 常规远程的方法是 CLI 方式，但是也有GUI界面的需求；</p>
<h1 id="操作方式"><a href="#操作方式" class="headerlink" title="操作方式"></a>操作方式</h1><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装GUI桌面</span></span><br><span class="line"><span class="comment"># groupinstall 是会安装关联目标软件的包；</span></span><br><span class="line"><span class="comment"># install 仅安装目标软件；</span></span><br><span class="line">yum groupinstall <span class="string">&quot;GNOME Desktop&quot;</span></span><br><span class="line"><span class="comment"># 初始化Desktop</span></span><br><span class="line">startx</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装xrdp</span></span><br><span class="line"><span class="comment"># 需要先配置epel包；</span></span><br><span class="line">yum install epel* -y</span><br><span class="line">yum install xrdp</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>客户端远程方式：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mstsc 到目标服务器</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://github.com/rohman-zhu/posts/be9942a7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rohman.Zhu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="诺曼实验室">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 诺曼实验室">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/be9942a7/" class="post-title-link" itemprop="url">Ubuntu图形化远程桌面方案-XRDP+GNOME</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-04-30 17:01:08" itemprop="dateCreated datePublished" datetime="2023-04-30T17:01:08+00:00">2023-04-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-12-22 05:27:48" itemprop="dateModified" datetime="2024-12-22T05:27:48+00:00">2024-12-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Linux/Ubuntu/" itemprop="url" rel="index"><span itemprop="name">Ubuntu</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="需求分析"><a href="#需求分析" class="headerlink" title="需求分析"></a>需求分析</h1><p>Ubuntu 常规远程的方法是 CLI 方式，但是也有GUI界面的需求；</p>
<h1 id="操作方式"><a href="#操作方式" class="headerlink" title="操作方式"></a>操作方式</h1><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install xrdp gnmoe</span><br></pre></td></tr></table></figure>

<p>客户端远程方式：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mstsc 到目标服务器</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="Previous page" aria-label="Previous page" href="/page/6/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/">8</a><span class="space">&hellip;</span><a class="page-number" href="/page/43/">43</a><a class="extend next" rel="next" title="Next page" aria-label="Next page" href="/page/8/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Rohman.Zhu</span>
  </div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  






  





</body>
</html>
