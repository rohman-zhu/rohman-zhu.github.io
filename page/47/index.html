<!DOCTYPE html>
<html lang="zh_cn">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha256-5eIC48iZUHmSlSUz9XtjRyK2mzQkHScZY1WdMaoz74E=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"github.com","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.21.1","exturl":false,"sidebar":{"position":"right","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

    <meta property="og:type" content="website">
<meta property="og:title" content="诺曼实验室">
<meta property="og:url" content="http://github.com/rohman-zhu/page/47/index.html">
<meta property="og:site_name" content="诺曼实验室">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Rohman.Zhu">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://github.com/rohman-zhu/page/47/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh_cn","comments":"","permalink":"","path":"page/47/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>诺曼实验室</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="stylesheet" href="/css/prism.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">诺曼实验室</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Rohman.Zhu</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">466</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">42</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">152</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://github.com/rohman-zhu/posts/b562b54a/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rohman.Zhu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="诺曼实验室">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 诺曼实验室">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/b562b54a/" class="post-title-link" itemprop="url">浅谈三极管</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2017-07-01 00:04:04" itemprop="dateCreated datePublished" datetime="2017-07-01T00:04:04+00:00">2017-07-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-12-22 05:27:49" itemprop="dateModified" datetime="2024-12-22T05:27:49+00:00">2024-12-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E7%94%B5%E5%AD%90/" itemprop="url" rel="index"><span itemprop="name">电子</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>在电路中都能经常用三极管,三级管的作用有很多,可以当成一个开关或者放大器.但三级管也比较难以理解,因为这个小元器件上面有太多的概念,如PNP,NPN,包和电压,截至电压……我一看到这些就头大,可能是因为自己不愿意去多学吧,或者自己不愿意话太多的时间去动脑,因此我一直都没有学会怎么去应用三极管.可是,天无绝人之路,今天我就看到一个视屏讲解三极管,讲的内容非常少,但却很有用,在这里做一下总结,方便以后查看.</p>
<h1 id="一-三极管的三个脚"><a href="#一-三极管的三个脚" class="headerlink" title="一 . 三极管的三个脚"></a>一 . 三极管的三个脚</h1><ul>
<li>E 极: 表示发射极(Emitter),如果 <em>向外</em> 就是PNP型三极管,反之则是NPN型三极管. 这个方向也代表了电势降落的方向.</li>
<li>B 极 : 表示基极(Basc),我们在这里不用想太多,就把这里当成开关或者阀门就好,</li>
<li>C 极: 表示集电极(Collector).</li>
</ul>
<h1 id="二-用三极管来当开关"><a href="#二-用三极管来当开关" class="headerlink" title="二. 用三极管来当开关"></a>二. 用三极管来当开关</h1><blockquote>
<p>三极管是常开状态 的开关</p>
</blockquote>
<p>我们就把三极管当成开关就好了,而这个开关的触发条件是这样的:</p>
<ul>
<li>NPN型三极管中 : 当B极是低电平的电压时,三极管处于开路(E与C之间);当B极是高电平时,三极管处于通路(E与C之间).</li>
<li>PNP型三极管中 : 当B极是低电平的电压时,三极管处于通路(E与C之间);当B极是高电平时,三极管处于开路(E与C之间).</li>
</ul>
<p><img src="https://gss2.bdstatic.com/-fo3dSag_xI4khGkpoWK1HF6hhy/baike/c0%3Dbaike92%2C5%2C5%2C92%2C30/sign=3420af8568d0f703f2bf9d8e69933a58/f2deb48f8c5494ee4e2cf68b27f5e0fe99257e12.jpg" alt="两种型号"></p>
<h1 id="三-三极管的三种封装型式"><a href="#三-三极管的三种封装型式" class="headerlink" title="三. 三极管的三种封装型式"></a>三. 三极管的三种封装型式</h1><ul>
<li>SOT-23 , 这是一种贴片式的三极管,单独一脚的是发射机(E),左下角的一脚为基极(B),右下角是集电极(C)<br><img src="/" alt="SOT-23"></li>
<li>TO-92 ,这种是一种直插式的三极管,平面的一边对着自己,从做左到右依次是,E,B,C.<br><img src="/" alt="TO-92"></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://github.com/rohman-zhu/posts/ce024141/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rohman.Zhu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="诺曼实验室">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 诺曼实验室">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/ce024141/" class="post-title-link" itemprop="url">在MAC的VirtualBox中编写单片机程序</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2017-06-30 16:53:37" itemprop="dateCreated datePublished" datetime="2017-06-30T16:53:37+00:00">2017-06-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-12-22 05:27:49" itemprop="dateModified" datetime="2024-12-22T05:27:49+00:00">2024-12-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/MCU/" itemprop="url" rel="index"><span itemprop="name">MCU</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>在Mac OS sierra中想要编写单片机程序，并且实现烧录程序到单片机，这是可以实现的。如果不想倒腾，那么只需安装虚拟机，装个windows7，并且用相关的软件，如Keil、STC_ISP等来编写就好了。</p>
<h1 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h1><h3 id="一、需要准备的软件"><a href="#一、需要准备的软件" class="headerlink" title="一、需要准备的软件"></a>一、需要准备的软件</h3><ul>
<li>Virtual Box</li>
<li>Virtual Box Guest Additions</li>
<li>Windows7的镜像</li>
<li>Keil </li>
<li>STC_ISP</li>
<li>USB转串口驱动</li>
</ul>
<p><a href="在百度网盘">我已经打包到百度网盘了，点击下载</a></p>
<h3 id="二、安装"><a href="#二、安装" class="headerlink" title="二、安装"></a>二、安装</h3><ul>
<li>正常安装Virtual Box</li>
<li>安装windows7</li>
<li>在windows7中安装VirtualBox GuestAdditions</li>
<li>安装跟编写单片机程序相关的软件（如Keil、STC_ISP等）</li>
</ul>
<h3 id="三、在虚拟机中连接单片机"><a href="#三、在虚拟机中连接单片机" class="headerlink" title="三、在虚拟机中连接单片机"></a>三、在虚拟机中连接单片机</h3><ul>
<li>连接好相关线路</li>
<li>到虚拟机右下角一个USB模样的图标中，点击与单片机相关的硬件，表示装载到虚拟机中</li>
<li>这时候windows系统内，会提示没有安装驱动。我这边直接打开驱动程序，会提示不能安装。因此通过设备管理器，找到该设备，指定驱动文件夹位置手动安装，就可以了。</li>
</ul>
<h3 id="四、下载程序"><a href="#四、下载程序" class="headerlink" title="四、下载程序"></a>四、下载程序</h3><ul>
<li>打开STC_ISP，选择好HEX文件，点击下载。</li>
<li>如果卡在单片机握手什么的，直接重启一下单片机。</li>
</ul>
<p>（其实就是跟普通的下载流程一样的，这里没什么可以说的）</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://github.com/rohman-zhu/posts/3f08da7f/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rohman.Zhu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="诺曼实验室">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 诺曼实验室">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/3f08da7f/" class="post-title-link" itemprop="url">有关Fragment的相关问题</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2017-06-28 12:26:18" itemprop="dateCreated datePublished" datetime="2017-06-28T12:26:18+00:00">2017-06-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-12-22 05:27:49" itemprop="dateModified" datetime="2024-12-22T05:27:49+00:00">2024-12-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Android/" itemprop="url" rel="index"><span itemprop="name">Android</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>写笔记前先扯一下蛋,明天(2017-06-29 14:00 信息楼103)要参加A+认证考试.而到现在为止,本人还没有看多少题.本人最近都是在根据题库做一个背题的APP,就当作练练手.从上星期六(2017-06-26)立项到现在,历时4天,终于弄出了以下玩意:</p>
<p><img src="/sourc/images/20170628_mainpager.png" alt="img"><br><img src="/sourc/images/20170628_testPager.png" alt="img"><br><img src="/images/20170628_rememberPager.jpeg" alt="img"><br><img src="/images/20170628_recordPager.jpeg" alt="img"></p>
<h3 id="用到了一下几个控件"><a href="#用到了一下几个控件" class="headerlink" title="用到了一下几个控件:"></a>用到了一下几个控件:</h3><ul>
<li>ViewPager(主要)<h4 id="viewpager用的适配器-FragmentAdapter"><a href="#viewpager用的适配器-FragmentAdapter" class="headerlink" title="viewpager用的适配器: FragmentAdapter"></a>viewpager用的适配器: FragmentAdapter</h4></li>
<li>DrawerLayout</li>
<li>CheckBox</li>
<li>Button</li>
<li>ListView</li>
</ul>
<h3 id="APP构思"><a href="#APP构思" class="headerlink" title="APP构思"></a>APP构思</h3><ol>
<li>编码题库TXT文件 txt -&gt; xml</li>
<li>解析题库XML文件 xml -&gt; 题目类</li>
<li>编辑题目类,有 题号&#x2F;题目内容&#x2F;选项A内容&#x2F;选项B内容&#x2F;选项C内容&#x2F;选项D内容&#x2F;正确答案,一个类共7个项内容,并且设置相应的操作函数.</li>
<li>加载题库数据到Viewpager…</li>
</ol>
<p>最终实现流程:<br>编码XML -&gt; 解析XML -&gt; 封装类到集合 -&gt; 根据集合封装Fragment -&gt; 给Viewpager设置适配器</p>
<h3 id="出现大的问题"><a href="#出现大的问题" class="headerlink" title="出现大的问题"></a>出现大的问题</h3><ol>
<li>因为本APP有三种模式,其中错题模式的页面内容是跟另外两个模式不一样的,适配器的数据(Fragment集需要更变)更变后,页面没变化.</li>
<li>在 <em>测试模式</em> 和 <em>背题模式</em> 中,不同的是Fragment中的题目答案是否有显示,而在页面中要让一个TextView显示,Fragment必须是要加载到Activity中,未加载的Fragment是不能设置TextView显示.</li>
</ol>
<h3 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h3><ol>
<li>留到下文再写.</li>
<li>在每一个题目的Fragment中设置一个用于表示 <em>是否显示参数</em> (boolean isVisible),如果要显示则,通过fragment集合获取指定的fragment的这个参数(isVisible),设置为 <em>true</em> ;然后在onCreateView()中加入这段逻辑:<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TestViewAnswer.setVisibility(isVisible);</span><br></pre></td></tr></table></figure></li>
</ol>
<h1 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h1><p>话说回来,因为我用到的Viewpager控件采用的是FragmentAdapter这个适配器,因此用的是有关Fragment的相关内容.</p>
<h2 id="Fragment"><a href="#Fragment" class="headerlink" title="Fragment"></a>Fragment</h2><h3 id="一-什么是Fragment"><a href="#一-什么是Fragment" class="headerlink" title="一.什么是Fragment"></a>一.什么是Fragment</h3><p>Fragment是一个类似Activity组件,跟Activity一样的也有生命周期.<br><img src="http://img.my.csdn.net/uploads/201211/29/1354170699_6619.png" alt="Fragment生命周期"></p>
<p>由图中可以看到,Fragment被加载的时候,会多一个onCreateView方法.而且每一次再加载的时候都是调用onCreateView方法.</p>
<h3 id="二-使用Fragment-加载Fragment"><a href="#二-使用Fragment-加载Fragment" class="headerlink" title="二.使用Fragment(加载Fragment)"></a>二.使用Fragment(加载Fragment)</h3><h4 id="方法一-静态添加"><a href="#方法一-静态添加" class="headerlink" title="方法一: 静态添加"></a>方法一: 静态添加</h4><p>这个方法其实跟自定义控件一样,需要java文件与xml布局文件.</p>
<ol>
<li><p>正常设置布局</p>
</li>
<li><p>编写java文件 ,类继承自Fragment,并重写以对应的方法.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@Override  </span><br><span class="line">   public View onCreateView(LayoutInflater inflater, ViewGroup container,  </span><br><span class="line">           Bundle savedInstanceState)  </span><br><span class="line">   &#123;  </span><br><span class="line">       return inflater.inflate(R.layout.fragment_content, container, false);  </span><br><span class="line">       //这里相当于加载了fragment的布局文件</span><br><span class="line">   &#125;  </span><br></pre></td></tr></table></figure></li>
<li><p>在MainActivity中也需要编写两个文件,只需编写布局文件就好了</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//这里是MainActivity的布局文件</span><br><span class="line">&lt;fragment</span><br><span class="line">    android:id=&quot;@+id/id_fragment_content&quot;  </span><br><span class="line">    android:name=&quot;fragment放置的包名&quot;  </span><br><span class="line">    android:layout_width=&quot;fill_parent&quot;  </span><br><span class="line">    android:layout_height=&quot;fill_parent&quot; /&gt;  </span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="方法二-动态添加"><a href="#方法二-动态添加" class="headerlink" title="方法二 : 动态添加"></a>方法二 : 动态添加</h4><p>这个方法是通过 FragmentManager的一个事务对象来实现的 ( <em>FragmentTransaction</em> ),常用方法有add,remove,replace, 最后都要用commit方法提交.</p>
<ol>
<li><p>replace()</p>
<ul>
<li>这里需要设置两个参数(被替换的布局文件id,将要替换的fragment);</li>
<li>设置完后提交,FragmentTransaction.commit();</li>
</ul>
</li>
</ol>
<h3 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h3><p>Fragment常用的三个类：</p>
<ul>
<li>android.app.Fragment 主要用于定义Fragment</li>
<li>android.app.FragmentManager 主要用于在Activity中操作Fragment</li>
<li>android.app.FragmentTransaction 保证一些列Fragment操作的原子性，熟悉事务这个词，一定能明白~</li>
</ul>
<hr>
<ul>
<li><p>获取FragmentManager的方法是getFragmentManager(),而在v4中是用getSupportFragmentManager();</p>
</li>
<li><p>操作事务的对象是 FragmentManager.beginTransaction();</p>
</li>
<li><p>transaction.add() ;往Activity中添加一个Fragment</p>
</li>
<li><p>transaction.remove() ; 从Activity中移除一个Fragment，如果被移除的Fragment没有添加到回退栈（回退栈后面会详细说），这个Fragment实例将会被销毁。</p>
</li>
<li><p>transaction.replace()<br>使用另一个Fragment替换当前的，实际上就是remove()然后add()的合体</p>
</li>
<li><p>transaction.hide()<br>隐藏当前的Fragment，仅仅是设为不可见，并不会销毁</p>
</li>
<li><p>transaction.show()<br>显示之前隐藏的Fragment</p>
</li>
<li><p>detach()<br>会将view从UI中移除,和remove()不同,此时fragment的状态依然由FragmentManager维护。</p>
</li>
<li><p>attach()<br>重建view视图，附加到UI上并显示。</p>
</li>
<li><p>transatcion.commit()&#x2F;&#x2F;提交一个事务</p>
</li>
<li><p>注意：常用Fragment的哥们，可能会经常遇到这样Activity状态不一致：State loss这样的错误。主要是因为：commit方法一定要在Activity.onSaveInstance()之前调用。</p>
</li>
<li><p>a、比如：我在FragmentA中的EditText填了一些数据，当切换到FragmentB时，如果希望会到A还能看到数据，则适合你的就是hide和show；也就是说，希望保留用户操作的面板，你可以使用hide和show，当然了不要使劲在那new实例，进行下非null判断。</p>
</li>
<li><p>b、再比如：我不希望保留用户操作，你可以使用remove()，然后add()；或者使用replace()这个和remove,add是相同的效果。</p>
</li>
<li><p>c、remove和detach有一点细微的区别，在不考虑回退栈的情况下，remove会销毁整个Fragment实例，而detach则只是销毁其视图结构，实例并不会被销毁。那么二者怎么取舍使用呢？如果你的当前Activity一直存在，那么在不希望保留用户操作的时候，你可以优先使用detach。</p>
</li>
</ul>
<h3 id="关于回退栈"><a href="#关于回退栈" class="headerlink" title="关于回退栈"></a>关于回退栈</h3><ul>
<li>如果不添加事务到回退栈，前一个Fragment实例会被销毁。这里很明显，我们调用tx.addToBackStack(null);将当前的事务添加到了回退栈，所以FragmentOne实例不会被销毁，但是视图层次依然会被销毁，即会调用onDestoryView和onCreateView.</li>
</ul>
<h2 id="ViewPager"><a href="#ViewPager" class="headerlink" title="ViewPager"></a>ViewPager</h2><p>我用的是FragmentAdapter,也就是说,这个Viewpager里面放的是Fragment,这个控件会在当前页中,预先加载position - 1 页 和 position + 1页.</p>
<h3 id="FragmentAdapter"><a href="#FragmentAdapter" class="headerlink" title="FragmentAdapter"></a>FragmentAdapter</h3><ul>
<li>构造函数中必须需要传入一个FragmentManager参数.</li>
<li>将显示的页面,需要传入一个Fragment集合</li>
</ul>
<hr>
<p>方法说明:</p>
<ul>
<li>public Fragment getItem()</li>
</ul>
<ol>
<li>该类中新增的一个虚函数。函数的目的为生成新的 Fragment 对象。重载该函数时需要注意这一点。在需要时，该函数将被 instantiateItem() 所调用。</li>
<li>如果需要向 Fragment 对象传递相对静态的数据时，我们一般通过 Fragment.setArguments() 来进行，这部分代码应当放到 getItem()。它们只会在新生成 Fragment 对象时执行一遍。</li>
<li>如果需要在生成 Fragment 对象后，将数据集里面一些动态的数据传递给该 Fragment，那么，这部分代码不适合放到 getItem() 中。因为当数据集发生变化时，往往对应的 Fragment 已经生成，如果传递数据部分代码放到了 getItem() 中，这部分代码将不会被调用。这也是为什么很多人发现调用 PagerAdapter.notifyDataSetChanged() 后，getItem() 没有被调用的一个原因。</li>
</ol>
<ul>
<li><p>public Object instantiateItem()</p>
<p>  在每次 ViewPager 需要一个用以显示的 Object 的时候，该函数都会被 ViewPager.addNewItem() 调用。</p>
</li>
</ul>
<ol>
<li>函数中判断一下要生成的 Fragment 是否已经生成过了，如果生成过了，就使用旧的，旧的将被 Fragment.attach()；如果没有，就调用 getItem() 生成一个新的，新的对象将被 FragmentTransation.add()。</li>
<li>FragmentPagerAdapter 会将所有生成的 Fragment 对象通过 FragmentManager 保存起来备用，以后需要该 Fragment 时，都会从 FragmentManager 读取，而不会再次调用 getItem() 方法。</li>
<li>如果需要在生成 Fragment 对象后，将数据集中的一些数据传递给该 Fragment，这部分代码应该放到这个函数的重载里。在我们继承的子类中，重载该函数，并调用 FragmentPagerAdapter.instantiateItem() 取得该函数返回 Fragment 对象，然后，我们该 Fragment 对象中对应的方法，将数据传递过去，然后返回该对象。</li>
<li>否则，如果将这部分传递数据的代码放到 getItem()中，在 PagerAdapter.notifyDataSetChanged() 后，这部分数据设置代码将不会被调用。</li>
</ol>
<ul>
<li><p>public void notifyDataSetChanged()</p>
<p>  在数据集发生变化的时候，一般 Activity 会调用 PagerAdapter.notifyDataSetChanged()，以通知 PagerAdapter，而 PagerAdapter 则会通知在自己这里注册过的所有 DataSetObserver。其中之一就是在 ViewPager.setAdapter() 中注册过的 PageObserver。PageObserver 则进而调用 ViewPager.dataSetChanged()，从而导致 ViewPager 开始触发更新其内含 View 的操作。</p>
</li>
</ul>
<p>参考资料:<a href=http://m.blog.csdn.net/shaoyezhangliwei/article/details/52488179>CSDN</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://github.com/rohman-zhu/posts/8ec7caa0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rohman.Zhu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="诺曼实验室">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 诺曼实验室">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/8ec7caa0/" class="post-title-link" itemprop="url">安卓自定义控件学习笔记</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2017-06-19 17:51:22" itemprop="dateCreated datePublished" datetime="2017-06-19T17:51:22+00:00">2017-06-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-12-22 05:27:49" itemprop="dateModified" datetime="2024-12-22T05:27:49+00:00">2024-12-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Android/" itemprop="url" rel="index"><span itemprop="name">Android</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="自定义控件概述"><a href="#自定义控件概述" class="headerlink" title="自定义控件概述"></a>自定义控件概述</h1><ol>
<li>原生控件（TextView EditText ImageView）</li>
<li>自定义控件<ol>
<li>组合式控件(把原生控件组合在一起)</li>
<li>自己绘制的控件（绘制，行为操作）</li>
</ol>
</li>
</ol>
<h2 id="View和ViewGroup"><a href="#View和ViewGroup" class="headerlink" title="View和ViewGroup"></a>View和ViewGroup</h2><ol>
<li><p>View：矩形，负责绘制和事件处理</p>
</li>
<li><p>ViewGroup: 能够包含其他的View(孩子)</p>
</li>
<li><p>View和ViewGroup关系</p>
<ol>
<li>继承关系<br> <img src="/img/view_arc.png" alt="icon"></li>
<li>组合关系<br> <img src="/img/viewgroup.png" alt="icon"></li>
</ol>
</li>
</ol>
<h2 id="广告轮播图"><a href="#广告轮播图" class="headerlink" title="广告轮播图"></a>广告轮播图</h2><ol>
<li><p>功能分析</p>
<ol>
<li>滑动图片切换</li>
<li>滑动标题切换</li>
<li>滑动圆点切换</li>
<li>循环切换</li>
</ol>
</li>
<li><p>源码关联</p>
<ol>
<li>Android Private Libaries -&gt;Build Path -&gt; Remove from build path</li>
<li>libs -&gt; Build Path -&gt; Add to build path</li>
<li>Attach source -&gt; sdk&#x2F;extra&#x2F;v4</li>
<li>Android Tools -&gt; Fix Project Properties</li>
</ol>
</li>
<li><p>setOffscreenPageLimit设置左右两边缓存页面数</p>
</li>
<li><p>自定义控件</p>
<ol>
<li>提供设置图片和标题 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">//要做的是封装起来,所以在布局文件中,要用Merge标签</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ol>
<h2 id="优酷菜单"><a href="#优酷菜单" class="headerlink" title="优酷菜单"></a>优酷菜单</h2><blockquote>
<p>三级菜单的显现与隐藏</p>
</blockquote>
<ol>
<li><p>功能分析</p>
<ol>
<li>菜单的显示和隐藏 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//对控件设置监听事件</span><br><span class="line">.setOnClickListen();</span><br><span class="line">//隐藏与显示</span><br><span class="line">.setVisiblity(View.GONE);//隐藏</span><br><span class="line">.setVisiblity(View.VISIBLE);//显示</span><br></pre></td></tr></table></figure></li>
<li>旋转动画 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">RotateAnimation xx = new RotateAnimation(旋转度数,...);</span><br><span class="line">//设置动画持续时间</span><br><span class="line">xx.setDuration(500);</span><br><span class="line">//设置延时</span><br><span class="line">xx.setStartOffset(int delay);</span><br><span class="line">//设置动画监听,防止重复点击菜单</span><br><span class="line">xx.setAnimationListener(...);</span><br><span class="line">xxx.startAnimation(xx);</span><br></pre></td></tr></table></figure></li>
</ol>
<blockquote>
<p>补间动画,控件的点击事件还会在原来位置</p>
</blockquote>
<ol start="3">
<li>手机菜单键 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">public boolean onKeyUp(int keyCode , KeyEvent event)</span><br><span class="line">&#123;</span><br><span class="line">	if(KeyCode == KeyEvent.KEYCODE_MENU)</span><br><span class="line">	&#123;</span><br><span class="line">		//处理逻辑</span><br><span class="line">		return true;</span><br><span class="line">	&#125;</span><br><span class="line">	return super.onKeyUp(KeyCode,event);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
<li><p>顺时针旋转 正</p>
</li>
<li><p>自定义控件</p>
<ol>
<li>组合式控件</li>
<li>setFocusableInTouchMode获取键盘事件</li>
</ol>
</li>
</ol>
<blockquote>
<p>会调用invalidate,导致控件重新绘制,不关心控件的可见性</p>
</blockquote>
<h2 id="下拉选择框"><a href="#下拉选择框" class="headerlink" title="下拉选择框"></a>下拉选择框</h2><h3 id="布局实现"><a href="#布局实现" class="headerlink" title="布局实现:"></a>布局实现:</h3><blockquote>
<ol>
<li>实现圆角</li>
</ol>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">//写一个xml文件</span><br><span class="line">&lt;shape xmlns:android=&quot;http://schemas.android.com/apk.res/android&quot;</span><br><span class="line">android:shape=&quot;rectangle&quot;&gt;</span><br><span class="line"></span><br><span class="line">	&lt;!-- rectangle 长方形 --&gt;</span><br><span class="line"></span><br><span class="line">	&lt;!-- 设置圆角的半径 --&gt;</span><br><span class="line"></span><br><span class="line">	&lt;corners android:radius=&quot;5dp&quot;/&gt;</span><br><span class="line"></span><br><span class="line">	&lt;!-- 画边框 --&gt;</span><br><span class="line"></span><br><span class="line">	&lt;stroke android:width=&quot;1dp&quot;</span><br><span class="line">		android:color = &quot;#ff0000/&gt;</span><br><span class="line"></span><br><span class="line">&lt;/shape&gt;</span><br></pre></td></tr></table></figure>

<h3 id="功能"><a href="#功能" class="headerlink" title="功能:"></a>功能:</h3><ol>
<li>点击箭头弹出下拉列表</li>
<li>选中一个item显示在编辑框</li>
<li>删除下拉列表中的一项</li>
<li>自定义控件<ol>
<li>组合式控件</li>
</ol>
</li>
</ol>
<h2 id="滑动开关"><a href="#滑动开关" class="headerlink" title="滑动开关"></a>滑动开关</h2><blockquote>
<p>这个控件里面没有配置相应的xml文件,都是通过”绘制”的形式来展现</p>
</blockquote>
<ol>
<li><p>View的绘制流程</p>
<ol>
<li>measure() 测量控件的大小</li>
<li>layout() 设置位置和大小(包括孩子)</li>
<li>draw() 渲染控件(包括孩子)</li>
</ol>
</li>
<li><p>自定义控件可以重写的函数</p>
<ol>
<li>onMeasure()<ol>
<li>必须调用setMeasuredDimension设置测量宽高</li>
<li>如果是ViewGroup，有责任去测量孩子(child.measure)</li>
</ol>
</li>
<li>onLayout()<ol>
<li>如果是ViewGroup必须去重写，去布局孩子(child.layout)</li>
</ol>
</li>
<li>onDraw()<ol>
<li>通过canvas绘制</li>
</ol>
</li>
</ol>
</li>
<li><p>onTouchEvent() 处理触摸事件</p>
</li>
<li><p>设置监听事件</p>
<ol>
<li>现在类中写入一个设置接口的方法 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public void setOnSwitchListener(OnSwitchListener onSwitchListener)</span><br><span class="line">&#123;</span><br><span class="line">	this.onSwitchListener = onSwtichListener;//初始化全局变量onSwithcListener</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>设置接口与实现方法 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public interface OnSwitchListener()</span><br><span class="line">&#123;</span><br><span class="line">	public void onSwitch(boolean isOpend);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>在实现类中设置控件的监听 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ToggleView.setOnSwitchListener(new OnSwitchListener()</span><br><span class="line">&#123;</span><br><span class="line">	@Override</span><br><span class="line">	public void onSwitch(boolean isOpend)</span><br><span class="line">	&#123;</span><br><span class="line">		......</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ol>
<h2 id="侧滑菜单"><a href="#侧滑菜单" class="headerlink" title="侧滑菜单"></a>侧滑菜单</h2><ol>
<li><p>widthMeasureSpec</p>
<ol>
<li>32二进制，前两位mode, 后30位是大小</li>
<li>UNSPECIFIED 想多大多大</li>
<li>EXACTLY 父亲决定了准确大小</li>
<li>AT_MOST 最大能多大</li>
</ol>
</li>
<li><p>获取模式<br> int mode &#x3D; MeasureSpec.getMode(widthMeasureSpec);<br>获取大小<br> int size &#x3D; MeasureSpec.getSize(widthMeasureSpec);</p>
</li>
<li><p>scrollTo和scrollBy</p>
<ol>
<li>scrollTo滑动到一个坐标</li>
<li>scrollBy增量滑动</li>
</ol>
<blockquote>
<p>关于强制转换9.9与9.1,这两个float型的数据转成int型,都会变成9
 </p>
</blockquote>
</li>
<li><p>getWidth和getMeasuredWidth</p>
<ol>
<li>getWidth只能在layout之后调用</li>
<li>getMeasuredWidth测量之后调用</li>
<li>在layout中设置的四个参数(int left , int  top , int right , int bottom):</li>
</ol>
<blockquote>
<p>解释一: 控件的左边距离父窗体的左边距离是left,控件的上边距离父窗体的顶部是top,控件的右边距离父窗体的左边是right,控件的下边距离父窗体的顶部是bottom.</p>
</blockquote>
<blockquote>
<p>解释二: left,top这两个数据代表的是坐标一;right,bottom这两个数据代表的是坐标二.两个坐标确定一个控件的大小.</p>
</blockquote>
</li>
<li><p>Touch事件的传递(蛋糕的传递)<br> 触摸事件一层一层往下传递，直到有View消费事件，如果没有，触摸事件又会一层一层往上传递，直到有ViewGroup消费事件(onTouchEvent 返回true)</p>
<ol>
<li>dispatchTouchEvent() 事件的分发</li>
<li>onInterceptTouchEvent 事件的拦截(拦截孩子的触摸事件，true 拦截) </li>
<li>onTouchEvent() 事件的消费 （true，消费）</li>
</ol>
</li>
</ol>
<h2 id="滑动删除"><a href="#滑动删除" class="headerlink" title="滑动删除"></a>滑动删除</h2><ol>
<li><p>ViewDragHelper</p>
<ol>
<li>初始化对象mViewDragHelper &#x3D; ViewDragHelper.create(this, cb);</li>
<li>tryCaptureView 是否滑动孩子 ACTION_DOWN</li>
<li>clampViewPositionHorizontal 返回新的位置 ACTION_MOVE</li>
<li>onViewPositionChanged 位置变化后的回调 ACTION_MOVE</li>
<li>onViewReleased ACTION_UP</li>
</ol>
</li>
<li><p>requestLayout -&gt; onMeasure -&gt; onLayout</p>
</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://github.com/rohman-zhu/posts/d704995f/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rohman.Zhu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="诺曼实验室">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 诺曼实验室">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/d704995f/" class="post-title-link" itemprop="url">GIT学习笔记</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2017-06-11 15:14:37" itemprop="dateCreated datePublished" datetime="2017-06-11T15:14:37+00:00">2017-06-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-12-22 05:27:47" itemprop="dateModified" datetime="2024-12-22T05:27:47+00:00">2024-12-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/GIT%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">GIT学习笔记</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="设置GIT的配置信息"><a href="#设置GIT的配置信息" class="headerlink" title="设置GIT的配置信息"></a>设置GIT的配置信息</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global user.email &quot;you@example.com&quot;</span><br><span class="line">$ git config --global user.name &quot;Your Name&quot;</span><br></pre></td></tr></table></figure>



<br>
<br>
<br>
<br>

<h1 id="—以下内容后不需要联网-本地操作即可—"><a href="#—以下内容后不需要联网-本地操作即可—" class="headerlink" title="—以下内容后不需要联网,本地操作即可—"></a>—以下内容后不需要联网,本地操作即可—</h1><br>
<br>
<br>
<br>


<h1 id="创建一个空的文件夹作为本地仓库"><a href="#创建一个空的文件夹作为本地仓库" class="headerlink" title="创建一个空的文件夹作为本地仓库"></a>创建一个空的文件夹作为本地仓库</h1><p>打开CMD 或者 Terminal 命令行控制窗口</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir LearnGit</span><br><span class="line">$ cd LearnGit</span><br><span class="line">$ pwd</span><br><span class="line">\...\LearnGit\</span><br></pre></td></tr></table></figure>
<p>注解:</p>
<ol>
<li>mkdir + ‘directory_name’ 是创建文件夹命令.</li>
<li>cd + ‘directory_name’ 是进入指定文件夹命令.</li>
<li>pwd 是显示当前路径的命令.</li>
<li>cd + ‘..’是返回上级目录.</li>
</ol>
<h1 id="使当前文件夹作为GIT仓库"><a href="#使当前文件夹作为GIT仓库" class="headerlink" title="使当前文件夹作为GIT仓库"></a>使当前文件夹作为GIT仓库</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git init</span><br></pre></td></tr></table></figure>
<p>注解:</p>
<ol>
<li>ls 显示当前目录下的可见文件与文件夹</li>
<li>ls -ah 显示当前目录下所有隐藏文件夹</li>
</ol>
<h1 id="添加文件到仓库"><a href="#添加文件到仓库" class="headerlink" title="添加文件到仓库"></a>添加文件到仓库</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git add &lt;file&gt; [&lt;file2&gt;]</span><br><span class="line"></span><br><span class="line">$ git commit - m &quot;本次提交的版本说明,这样就能从历史记录中找到改动记录&quot;</span><br></pre></td></tr></table></figure>

<h1 id="修改本地文件"><a href="#修改本地文件" class="headerlink" title="修改本地文件"></a>修改本地文件</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ vim readme.txt</span><br><span class="line">//添加内容</span><br></pre></td></tr></table></figure>

<p>查看Git仓库的状态</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br></pre></td></tr></table></figure>

<p>会发现一下内容</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line"># On branch master</span><br><span class="line"># Changes not staged for commit:</span><br><span class="line">#   (use &quot;git add &lt;file&gt;...&quot; to update what will be committed)</span><br><span class="line">#   (use &quot;git checkout -- &lt;file&gt;...&quot; to discard changes in working directory)</span><br><span class="line">#</span><br><span class="line">#    modified:   readme.txt</span><br><span class="line">#</span><br><span class="line">no changes added to commit (use &quot;git add&quot; and/or &quot;git commit -a&quot;)</span><br></pre></td></tr></table></figure>

<p>modified 表示有修改的地方.上面的命令告诉我们，readme.txt被修改过了，但还没有准备提交的修改。</p>
<p>如果我们要看哪里修改了,可以输入:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git diff &quot;被修改的文件&quot;</span><br></pre></td></tr></table></figure>

<p>会出现以下内容</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ git diff readme.txt </span><br><span class="line">diff --git a/readme.txt b/readme.txt</span><br><span class="line">index 46d49bf..9247db6 100644</span><br><span class="line">--- a/readme.txt</span><br><span class="line">+++ b/readme.txt</span><br><span class="line">@@ -1,2 +1,2 @@</span><br><span class="line">-Git is a version control system.</span><br><span class="line">+Git is a distributed version control system.</span><br><span class="line"> Git is free software.</span><br></pre></td></tr></table></figure>

<p> 注解:</p>
<ol>
<li>“-“表示删除的内容</li>
<li>“+”表示增加的内容</li>
</ol>
<h1 id="查看提交日志"><a href="#查看提交日志" class="headerlink" title="查看提交日志"></a>查看提交日志</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git log </span><br></pre></td></tr></table></figure>

<p>会出现以下内容:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">commit f86e14f9b45add275f9008dcbb3c72eb4e39eef3 (HEAD -&gt; master)</span><br><span class="line">Author: R0manJ &lt;zhur0ngjian@126.com&gt;</span><br><span class="line">Date:   Fri Jun 9 08:51:49 2017 +0800</span><br><span class="line"></span><br><span class="line">    add a statement</span><br><span class="line"></span><br><span class="line">commit 1d5282852e4e6b967c2fbf8c06dec5f125afdce3</span><br><span class="line">Author: R0manJ &lt;zhur0ngjian@126.com&gt;</span><br><span class="line">Date:   Fri Jun 9 08:49:57 2017 +0800</span><br><span class="line"></span><br><span class="line">    add 2 files</span><br><span class="line"></span><br><span class="line">commit 31497a8b6e1503181fd39591d35c016c37b895df</span><br><span class="line">Author: R0manJ &lt;zhur0ngjian@126.com&gt;</span><br><span class="line">Date:   Fri Jun 9 08:48:41 2017 +0800</span><br><span class="line"></span><br><span class="line">    wrote a readme file</span><br></pre></td></tr></table></figure>

<p>我总共提交了3次,所以这里就会出现3个日志,并且每一个提交都有描述,如”add a statement”.</p>
<hr>
<h3 id="以下是简化输出日志信息的方法"><a href="#以下是简化输出日志信息的方法" class="headerlink" title="以下是简化输出日志信息的方法"></a>以下是简化输出日志信息的方法</h3><p>输入:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git log --pretty=oneline</span><br></pre></td></tr></table></figure>

<p>会看到:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">f86e14f9b45add275f9008dcbb3c72eb4e39eef3 (HEAD -&gt; master) add a statement</span><br><span class="line">1d5282852e4e6b967c2fbf8c06dec5f125afdce3 add 2 files</span><br><span class="line">31497a8b6e1503181fd39591d35c016c37b895df wrote a readme file</span><br></pre></td></tr></table></figure>

<p><em>注解:</em></p>
<p>看到的一大串类似3628164…882e1e0的是commit id（版本号），和SVN不一样，Git的commit id不是1，2，3……递增的数字，而是一个SHA1计算出来的一个非常大的数字，用十六进制表示，而且你看到的commit id和我的肯定不一样，以你自己的为准。为什么commit id需要用这么一大串数字表示呢？因为Git是分布式的版本控制系统，后面我们还要研究多人在同一个版本库里工作，如果大家都用1，2，3……作为版本号，那肯定就冲突了。</p>
<h1 id="返回之前的版本"><a href="#返回之前的版本" class="headerlink" title="返回之前的版本"></a>返回之前的版本</h1><ul>
<li><p>首先要知道当前是什么版本</p>
<p>  在Git中，用HEAD表示当前版本，也就是最新的提交3628164…882e1e0（注意我的提交ID和你的肯定不一样），上一个版本就是HEAD^，上上一个版本就是HEAD^^，当然往上100个版本写100个^比较容易数不过来，所以写成HEAD~100。</p>
</li>
<li><p>使用 git reset 命令恢复之前的版本</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git reset --hard HEAD^</span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="撤销恢复"><a href="#撤销恢复" class="headerlink" title="撤销恢复"></a>撤销恢复</h1><p>需要记得之前的 <em>commit id</em> ,再用命令 “git reset” 命令.</p>
<pre><code><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git reset --hard f86e14f9b45add275f9008dcbb3c72eb4e39eef3</span><br></pre></td></tr></table></figure>
</code></pre>
<blockquote>
<p>这个图片是 <em>廖雪峰</em> 的GIT教程里面的,链接为:<a target="_blank" rel="noopener" href="http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000/0013744142037508cf42e51debf49668810645e02887691000">http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000/0013744142037508cf42e51debf49668810645e02887691000</a></p>
</blockquote>
<p><img src="http://www.liaoxuefeng.com/files/attachments/001384907584977fc9d4b96c99f4b5f8e448fbd8589d0b2000/0" alt="版本控制_HEAD"></p>
<p><img src="http://www.liaoxuefeng.com/files/attachments/001384907594057a873c79f14184b45a1a66b1509f90b7a000/0" alt="版本控制_HEADN"></p>
<p>其实就是将 <em>HEAD</em> 指向的内容改一下而已</p>
<h1 id="记录每次Git操作命令"><a href="#记录每次Git操作命令" class="headerlink" title="记录每次Git操作命令"></a>记录每次Git操作命令</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$git reflog</span><br></pre></td></tr></table></figure>


<h1 id="GIT的文件结构"><a href="#GIT的文件结构" class="headerlink" title="GIT的文件结构"></a>GIT的文件结构</h1><h2 id="工作区（Working-Directory）"><a href="#工作区（Working-Directory）" class="headerlink" title="工作区（Working Directory）"></a>工作区（Working Directory）</h2><p>就是你在电脑里能看到的目录，比如我的learngit文件夹就是一个工作区：</p>
<p><img src="http://www.liaoxuefeng.com/files/attachments/0013849082162373cc083b22a2049c4a47408722a61a770000/0" alt="工作区"></p>
<h2 id="版本库（Repository）"><a href="#版本库（Repository）" class="headerlink" title="版本库（Repository）"></a>版本库（Repository）</h2><p>工作区有一个隐藏目录.git，这个不算工作区，而是Git的版本库。</p>
<p>Git的版本库里存了很多东西，其中最重要的就是称为stage（或者叫index）的暂存区，还有Git为我们自动创建的第一个分支master，以及指向master的一个指针叫HEAD。</p>
<br>

<p><img src="http://www.liaoxuefeng.com/files/attachments/001384907702917346729e9afbf4127b6dfbae9207af016000/0" alt="版本库"></p>
<h1 id="撤销修改"><a href="#撤销修改" class="headerlink" title="撤销修改"></a>撤销修改</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout -- readme.txt</span><br></pre></td></tr></table></figure>

<p><em>注解</em>:<br>把readme.txt文件在工作区的修改全部撤销，这里有两种情况：</p>
<p>一种是readme.txt自修改后还没有被放到暂存区，现在，撤销修改就回到和版本库一模一样的状态；</p>
<p>一种是readme.txt已经添加到暂存区后，又作了修改，现在，撤销修改就回到添加到暂存区后的状态。</p>
<h1 id="删除文件"><a href="#删除文件" class="headerlink" title="删除文件"></a>删除文件</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//确认要删除的文件请求</span><br><span class="line">$ rm test.txt</span><br><span class="line">//提交请求</span><br><span class="line">$git commit -m &quot;Remove test.txt&quot;</span><br><span class="line">//撤销删除并且恢复到最新的版本</span><br><span class="line">$git checkout --test.txt</span><br></pre></td></tr></table></figure>

<br>
<br>

<br>
<br>

<h1 id="——-以下内容是需要联网操作——"><a href="#——-以下内容是需要联网操作——" class="headerlink" title="——-以下内容是需要联网操作——-"></a>——-以下内容是需要联网操作——-</h1><br>
<br>

<br>
<br>

<p>请自行注册GitHub账号。由于你的本地Git仓库和GitHub仓库之间的传输是通过SSH加密的，所以，需要一点设置：</p>
<h1 id="第1步-：创建SSH-Key。"><a href="#第1步-：创建SSH-Key。" class="headerlink" title="第1步 ：创建SSH Key。"></a>第1步 ：创建SSH Key。</h1><blockquote>
<p>在用户主目录下，看看有没有.ssh目录，如果有，再看看这个目录下有没有id_rsa和id_rsa.pub这两个文件，如果已经有了，可直接跳到下一步。如果没有，打开Shell（Windows下打开Git Bash），创建SSH Key：</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ssh-keygen -t rsa -C &quot;youremail@example.com&quot;</span><br></pre></td></tr></table></figure>

<br>

<p>接下来会让你设置密码,这个密码是用于上传文件到仓库时用到.</p>
<br>

<p>输入完后,可以在用户主目录里找到.ssh目录，里面有id_rsa和id_rsa.pub两个文件，这两个就是SSH Key的秘钥对，id_rsa是私钥，不能泄露出去，id_rsa.pub是公钥，可以放心地告诉任何人。</p>
<h1 id="第2步-在GITHUB中添加SSH-KEY"><a href="#第2步-在GITHUB中添加SSH-KEY" class="headerlink" title="第2步 : 在GITHUB中添加SSH KEY"></a>第2步 : 在GITHUB中添加SSH KEY</h1><p>登陆GitHub，打开“Account settings”，“SSH Keys”页面：</p>
<p>然后，点“Add SSH Key”，填上任意Title，在Key文本框里粘贴id_rsa.pub文件的内容：</p>
<p><img src="http://www.liaoxuefeng.com/files/attachments/001384908342205cc1234dfe1b541ff88b90b44b30360da000/0" alt="添SSH_KEY"></p>
<p>为什么GitHub需要SSH Key呢？因为GitHub需要识别出你推送的提交确实是你推送的，而不是别人冒充的，而Git支持SSH协议，所以，GitHub只要知道了你的公钥，就可以确认只有你自己才能推送。</p>
<p>当然，GitHub允许你添加多个Key。假定你有若干电脑，你一会儿在公司提交，一会儿在家里提交，只要把每台电脑的Key都添加到GitHub，就可以在每台电脑上往GitHub推送了。</p>
<p>最后友情提示，在GitHub上免费托管的Git仓库，任何人都可以看到喔（但只有你自己才能改）。所以，不要把敏感信息放进去。</p>
<br>
<br>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">1、删除文件命令</span><br><span class="line"></span><br><span class="line">rm -f 文件名</span><br><span class="line"></span><br><span class="line">将会强行删除文件，且无提示</span><br><span class="line"></span><br><span class="line">2、删除文件夹以及文件夹中的所有文件命令：</span><br><span class="line"></span><br><span class="line">rm -rf  目录名字</span><br><span class="line"></span><br><span class="line">其中：</span><br><span class="line"></span><br><span class="line">-r：向下递归删除</span><br><span class="line"></span><br><span class="line">-f：直接强行删除，且没有任何提示</span><br><span class="line"></span><br><span class="line">注意：</span><br><span class="line">使用rm -rf要格外注意，linux中没有回收站，慎重操作。</span><br></pre></td></tr></table></figure>

<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><ol>
<li><p>ERROR:Your push would publish a private email address.</p>
<ul>
<li>出现这个问题,只用将Github账号中的邮箱设置为公开的即可</li>
</ul>
</li>
<li><p>ERROR:Permission denied (publickey).</p>
<ul>
<li>这个问题主要是因为自定义了ssh的路径的,暂时无解……</li>
<li>在生成ssh的时候,路径就按照默认的即可</li>
<li>一般默认的会生成3个文件,分别是 id_rsa  ,  id_rsa.pub  ,  knowhost</li>
</ul>
</li>
</ol>
<h2 id="远程仓库的操作"><a href="#远程仓库的操作" class="headerlink" title="远程仓库的操作"></a>远程仓库的操作</h2><ul>
<li><p>删除</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git remote rm &quot;仓库名&quot;</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建仓库</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git remote add &quot;仓库名&quot; &quot;ssh&quot;</span><br></pre></td></tr></table></figure>
</li>
<li><p>提交文件到仓库</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$git push origin master</span><br></pre></td></tr></table></figure>

<h1 id="克隆-下载-仓库文件"><a href="#克隆-下载-仓库文件" class="headerlink" title="克隆(下载)仓库文件"></a>克隆(下载)仓库文件</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git clone &quot;ssh地址&quot;</span><br></pre></td></tr></table></figure>

<h1 id="分支的意义"><a href="#分支的意义" class="headerlink" title="分支的意义"></a>分支的意义</h1><blockquote>
<p>摘抄自廖雪峰老师叫教学网站</p>
</blockquote>
<p>分支就是科幻电影里面的平行宇宙，当你正在电脑前努力学习Git的时候，另一个你正在另一个平行宇宙里努力学习SVN。</p>
<p>如果两个平行宇宙互不干扰，那对现在的你也没啥影响。不过，在某个时间点，两个平行宇宙合并了，结果，你既学会了Git又学会了SVN！</p>
<p>分支在实际中有什么用呢？假设你准备开发一个新功能，但是需要两周才能完成，第一周你写了50%的代码，如果立刻提交，由于代码还没写完，不完整的代码库会导致别人不能干活了。如果等代码全部写完再一次提交，又存在丢失每天进度的巨大风险。</p>
<p>现在有了分支，就不用怕了。你创建了一个属于你自己的分支，别人看不到，还继续在原来的分支上正常工作，而你在自己的分支上干活，想提交就提交，直到开发完毕后，再一次性合并到原来的分支上，这样，既安全，又不影响别人工作。</p>
<p>其他版本控制系统如SVN等都有分支管理，但是用过之后你会发现，这些版本控制系统创建和切换分支比蜗牛还慢，简直让人无法忍受，结果分支功能成了摆设，大家都不去用。</p>
<p>但Git的分支是与众不同的，无论创建、切换和删除分支，Git在1秒钟之内就能完成！无论你的版本库是1个文件还是1万个文件。</p>
<h1 id="创建分支"><a href="#创建分支" class="headerlink" title="创建分支"></a>创建分支</h1><p>每次提交，Git都把它们串成一条时间线，这条时间线就是一个分支。截止到目前，只有一条时间线，在Git里，这个分支叫主分支，即master分支。HEAD严格来说不是指向提交，而是指向master，master才是指向提交的，所以，HEAD指向的就是当前分支。</p>
<p>一开始的时候，master分支是一条线，Git用master指向最新的提交，再用HEAD指向master，就能确定当前分支，以及当前分支的提交点：</p>
<p><img src="http://www.liaoxuefeng.com/files/attachments/0013849087937492135fbf4bbd24dfcbc18349a8a59d36d000/0" alt="master分支"></p>
<p>当我们创建新的分支，例如dev时，Git新建了一个指针叫dev，指向master相同的提交，再把HEAD指向dev，就表示当前分支在dev上：</p>
<p><img src="http://www.liaoxuefeng.com/files/attachments/001384908811773187a597e2d844eefb11f5cf5d56135ca000/0" alt="dev分支"></p>
<p>你看，Git创建一个分支很快，因为除了增加一个dev指针，改改HEAD的指向，工作区的文件都没有任何变化！</p>
<p>不过，从现在开始，对工作区的修改和提交就是针对dev分支了，比如新提交一次后，dev指针往前移动一步，而master指针不变：</p>
<p><img src="http://www.liaoxuefeng.com/files/attachments/0013849088235627813efe7649b4f008900e5365bb72323000/0" alt="在新提交"></p>
<p>假如我们在dev上的工作完成了，就可以把dev合并到master上。Git怎么合并呢？最简单的方法，就是直接把master指向dev的当前提交，就完成了合并：</p>
<p><img src="http://www.liaoxuefeng.com/files/attachments/00138490883510324231a837e5d4aee844d3e4692ba50f5000/0" alt="合并分支"></p>
<p>所以Git合并分支也很快！就改改指针，工作区内容也不变！</p>
<p>合并完分支后，甚至可以删除dev分支。删除dev分支就是把dev指针给删掉，删掉后，我们就剩下了一条master分支：</p>
<p><img src="http://www.liaoxuefeng.com/files/attachments/001384908867187c83ca970bf0f46efa19badad99c40235000/0" alt="最终分支"></p>
<h2 id="实战"><a href="#实战" class="headerlink" title="实战"></a>实战</h2><h3 id="创建分支-1"><a href="#创建分支-1" class="headerlink" title="创建分支"></a>创建分支</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$git checkout -b &quot;分支名&quot;</span><br></pre></td></tr></table></figure>

<p><em>注解:</em></p>
<ul>
<li><p>git checkout命令加上-b参数表示创建并切换，相当于以下两条命令：</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git branch &quot;分支名&quot;</span><br><span class="line">$ git checkout &quot;分支名&quot;</span><br></pre></td></tr></table></figure>
</li>
<li><p>git checkout 命令相当于指定当前分支</p>
</li>
</ul>
<h3 id="查看当前分支"><a href="#查看当前分支" class="headerlink" title="查看当前分支"></a>查看当前分支</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git branch</span><br></pre></td></tr></table></figure>

<p><em>注解 :</em></p>
<p>git branch命令会列出所有分支，当前分支前面会标一个*号。</p>
<h3 id="合并分支"><a href="#合并分支" class="headerlink" title="合并分支"></a>合并分支</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git merge &quot;分支名&quot;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>如果主分支没有更新,而其他分支有更新,则可以快速合并,但在实际开发中,会遇到主分支与其他分支同时都更新了,这时就无法快速合并.</p>
</blockquote>
<p><img src="http://www.liaoxuefeng.com/files/attachments/001384909115478645b93e2b5ae4dc78da049a0d1704a41000/0" alt="分支的冲突"></p>
<blockquote>
<p>Git用&lt;&lt;&lt;&lt;&lt;&lt;&lt;，&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;，&gt;&gt;&gt;&gt;&gt;&gt;&gt;标记出不同分支的内容，我们修改如下后保存.</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git add readme.txt </span><br><span class="line">$ git commit -m &quot;conflict fixed&quot;</span><br></pre></td></tr></table></figure>

<p><img src="http://www.liaoxuefeng.com/files/attachments/00138490913052149c4b2cd9702422aa387ac024943921b000/0" alt="修改过后的分支"></p>
<h3 id="删除分支"><a href="#删除分支" class="headerlink" title="删除分支"></a>删除分支</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git branch -d &quot;分支名&quot;</span><br></pre></td></tr></table></figure>

<h3 id="Fast-Forward-模式合并"><a href="#Fast-Forward-模式合并" class="headerlink" title="Fast Forward 模式合并"></a>Fast Forward 模式合并</h3><h3 id="禁用Fast-Forward-模式合并"><a href="#禁用Fast-Forward-模式合并" class="headerlink" title="禁用Fast Forward 模式合并"></a>禁用Fast Forward 模式合并</h3><p>通常，合并分支时，如果可能，Git会用Fast forward模式，但这种模式下，删除分支后，会丢掉分支信息。</p>
<p>如果要强制禁用Fast forward模式，Git就会在merge时生成一个新的commit，这样，从分支历史上就可以看出分支信息。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git merge --no-ff -m &quot;merge with no-ff&quot; &quot;分支名&quot;</span><br></pre></td></tr></table></figure>

<ul>
<li>团队开发分支如下:<br><img src="http://www.liaoxuefeng.com/files/attachments/001384909239390d355eb07d9d64305b6322aaf4edac1e3000/0" alt="团队开发"></li>
</ul>
<h2 id="在提交前-保存当前工作分支"><a href="#在提交前-保存当前工作分支" class="headerlink" title="在提交前,保存当前工作分支"></a>在提交前,保存当前工作分支</h2><blockquote>
<p>应用场景:<br>你当前在dev分支上工作,可是发现了master分支上面有一个急需修复的bug!</p>
</blockquote>
<p>我们的解决思路是这样的:</p>
<ol>
<li><p>创建一个新的分支</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout -b issue-01</span><br></pre></td></tr></table></figure>
</li>
<li><p>完成修改并提交</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git add &quot;文件名&quot;</span><br><span class="line">$ git commit -m &quot;修复完xxx&quot;</span><br></pre></td></tr></table></figure>
</li>
<li><p>回到master分支,合并 <em>issue-01</em> 分支</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git merge --no-ff -m&quot;修复了一个BUG&quot; issue-01</span><br></pre></td></tr></table></figure>
</li>
<li><p>删除 <em>issue-01</em> 分支</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git branch -d issue-01</span><br></pre></td></tr></table></figure></li>
</ol>
<p>可是!这里就要求我们把手头上的工作做完,才去修复,这样就会比较麻烦.</p>
<p>因此,Git提供了一个stash功能，可以把当前工作现场“储藏”起来，等以后恢复现场后继续工作：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git stash</span><br></pre></td></tr></table></figure>

<p>查看到当前的工作空间:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git stash list</span><br></pre></td></tr></table></figure>

<p>恢复当前的工作空间有两种方法:</p>
<ol>
<li><p>这个方法会保存stash,需要用 <em>git stash drop</em> 方法删除</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$  git stash apply</span><br></pre></td></tr></table></figure>
</li>
<li><p>用这个方法的话,不仅恢复当前工作空间,并且删除stash</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git stash pop</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="开发新功能"><a href="#开发新功能" class="headerlink" title="开发新功能"></a>开发新功能</h2><p>建立分支名字为” _feature-xxx “</p>
<h1 id="标签"><a href="#标签" class="headerlink" title="标签"></a>标签</h1><ul>
<li><p>创建标签</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git tag &quot;tag_name&quot;</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建带文字说明的标签</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git tag -a v0.1 -m &quot;version 0.1 released&quot; 3628164</span><br></pre></td></tr></table></figure>

<p>  <em>注解 :</em><br>  用-a指定标签名，-m指定说明文字.</p>
</li>
<li><p>创建一个带私钥的标签</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git tag -s v0.2 -m &quot;signed version 0.2 released&quot; fec145a</span><br></pre></td></tr></table></figure>
<p>  <em>注解 :</em> 通过-s用私钥签名一个标签</p>
</li>
<li><p>查看标签</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git tag</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看标签的具体信息</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git show &quot;tag_name&quot;</span><br></pre></td></tr></table></figure>
</li>
<li><p>删除标签</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git tag -d &quot;tag_name&quot;</span><br></pre></td></tr></table></figure>
</li>
<li><p>推送标签到远程仓库</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git push origin &lt;tagname&gt;</span><br></pre></td></tr></table></figure>

<p>  <em>注解 :</em> 这里的” origin “ 是一个远程仓库的名字,这个名字可以自定义的. </p>
</li>
<li><p>一次性把所有标签全部推送到远程仓库上</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git push origin --tags</span><br></pre></td></tr></table></figure>
<p>  <em>注解 :</em> 这里的” origin “ 是一个远程仓库的名字,这个名字可以自定义的. </p>
</li>
<li><p>删除远程仓库上面的标签</p>
<blockquote>
<p>如果标签已经推送到远程，要删除远程标签就麻烦一点，先从本地删除：</p>
</blockquote>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git tag -d v0.9</span><br><span class="line">Deleted tag &#x27;v0.9&#x27; (was 6224937)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>然后，从远程删除。删除命令也是push，但是格式如下：</p>
</blockquote>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git push origin :refs/tags/v0.9</span><br><span class="line">To git@github.com:michaelliao/learngit.git</span><br><span class="line">- [deleted]         v0.9</span><br></pre></td></tr></table></figure></li>
</ul>
<blockquote>
<p>如果忘记打标签,事后要补上怎么办?</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git tag &quot;tag_name&quot; &quot;commit_id&quot;</span><br></pre></td></tr></table></figure>

<h1 id="配置别名"><a href="#配置别名" class="headerlink" title="配置别名"></a>配置别名</h1><p>有没有经常敲错命令？比如git status？status这个单词真心不好记。</p>
<p>如果敲git st就表示git status那就简单多了，当然这种偷懒的办法我们是极力赞成的。</p>
<p>我们只需要敲一行命令，告诉Git，以后st就表示status：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global alias.st status</span><br></pre></td></tr></table></figure>

<p>再例如:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global alias.co checkout</span><br><span class="line">$ git config --global alias.ci commit</span><br><span class="line">$ git config --global alias.br branch</span><br></pre></td></tr></table></figure>

<p><em>注解 :</em> –global参数是全局参数，也就是这些命令在这台电脑的所有Git仓库下都有用。如果不加，那只针对当前的仓库起作用。</p>
<br>


<p>在撤销修改一节中，我们知道，命令git reset HEAD file可以把暂存区的修改撤销掉（unstage），重新放回工作区。既然是一个unstage操作，就可以配置一个unstage别名：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global alias.unstage &#x27;reset HEAD&#x27;</span><br></pre></td></tr></table></figure>

<p>当你敲入命令：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git unstage test.py</span><br></pre></td></tr></table></figure>

<p>实际上Git执行的是：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git reset HEAD test.py</span><br></pre></td></tr></table></figure>


<blockquote>
<p>跟环境变量很像</p>
</blockquote>
<blockquote>
<p>每个仓库的Git配置文件都放在.git&#x2F;config文件中.</p>
</blockquote>
<blockquote>
<p>而当前用户的Git配置文件放在用户主目录下的一个隐藏文件.gitconfig中.</p>
</blockquote>
<br>

<h1 id="搭建本地Git服务器-略"><a href="#搭建本地Git服务器-略" class="headerlink" title="搭建本地Git服务器(略)"></a>搭建本地Git服务器(略)</h1><p>GitHub就是一个免费托管开源代码的远程仓库。但是对于某些视源代码如生命的商业公司来说，既不想公开源代码，又舍不得给GitHub交保护费，那就只能自己搭建一台Git服务器作为私有仓库使用。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://github.com/rohman-zhu/posts/6e05f23c/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Rohman.Zhu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="诺曼实验室">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 诺曼实验室">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/posts/6e05f23c/" class="post-title-link" itemprop="url">SQL复习笔记</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2017-06-11 15:14:37" itemprop="dateCreated datePublished" datetime="2017-06-11T15:14:37+00:00">2017-06-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-12-22 05:27:48" itemprop="dateModified" datetime="2024-12-22T05:27:48+00:00">2024-12-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Database/" itemprop="url" rel="index"><span itemprop="name">Database</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h1><h2 id="数据库文件"><a href="#数据库文件" class="headerlink" title="数据库文件"></a>数据库文件</h2><ul>
<li>主要数据文件 : 每一个数据库有一个 <em>主要数据文件</em> ,建议文件拓展名是”mdf”</li>
<li>次要数据文件 : 次要数据文件是可选的,建议拓展名是”ndf”</li>
<li>日志文件 : 每一个数据库必须至少有一个日志文件 , 拓展名是”ldf”</li>
</ul>
<h2 id="文件组"><a href="#文件组" class="headerlink" title="文件组"></a>文件组</h2><ul>
<li>每个数据库有一个名为PRIMARY的文件组.此文件组包含主要数据文件和未放入其他文件组的所有次要文件.</li>
</ul>
<h3 id="相关SQL语句"><a href="#相关SQL语句" class="headerlink" title="相关SQL语句"></a>相关SQL语句</h3><p>创建数据库</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">//关键字 : Create Database</span><br><span class="line">Create Database DatabaseName</span><br><span class="line">//处于的文件组</span><br><span class="line">ON Primary</span><br><span class="line">(NAME = &#x27;eShop&#x27;,FILENAME = &#x27;D:\eShop.mdf&#x27;,SIZE = 5120KB,MAXSIZE = UNLIMITED,FILEGROWTH = 1024 KB)</span><br><span class="line"></span><br><span class="line">//创建文件组 关键字:FILEGROWTH</span><br><span class="line"></span><br><span class="line">FILEGROWTH filegrowthName</span><br><span class="line"></span><br><span class="line">Log on</span><br><span class="line">( NAME = &#x27;eShop_log&#x27;,FILENAME = &#x27;D:\ eShop_log.ldf&#x27; ,SIZE = 1024KB,MAXSIZE = 2048 GB , FILEGROWTH = 10%)</span><br></pre></td></tr></table></figure>

<p>切换数据库</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//USE 数据库名字</span><br><span class="line">USE master</span><br><span class="line">GO</span><br></pre></td></tr></table></figure>

<p>删除数据库</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//关键字 : Drop</span><br><span class="line">Drop DATABASE DatabaseName</span><br></pre></td></tr></table></figure>

<h2 id="关于创建表格"><a href="#关于创建表格" class="headerlink" title="关于创建表格"></a>关于创建表格</h2><h3 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h3><table>
<thead>
<tr>
<th align="center">类型</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">char[(n)]</td>
<td align="center">固定长度,非Unicode字符串数据</td>
</tr>
<tr>
<td align="center">varchar[(n MAX)]</td>
<td align="center">可变长度,非Unicode字符串数据</td>
</tr>
<tr>
<td align="center">nachr[(n)]</td>
<td align="center">固定长度,Unicode字符串数据</td>
</tr>
<tr>
<td align="center">nvarchar[(n MAX)]</td>
<td align="center">可变长度,Unicode字符串数据</td>
</tr>
<tr>
<td align="center">n:用于定义字符串长度.</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">MAX:指示最大存储,大小可达2^31 - 1个字节(2GB)</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">int</td>
<td align="center">整型</td>
</tr>
<tr>
<td align="center">decimal[ p[,s] ]</td>
<td align="center">可指定小数位数</td>
</tr>
<tr>
<td align="center">p(精度)最多可以存储的十进制数字的总位数,默认精度18;</td>
<td align="center">s(小数位数): 指定的小数位,默认的小数位数为0</td>
</tr>
<tr>
<td align="center">date</td>
<td align="center">时间 2015-09-03</td>
</tr>
<tr>
<td align="center">datetime</td>
<td align="center">2015-09-03 10:33:29.123</td>
</tr>
</tbody></table>
<h2 id="创建表格"><a href="#创建表格" class="headerlink" title="创建表格"></a>创建表格</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE table_name</span><br><span class="line">(</span><br><span class="line">    column_name dataType [NULL | NOT NULL],</span><br><span class="line">    column_name dataType...</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h2 id="修改表格"><a href="#修改表格" class="headerlink" title="修改表格"></a>修改表格</h2><p>增加列</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE table_name</span><br><span class="line">ADD column_name dataType</span><br></pre></td></tr></table></figure>

<p>修改列</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE table_name</span><br><span class="line">ALTER COLUMN column_name dataType</span><br></pre></td></tr></table></figure>

<p>删除列</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE table_name</span><br><span class="line">DROP COLUMN column_name</span><br></pre></td></tr></table></figure>

<h2 id="删除表格"><a href="#删除表格" class="headerlink" title="删除表格"></a>删除表格</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DROP TABLE table_name</span><br></pre></td></tr></table></figure>

<h2 id="表格内容操作-–-增-删-改-查"><a href="#表格内容操作-–-增-删-改-查" class="headerlink" title="表格内容操作 – 增 &#x2F; 删 &#x2F; 改 &#x2F; 查"></a>表格内容操作 – 增 &#x2F; 删 &#x2F; 改 &#x2F; 查</h2><p>INSERT</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//方法一 -- 给对应的列插入数据</span><br><span class="line">INSERT table_name(column_name_1,column_name_2,...) VALUES (value_1,value_2,...)</span><br><span class="line">//方法二 -- 省略列名</span><br><span class="line">INSERT table_name values (value_1,value_2,...)</span><br></pre></td></tr></table></figure>

<p>SELECT</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//查询全部列</span><br><span class="line">SELECT * FROM table_name</span><br><span class="line"></span><br><span class="line">//查询指定列</span><br><span class="line">SELECT column_name_1,column_name_2 FROM table_name</span><br></pre></td></tr></table></figure>

<p>UPDATE</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UPDATE table_name SET column_name = value WHERE column_name = value</span><br></pre></td></tr></table></figure>

<p>DELECT</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//方法一:删除所有记录</span><br><span class="line">DELECT table_name</span><br><span class="line">//方法二删除指定记录</span><br><span class="line">DELECT table_name WHERE column_name = value</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="设立主键-默认值-约束"><a href="#设立主键-默认值-约束" class="headerlink" title="设立主键 &#x2F; 默认值 &#x2F; 约束"></a>设立主键 &#x2F; 默认值 &#x2F; 约束</h2><h3 id="主键-–-PRIMARY-KEY"><a href="#主键-–-PRIMARY-KEY" class="headerlink" title="主键 – PRIMARY　KEY"></a>主键 – PRIMARY　KEY</h3><ul>
<li>一个表只能有一个主键</li>
<li>主键的作用:</li>
</ul>
<ol>
<li>保证实体的完整性</li>
<li>加快数据库的操作速度</li>
</ol>
<ul>
<li>建立主键的原则:</li>
</ul>
<ol>
<li>可以是没有实际意义</li>
<li>建议永远不用更新主键</li>
<li>主键不应该包含动态变化的数据</li>
<li>主键应尽量少人为设置,原因是会带来’除唯一标识以外’的意义</li>
</ol>
<h3 id="建立主键"><a href="#建立主键" class="headerlink" title="建立主键"></a>建立主键</h3><blockquote>
<p>在创建表的时候添加主键</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//方法一:</span><br><span class="line">//语法是: CONSTRAINT key_name PRIMARY KEY (column_name)</span><br></pre></td></tr></table></figure>

<h3 id="默认值-DEFULT"><a href="#默认值-DEFULT" class="headerlink" title="默认值 - DEFULT"></a>默认值 - DEFULT</h3><blockquote>
<p>在创建表的时候添加默认值</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//关键字 : DEFAULT</span><br><span class="line">column_name dataType DEFAULT targetValues</span><br></pre></td></tr></table></figure>

<h3 id="约束–CHECK"><a href="#约束–CHECK" class="headerlink" title="约束–CHECK"></a>约束–CHECK</h3><blockquote>
<p>在创表的时候添加约束</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CONSTRAINT check_name CHECK( column_name LIKE value)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>约束的值有很多种格式(如: or , in ),这里没有列出</p>
</blockquote>
<h3 id="删除约束"><a href="#删除约束" class="headerlink" title="删除约束"></a>删除约束</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE table_name</span><br><span class="line">DROP CONSTRAINT check_name</span><br></pre></td></tr></table></figure>

<h3 id="设计表-外键-触发器"><a href="#设计表-外键-触发器" class="headerlink" title="设计表 : 外键 &#x2F; 触发器"></a>设计表 : 外键 &#x2F; 触发器</h3><h4 id="外键-–-FOREIGN-KEY"><a href="#外键-–-FOREIGN-KEY" class="headerlink" title="外键 – FOREIGN KEY"></a>外键 – FOREIGN KEY</h4><blockquote>
<p>如果一个表的数据依赖于另一个表的数据,那么可以定义外键来保证数据的合理性<br>例如:现在有两张表(供应商表SuppliertTable和订单表OrderTable),这两张表有交集的地方,就是供应商的ID(SupperID),那么这两张表交集的数据就必须同步.</p>
</blockquote>
<p>创建外键</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE table_name</span><br><span class="line">ADD CONSTRANT foreignKey_name</span><br><span class="line">FOREIGN KEY(foreignkey_column_name) REFERENCES PrimaryTableName (primaryKeyName)</span><br></pre></td></tr></table></figure>

<p>删除外键</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE table_name</span><br><span class="line">DROP CONTRAINT foreignKey_name</span><br></pre></td></tr></table></figure>

<blockquote>
<p>PS: 先创建好主键,后再创建相应的外键</p>
</blockquote>
<h4 id="触发器-–-TRIGGER"><a href="#触发器-–-TRIGGER" class="headerlink" title="触发器 – TRIGGER"></a>触发器 – TRIGGER</h4><blockquote>
<p>当执行某一个操作时,要触发相应的操作.</p>
</blockquote>
<p>创建触发器</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREATE TRIGGER trigger_name</span><br><span class="line">on table_name</span><br><span class="line">FOR&#123; [UPDATE][,][DELECT][,][INSERT]&#125;</span><br><span class="line">AS</span><br><span class="line">TODO_SQL_Statement</span><br></pre></td></tr></table></figure>

<blockquote>
<p>举个例子,如下:</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ALTER TRIGGER TR_TestDemo</span><br><span class="line">On TestDemoTable</span><br><span class="line">FOR(UPDATE)</span><br><span class="line">AS</span><br><span class="line">IF UPDATE(Amount) OR UPDATE(ProductID)</span><br><span class="line">PRINT &#x27;UPDATE订单子表被触发&#x27;</span><br></pre></td></tr></table></figure>

<p>当发生更新数据库数据的操作,则执行以下操作</p>
<p>INSTEAD OF</p>
<blockquote>
<p>将FOR改成INSTEAD OF,则触发器时执行触发器而不执行触发的SQL语句.<br>应用场景 : 阻止对数据库的增删改</p>
</blockquote>
<p>例子如下:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ALTER TRIGGER TR_name</span><br><span class="line">ON table_name</span><br><span class="line">INSTEAD OF &#123; [UPDATE][,][DELECT][,][INSERT]&#125;</span><br><span class="line">AS</span><br><span class="line"> PRINT &#x27;你的SQL语句不会生效,而是会输出当前这句话&#x27;</span><br></pre></td></tr></table></figure>

<p>禁用触发器</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE table_name DISABLE TRIGGER TR_trigger_name</span><br></pre></td></tr></table></figure>

<p>启用触发器</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE table_name ENABLE TRIGGER TR_trigger_name</span><br></pre></td></tr></table></figure>

<h2 id="查询"><a href="#查询" class="headerlink" title="查询"></a>查询</h2><h3 id="条件查询"><a href="#条件查询" class="headerlink" title="条件查询"></a>条件查询</h3><ul>
<li>WHERE</li>
</ul>
<blockquote>
<p>[WHERE <search_condition> ]</p>
</blockquote>
<ul>
<li>查询条件一 : “&gt;&#x3D;” , “&lt;&#x3D;” , “&#x3D;” , “AND” , “OR” , “BETWEEN”</li>
<li>查询条件二 : 模糊查询–LIKE,再配合” % “ 指定任意长度的字符串</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELCET * FROM table_name WHERE column LIKE &#x27; %good% &#x27;</span><br></pre></td></tr></table></figure>

<ul>
<li>子查询”In”</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELCET * FROM table_name</span><br><span class="line">WHERE column_name IN</span><br><span class="line">(SELECT DISTINCT column_name FROM table_name)</span><br><span class="line">//DISTINCT -- 去重复记录</span><br></pre></td></tr></table></figure>

<ul>
<li>聚合函数</li>
</ul>
<blockquote>
<p>以下列举出几个常用的函数</p>
</blockquote>
<table>
<thead>
<tr>
<th>函数名</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td>COUNT</td>
<td align="center">统计记录的个数</td>
</tr>
<tr>
<td>MAX</td>
<td align="center">获取最大值</td>
</tr>
<tr>
<td>MIN</td>
<td align="center">获取最小值</td>
</tr>
<tr>
<td>SUM</td>
<td align="center">求和</td>
</tr>
<tr>
<td>AVG</td>
<td align="center">求平均值</td>
</tr>
</tbody></table>
<h3 id="统计汇总查询"><a href="#统计汇总查询" class="headerlink" title="统计汇总查询"></a>统计汇总查询</h3><ul>
<li>GROUP BY – 通过一定的规则将一个数据集合划分成若干个小的区域</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT SupplierID , AVG(Price) FROM Product GROUP BY SupplierID</span><br></pre></td></tr></table></figure>

<ul>
<li>HAVING – 用于对聚合函数进行筛选.</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT SupplierID , AVG(Price) FROM Product GROUP BY SupplierID HAVING AVG(Price) &gt; 300</span><br></pre></td></tr></table></figure>

<h3 id="多表查询"><a href="#多表查询" class="headerlink" title="多表查询"></a>多表查询</h3><blockquote>
<p>查询两张表格</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT Product.* , SupplierName</span><br><span class="line">FROM Product,Suppliers</span><br><span class="line">WHERE Product.SupplierID = Suppliers.SupplierID</span><br></pre></td></tr></table></figure>

<h3 id="SQL编程-函数"><a href="#SQL编程-函数" class="headerlink" title="SQL编程 \ 函数"></a>SQL编程 \ 函数</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//定义变量 -- 整型变量 i , 整型变量 COUNT</span><br><span class="line"></span><br><span class="line">DECLARE @i int,@COUNT int</span><br><span class="line"></span><br><span class="line">// 赋值语 可以用SET 也可以用SELECT @i = 1</span><br><span class="line">SET @i = 1</span><br><span class="line">SET @COUNT = (SELECT COUNT(*) FROM Products)</span><br></pre></td></tr></table></figure>

<h3 id="设立视图"><a href="#设立视图" class="headerlink" title="设立视图"></a>设立视图</h3><blockquote>
<p>视图是基于SELECT语句的结果集的可视化的表.</p>
</blockquote>
<ul>
<li>可以隐藏一些数据,确保数据的隐秘性</li>
<li>可以使复杂的查询易于理解和使用.</li>
</ul>
<h3 id="创建视图"><a href="#创建视图" class="headerlink" title="创建视图"></a>创建视图</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CREATE VIEW view_name</span><br><span class="line">AS</span><br><span class="line">SELECT statements</span><br></pre></td></tr></table></figure>

<p>例子:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CREATE VIEW V1</span><br><span class="line">AS</span><br><span class="line">SELECT Products.*,SupplierName FROM Products,Suppliers</span><br><span class="line">WHERE Products.SupplierID = Suppliers.SupplierID</span><br></pre></td></tr></table></figure>

<h3 id="观看视图"><a href="#观看视图" class="headerlink" title="观看视图"></a>观看视图</h3><p>正常执行 SQL 语句就好</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM V1</span><br></pre></td></tr></table></figure>

<h3 id="修改视图"><a href="#修改视图" class="headerlink" title="修改视图"></a>修改视图</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ALTER VIEW view_name</span><br><span class="line">AS</span><br><span class="line">SELECT statement</span><br></pre></td></tr></table></figure>

<h3 id="删除视图"><a href="#删除视图" class="headerlink" title="删除视图"></a>删除视图</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DROP VIEW view_name</span><br></pre></td></tr></table></figure>

<h3 id="存储过程"><a href="#存储过程" class="headerlink" title="存储过程"></a>存储过程</h3><blockquote>
<p>存储过程是存在数据库中的过程,执行某些操作,有参数或者无参数,可以通过前台程序调用,去执行一些较为复杂的数据库操作.</p>
</blockquote>
<h3 id="创建存储过程"><a href="#创建存储过程" class="headerlink" title="创建存储过程"></a>创建存储过程</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CREATE PROCEDURE procedure_name</span><br><span class="line">AS</span><br><span class="line">SQL statement</span><br></pre></td></tr></table></figure>

<h3 id="执行存储过程"><a href="#执行存储过程" class="headerlink" title="执行存储过程"></a>执行存储过程</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//方法一:</span><br><span class="line">EXECUTE procedure_name</span><br><span class="line">//方法二:</span><br><span class="line">EXEC procedure_name</span><br><span class="line">//方法三:</span><br><span class="line">procedure_name</span><br></pre></td></tr></table></figure>

<h3 id="修改存储过程"><a href="#修改存储过程" class="headerlink" title="修改存储过程"></a>修改存储过程</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ALTER PROCEDURE procedure_name</span><br><span class="line">AS</span><br><span class="line">SQL statement</span><br></pre></td></tr></table></figure>

<h3 id="删除存储过程"><a href="#删除存储过程" class="headerlink" title="删除存储过程"></a>删除存储过程</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DROP PROCEDURE procedure_name</span><br></pre></td></tr></table></figure>

<h3 id="带参数的存储过程"><a href="#带参数的存储过程" class="headerlink" title="带参数的存储过程"></a>带参数的存储过程</h3><ul>
<li>参数需要指定参数名称和数据类型</li>
<li>存储过程中参数规定以”@” 符号开头</li>
<li>参数的数据类型通过数据类型通常与表中定义一致</li>
</ul>
<h4 id="样例代码"><a href="#样例代码" class="headerlink" title="样例代码"></a>样例代码</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CREATE PROCEDURE procedure_name</span><br><span class="line">@SupplierID nvarchar(2)</span><br><span class="line">AS</span><br><span class="line">SELECT ProductID,Products.SupplierID,SupplierName,ProductName FROM Products ,Suppliers</span><br><span class="line">WHERE Products.SupplierID = Suppliers.SupplierID</span><br><span class="line">AND Products.SupplierID = @SupplierID</span><br></pre></td></tr></table></figure>

<h4 id="执行"><a href="#执行" class="headerlink" title="执行"></a>执行</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">EXEC procedure_name &#x27;01&#x27;</span><br><span class="line">//或者</span><br><span class="line">EXEC procedure_name @SupplierID = &#x27;01&#x27;</span><br></pre></td></tr></table></figure>

<h4 id="带多个参数的存储过程-代码基本同上-故此处略"><a href="#带多个参数的存储过程-代码基本同上-故此处略" class="headerlink" title="带多个参数的存储过程 , 代码基本同上 (故此处略)"></a>带多个参数的存储过程 , 代码基本同上 (故此处略)</h4><h3 id="带输入参数与输出参数的存储过程"><a href="#带输入参数与输出参数的存储过程" class="headerlink" title="带输入参数与输出参数的存储过程"></a>带输入参数与输出参数的存储过程</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">CREATE PROCEDURE procedure_name</span><br><span class="line">@SupplierID nvarchar(2),</span><br><span class="line">@ProductName nvarchar(20),</span><br><span class="line">//输出参数@ProductCount,需要指明OUTPUT关键字</span><br><span class="line">@ProcedureCount int OUTPUT</span><br><span class="line">AS</span><br><span class="line">SELECT ProductID , Products.SupplierID , SupplierName , ProductName FROMProducts , Suppliers</span><br><span class="line">WHERE Products.SupplierID = Suppliers.SupplierID</span><br><span class="line">AND Products.SupplierID = @SupplierID AND ProductName LIKE &#x27;%&#x27; + @ProductName + &#x27;%&#x27;</span><br><span class="line">SET @ProductCount = @@ROWCOUNT</span><br></pre></td></tr></table></figure>

<p>执行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DECLARE @ProductCount int</span><br><span class="line">EXEC procedure_name &#x27;01&#x27;,&#x27;16G,@ProductCount OUTPUT</span><br><span class="line">PRINT @ProductCount</span><br></pre></td></tr></table></figure>

<h2 id="游标"><a href="#游标" class="headerlink" title="游标"></a>游标</h2><h3 id="游标的作用"><a href="#游标的作用" class="headerlink" title="游标的作用"></a>游标的作用</h3><ol>
<li>允许定位在结果集的特定行.</li>
<li>从结果集的当前位置检索一行或一部分.</li>
<li>支持对结果集中当前的位置进行数据修改.</li>
</ol>
<h3 id="使用游标"><a href="#使用游标" class="headerlink" title="使用游标"></a>使用游标</h3><p>定义游标</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DECLARE cursor_name [ SCROLL ] CURSOR</span><br><span class="line">FOR select_statement</span><br><span class="line">[ FOR &#123;READ ONLY | UPDATE &#125; ]</span><br></pre></td></tr></table></figure>
<p> 其中 :</p>
<ul>
<li>SCROLL – 指定所有的提取选项(FIRST \ LAST \ PRIOR \ NEXT \ RELATIVE \ ABSOLUTE)均可用</li>
</ul>
<p> 如果未指定SCROLL , 则NEXT 是唯一支持的提取选项 .</p>
<ul>
<li>select_statement – 定义游标结果集的标准SELECT语句.</li>
<li>READ ONLY  – 禁止通过该游标进行更新.在UPDATE 或者DELETE 语句中的WHERE CURRENT OF 子句不能引用游标.</li>
<li>UPDATE – 定义游标可更新.</li>
<li>OPEN CURSOR – 填充结果集</li>
</ul>
<h3 id="操作游标"><a href="#操作游标" class="headerlink" title="操作游标"></a>操作游标</h3><p>FETCH – 从结果集返回行.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">FETCH</span><br><span class="line">[NEXT | PRIOR | FIRST | LAST | ABSOLUTE &#123;n&#125; | RELATIVE &#123;n&#125; ]</span><br><span class="line">FROM cursor_name</span><br><span class="line">[INTO @variable_name [,...n]  ]</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p></p>
<ul>
<li>NEXT – 返回当前行的下一行.</li>
<li>PRIOR – 返回紧领当前行前面的结果行.</li>
<li>FIRST – 返回游标中的第一行并将其作为当前行.</li>
<li>LAST – 返回游标中的最后一行并将其作为当前行.</li>
<li>ABSOLUTE {n} <em>(绝对)</em> – 如果 n 为正 ,则返回从游标起始处开始向后的第n行,并将返回行变成新的当前行;    如果n为负,则返回从游标末尾处开始向前的第n行,并将返回行变成新的当前行 ;  如果n为 0 , 则不返回行;</li>
<li>RELATIVE {n} <em>(相对)</em> – 如果n为正,则返回从当前行开始向后的第n行,并将返回行变成新的当前行 ; 如果n为负,则返回从当前行向前的第n行,并将返回行变成新的当前行 . 如果n为 0 ,则不返回行.</li>
</ul>
<h3 id="样例"><a href="#样例" class="headerlink" title="样例"></a>样例</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">//定义游标</span><br><span class="line">DECLARE ProductsCursor SCROLL CURSOR FOR</span><br><span class="line">SELECT ProductID,ProductName FROM Products ORDER BY ProductID</span><br><span class="line"></span><br><span class="line">//什么是填充结果集???</span><br><span class="line">OPEN ProductsCursor</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>执行查询</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">//FETCH初始化是-1的位置</span><br><span class="line"></span><br><span class="line">//从结果集中返回行,第一次提取操作,返回结果集中的第一行</span><br><span class="line">FETCH NEXT FROM ProductsCursor</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h3><p>是并发控制的单位,是用户定义的一个操作序列.</p>
<h4 id="特征"><a href="#特征" class="headerlink" title="特征"></a>特征</h4><ol>
<li>原子性 – 一个事务是一个不可分割的工作单位.</li>
<li>一致性 – 事务必须是使数据库从一个一致性状态变成另一个一致性状态.</li>
<li>隔离性 – 一个事务的执行不能被其他事务干扰.</li>
<li>持久性 – 一个事务一旦提交,它对数据库的改变就是永久性的.</li>
</ol>
<h4 id="样例-1"><a href="#样例-1" class="headerlink" title="样例####"></a>样例####</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">//开始事务</span><br><span class="line"></span><br><span class="line">BEGIN transaction_name</span><br><span class="line">INSERT Supplier VALUES(&#x27;07&#x27;,&#x27;魅族&#x27;)</span><br><span class="line"></span><br><span class="line">//提交事务</span><br><span class="line"></span><br><span class="line">COMMIT transaction_name</span><br><span class="line"></span><br><span class="line">//回滚事务</span><br><span class="line"></span><br><span class="line">ROLBCK transaction_name</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h3 id="架构与安全"><a href="#架构与安全" class="headerlink" title="架构与安全"></a>架构与安全</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">//创建架构</span><br><span class="line">CREATE SCHEMA schema_name</span><br><span class="line">//创建表格指定属于某一个架构</span><br><span class="line">CREATE TABLE schemaName.tableName</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h3 id="使用SQL语句创建登录名"><a href="#使用SQL语句创建登录名" class="headerlink" title="使用SQL语句创建登录名"></a>使用SQL语句创建登录名</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">CREATE LOGIN UserName WITH PASSWORD = &#x27;UserPassword&#x27;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>有了登录名可以连接SQL Server服务器,但还不具备具体的操作权限,因此需要进行授权操作.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">CREATE USER UserName FOR LOGIN UserName</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h3 id="测试用户"><a href="#测试用户" class="headerlink" title="测试用户"></a>测试用户</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">//模拟用户</span><br><span class="line">SETUSER &#x27;UserName&#x27;</span><br><span class="line">//SQL语句</span><br><span class="line">SELECT * FROM schema.tableName</span><br><span class="line">//测试结束,重置当前用户为管理员账户</span><br><span class="line">SETUSER</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="授权操作"><a href="#授权操作" class="headerlink" title="授权操作"></a>授权操作</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">//切换到系统管理员账户</span><br><span class="line">SETUSER</span><br><span class="line">//授予权限</span><br><span class="line">GRANT [SELECT | DELECT | UPDATE] ON table_Name TO UserName</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="回收权限"><a href="#回收权限" class="headerlink" title="回收权限"></a>回收权限</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">//切换到系统管理员账户</span><br><span class="line">SETUSER</span><br><span class="line">//回收权限</span><br><span class="line">REVOKE [SELECT | DELECT | UPDATE] ON table_Name TO UserName</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="备份数据库"><a href="#备份数据库" class="headerlink" title="备份数据库"></a>备份数据库</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">//创建备份设备,使用 sp_addumpdevice创建备份设备 , 备份设备为磁盘(disk),对应物理文件为&#x27;G:\eshop3.bak&#x27;</span><br><span class="line"></span><br><span class="line">sp_addumpdevice &#x27;disk&#x27;,&#x27;eshop3&#x27;,&#x27;G:\eshop3.bak&#x27;</span><br><span class="line"></span><br><span class="line">//备份数据库</span><br><span class="line">BACKUP DATABASE eshop to eshop3</span><br><span class="line"></span><br><span class="line">//恢复数据库,覆盖现有的数据库</span><br><span class="line">RESTORE DATABASE eshop from disk = &#x27;G:\eshop3.bak&#x27; with replace</span><br><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="Previous page" aria-label="Previous page" href="/page/46/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/46/">46</a><span class="page-number current">47</span>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2026</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Rohman.Zhu</span>
  </div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  

  <script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":"light","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mermaid/11.4.0/mermaid.min.js","integrity":"sha256-G8ouPAnw4zzMbnAenHnVz6h9XpKbNdOkrqTh7AadyHs="}}</script>
  <script src="/js/third-party/tags/mermaid.js"></script>





  





</body>
</html>
